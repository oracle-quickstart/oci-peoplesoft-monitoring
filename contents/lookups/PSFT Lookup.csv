Metric Name,Solution KM Note,SQL Statement,Solution for the issue,Application Code,Issue Summary,Issue Description,Issue Severity,Product to raise SR if help needed,SR Component,SR Sub Component,Scheduling,Scheduling Details,Business Impact,Business Flow,Prod Family,Prod Area
PSFT_CS_FA_DL_ITEMTYPE_FAILS_AUTHORIZATION,2681622.1,"SELECT 'Review ' || Count(*) || ' loan(s) with accepted origination and promissory note but have not been marked as ready for disbursement' as KEY_DATA, 
'See Doc ID 2681622.1 For Solution' AS Solution,
'Y' as EVENT
FROM
(SELECT A.EMPLID, A.INSTITUTION, A.AID_YEAR, A.ACAD_CAREER, B.LOAN_TYPE, A.ITEM_TYPE, A.DISBURSEMENT_ID, A.LN_APPL_SEQ
FROM SYSADM.PS_LOAN_STDNT_AWD A, SYSADM.PS_LOAN_ORIG_DTL B, SYSADM.PS_LOAN_ORIGNATN C
WHERE ( A.LN_DISB_AMT_NET = 0
OR A.LN_ACTION_CD NOT IN ('A','C','D'))
AND A.EMPLID = B.EMPLID
AND A.INSTITUTION = B.INSTITUTION
AND A.AID_YEAR = B.AID_YEAR
AND A.ITEM_TYPE = B.ITEM_TYPE
AND A.ACAD_CAREER = B.ACAD_CAREER
AND A.LN_APPL_SEQ = B.LN_APPL_SEQ
AND B.LOAN_TYPE = A.LOAN_TYPE
AND B.LOAN_PROC_STAT = 'S'
AND B.LN_ORIG_TRANS = 'A'
AND A.EMPLID = C.EMPLID
AND A.INSTITUTION = C.INSTITUTION
AND A.AID_YEAR = C.AID_YEAR
AND A.ACAD_CAREER = C.ACAD_CAREER
AND A.LN_APPL_SEQ = C.LN_APPL_SEQ
AND C.LOAN_TYPE = A.LOAN_TYPE
AND C.LN_ORIG_PNOTE_STAT = 'A'
AND C.AID_YEAR = (Select AID_YEAR
From SYSADM.PS_AID_YEAR_TBL
Where INSTITUTION = A.INSTITUTION
And ACAD_YEAR_START <= SYSDATE and ACAD_YEAR_END >= SYSDATE))
having count (*) >= 0","The issue will be resolved with the following steps:
1) Contact COD if you need an understanding of why the original batch with the 15 records with rejected. At the same time, you can work with them to re-send the MPN information on the missing students.
2) Update the disbursement information in one of two ways:
a) If you contacted COD in step 1 and they are able to send you the MPN information in a new file, load the new file.
b) Manually review the information in the original file, then navigate to Financial Aid > Loans > Direct Lending Mangement > Override Processing Status, select the 'Update DL Disb Status' radio button and click 'Update Origination'.
3) Re-test authorizing and disbursing the loans.",,MPN data is in CRDL file and shows in View COD Data but is not showing in Manage Dir Loan Ap,Some records are processing correctly and a possible pattern recently discovered is that the problem is happening for 'GRAD Academic Careers,2,PeopleSoft Enterprise CS Financial Aid,FAAUTHDISB,AUTHDISB,WEEK,SAT,Users will not be able to disburse loan funds to the student account,,PeopleSoft Campus Solutions,CS Financial Aid Area
PSFT_CS_FA_ERROR169_AWDPOSTING,2920351.1,"SELECT 'Review ' || count(*) || ' Financial Aid term row(s) being awarded for one or more item types.' as KEY_DATA, 
'KM Doc ID 2920351.1 to resolve this issue.' as SOLUTION, 
'Y' as EVENT
FROM
(SELECT A.EMPLID, A.INSTITUTION, A.AID_YEAR, A.ITEM_TYPE, A.ACAD_CAREER
FROM SYSADM.PS_STDNT_AWRD_DISB A, SYSADM.PS_STDNT_FA_TERM B
WHERE A.AID_YEAR >= (Select AID_YEAR
FROM SYSADM.PS_AID_YEAR_TBL
WHERE INSTITUTION = A.INSTITUTION
AND ACAD_YEAR_START <= SYSDATE AND ACAD_YEAR_END >= SYSDATE)
AND A.OFFER_BALANCE > 0
AND A.EMPLID = B.EMPLID
AND A.INSTITUTION = B.INSTITUTION
AND B.STRM = A.STRM
AND B.EFFDT =
(SELECT MAX(B_ED.EFFDT) FROM SYSADM.PS_STDNT_FA_TERM B_ED
WHERE B.EMPLID = B_ED.EMPLID
AND B.INSTITUTION = B_ED.INSTITUTION
AND B.STRM = B_ED.STRM
AND B_ED.EFFDT <= SYSDATE)
AND B.EFFSEQ =
(SELECT MAX(B_ES.EFFSEQ) FROM SYSADM.PS_STDNT_FA_TERM B_ES
WHERE B.EMPLID = B_ES.EMPLID
AND B.INSTITUTION = B_ES.INSTITUTION
AND B.STRM = B_ES.STRM
AND B.EFFDT = B_ES.EFFDT)
AND ( B.EFF_STATUS = 'I'
OR A.AID_YEAR <> B.AID_YEAR
OR A.ACAD_CAREER <> B.ACAD_CAREER))
HAVING COUNT(*) > 0","The issue will be resolved with the following steps:

1. On Financial Aid > Awards > Award Processing > Assign Awards to a Student > Student Aid Package, click into the 'Disbursement' links for all item types posted with amount > 0 and note all terms linked to all such item types.
2. Navigate to Financial Aid > Financial Aid Term > Maintain Student FA Term > FA Term for the same EMPLID.
3. Check that each term identified in step 1 is active and populated with the correct Aid Year and career and update either as needed, either by clicking the 'Build' button to rebuild the student or by manually updating the field(s).
4. Back on Assign Awards to Students, cancel/validate/post any non-zero item types posted for a term under a different career than what was verified for the term in step 3.*
5. For any item type(s) canceled in step 4, re-offer/accept, validate, and post the item type(s) under the correct career.",,Award Entry Posting Error,Student validates on award entry but when you try to post it ends in posting encountered errors.  I noticed that the PLUS loan was missing an aggregate le,3,PeopleSoft Enterprise CS Financial Aid,AWARDPRC,ONLNPKG,WEEK,SAT,Users are unable to complete the adjustment to the award which is needed ahead of the payment due date and requires the award to be disbursed correctly,,PeopleSoft Campus Solutions,CS Financial Aid Area
PSFT_CS_FA_AWARD_VALIDATION_EDIT_9562,2399092.1,"Select 'Review' ||count(*)|| 'transaction(s) where disbursement ID was not found in the disbursement plan' as KEY_DATA, 
'Refer KM Doc ID 2399092.1' as SOLUTION, 
'Y' as EVENT 
FROM 
(SELECT A.EMPLID, A.INSTITUTION, A.AID_YEAR, A.ACAD_CAREER, A.PKG_SEQ_NBR, A.DISBURSEMENT_PLAN, P.DISBURSEMENT_ID 
FROM SYSADM.PS_STDNT_AWaRDS A, SYSADM.PS_STDNT_awrd_disb P 
Where P.emplid = A.emplid
And P.institution = A.institution
And P.aid_year = A.aid_year
And P.acad_career = A.acad_career
And A.aid_year = (Select aid_year From SYSADM.ps_aid_year_tbl
Where institution = A.institution
And acad_year_start <= SYSDATE
and acad_year_end >= SYSDATE)
And not exists (Select 'X'
From SYSADM.PS_DISB_ID_TBL 
Where institution = A. institution
And aid_year = A.aid_year
And acad_career = A.acad_career
And disbursement_plan = A.disbursement_plan
And disbursement_id = P.disbursement_id)) 
having count(*) > 0","1. Run an SQL to delete any orphaned rows from the PS_DISB_ID_SPLIT table that don't exist in the DISB_ID_TBL for the same disbursement plan.
2. If possible, use an SQL to update the STDNT_AWARDS.DISBURSEMENT_PLAN field to a different plan that contains all of the same disbursement id's and terms that are currently posted for the student. If this isn't possible, skip to step 4.
3. Once the plan is changed, cancel the item type, validate, and post; then re-award the item type under the other intended disbursement plan, make any other required changes, validate and post.
4. If the issue was not resolved in the prior steps, use an SQL to delete the orphaned rows from the STDNT_AWRD_DISB table.",,Error posting awards on FA,"We have a few students who have an error on posting awards.  We cannot cancel, change, or even use external awards to change it.  We think it may have to d",3,PeopleSoft Enterprise CS Financial Aid,AWARDPRC,ONLNPKG,WEEK,MON,Unable to revise an existing award on STDNT_AWARDS due to a change to the Disbursement Id's used in the initial awarding process.,,PeopleSoft Campus Solutions,CS Financial Aid Area
PSFT_CS_FA_COD_IMP_CORR_DATA,2481726.1,"select 'Review' || count(*) || 'Number of PS_LOAN_DISB_MSG rows with LN_DISB_SEQ_NBR equal to 0'  as KEY_DATA,
'See KM Doc ID 2481726.1'  as SOLUTION,
'Y'  as EVENT
FROM
(SELECT A.EMPLID, A.INSTITUTION, A.AID_YEAR
from SYSADM.PS_LOAN_DISB_MSG A
WHERE A.AID_YEAR >= (Select AID_YEAR
FROM SYSADM.PS_AID_YEAR_TBL
WHERE INSTITUTION = A.INSTITUTION
AND ACAD_YEAR_START <= SYSDATE AND ACAD_YEAR_END >= SYSDATE)
AND LN_DISB_SEQ_NBR = 0)
having count(*)  >=  1","1. Query all records in the PS_LOAN_DISB_MSG table for the aid year being processed where the LN_DISB_SEQ_NBR = 0
2. For the same group of students, query the PS_LOAN_DISB_ACTN.LN_ACTION_STATUS. Use all key fields matching on PS_LOAN_DISB_MSG in step 1, except LN_DISB_SEQ_NBR. For LN_DISB_SEQ_NBR, use the max sequenced PS_LOAN_DISB_ACTN row where the SFA_CR_DOCUMENT_ID is also populated, as this extra criteria should identify the last transaction actually sent to COD (in case subsequent rows, not directly related to sending and receiving COD information, have since been populated).
3. For records where the identified LN_ACTION_STATUS <> 'T', query the PS_SFA_COD_AWARD.SFA_CR_AWARD_STAT on the records matching on cod document id, emplid, and loan/award type. For the latter, this means matching the PS_SFA_COD_AWARD.SFA_CR_AWARD_NAME value of 'DLSubsidized', 'DLUnsubsidized', 'DLPLUS' against the equivalent LOAN_TYPE or ITEM_TYPE on LOAN_DISB_ACTN. 
4. For records where the identified SFA_CR_AWARD_STAT <> 'P,  run an SQL to set the SFA_CR_AWARD_STAT = 'P'.
5. Run an SQL to delete the rows identified in step 1.",,CODIN FAPCODIN Created Data in PS LOAN DISB MSG table with LN DISB SEQ NBR equal to 0,"After running the Import COD response data (CODIN) two-part process, it's observed that there were rows created in in PS_LOAN_DISB_MSG with LN_DISB_SEQ_NBR",2,PeopleSoft Enterprise CS Financial Aid,FINAIDLOANS,,WEEK,SAT,Loan Payments posted to the student account can be impacted when this error occurrs.,,PeopleSoft Campus Solutions,CS Financial Aid Area
PSFT_CS_FA_AWDPOSTING_DISBPLAN20,2940421.1,"Select 'Review ' || count(*) || ' Student(s) Who Reached a Maximum Number of Disbursement Plans' as KEY_DATA, 'Refer to Doc ID 2940421.1 For a Solution' as SOLUTION, 'Y' as EVENT
From
(
Select EMPLID, INSTITUTION, AID_YEAR, count(*)
From SYSADM.ps_STDNT_AWD_PKG
Where offer_amount <> 0
Group By EMPLID, INSTITUTION, AID_YEAR
Having count(*) > 20
)
having count(*) > 0","Essentially, the award posting process is designed to allow for 20 disbursement plans.  This is a hard-coded value in the code itself.  It's uncommon for a student to have aid with more than 20 disbursement plans. 

In order to get past the error for the students who are experiencing this error, you will have to revise the student's award package so that ONLY 20 or fewer disbursement plans are getting posted.",,Maximum Disbursement Plans was Exceeded Error,Error will occur if the student has more than 20 disbursement plans on student awards.,2,PeopleSoft Enterprise CS Financial Aid,AWARDPRC,FAPKGING,WEEK,SUN,Award Posting Process errors when student package has more than 20 Disbursement Plans offered,,PeopleSoft Campus Solutions,CS Financial Aid Area
PSFT_CS_FA_EDI_EXP_PRCS_ERR,610906.1,"select count(*)|| 'Potential Issue(s) With EDI Export Process failing - Could NOT Convert External ID at the EC Queue Level (See KM 610906.1)' as KEY_DATA,
'Review Doc ID 610906.1 to identify and resolve' as SOLUTION, 
'Y' as EVENT
from 
(SELECT ecentitycd
FROM SYSADM.PS_ECINTLINK L
Where not exists (Select 'X'
From SYSADM.PS_ECEXTTPLINK X
where X.ecentitycd = L.ecentitycd)
UNION
SELECT ECENTITYCD_EXT
FROM SYSADM.PS_ECQUEUE
where ECTRANSID='A004P'
and (ecentitycd_bu = ' '
or ecentitycd_ext = ' ')) 
having count(*) > 0","Solution 1 (corresponding to the first mentioned cause in the previous section): 

1.  Navigate to Peopletools > EDI Manager > Setup Trading Partners > External Partners.
2. Identify the external partner involved with the alternative loan transactions in question, based on the loan destination profile, or determine if a new partner needs to be added.
3. In the customer/vendor assignment section, make sure there is a row for the identified vendor number; again, the vendor corresponds with the loan destination profile.
4. Also note the PSCode (ECENTITYCD) and SetID values corresponding with the identified vendor. The PSCode should always be set up as 'LDST'. For the Setid, Peoplebooks says: ""Leave this field blank if you are not using a setID to control EDI outbound files. If you use a setID, it must match the financial aid business unit entity code defined in the FA EDI Destination page."" The SetID, if populated, must also match the business unit defined on the internal transfer id setup page (in the same menu group) that matches up with the external id. For commonline loans, the internal partner should typically be CL4_INT_TP. On this page, the PSCode should always be 'FATP', and the business unit should be what is set up on the FA EDI Destination page, which will typically be FABU.
5. Re-test the process.

Solution 2 (corresponding to the second cause referenced in the previous section):

1. Navigate to Set Up SACR > Product Related > Financial Aid > Loans > Maintain Loan Transfer ID.
2. Add the Loan Transfer ID or correct any missing or incorrect field values.
3. Any already existing ECQUEUEINSTANCEs that have blank values for any of the fields will require the PS_ECQUEUE table to be updated via SQL with the correct values for BUSINESS_UNIT, ECENTITYCD_BU, and ECENTITYCD_EXT. Typically these values will be FABU, FATP, and LDST respectively, unless one or more of these were not set up with the normal default value.
4. Re-test the process.",,Potential EDI Export Process Failures,,2,PeopleSoft Enterprise CS Financial Aid,FINAIDLOANS,,DAY,1,Loan processing could be impacted because of missing data either in the EDI Trading Partners or Loan Type Setup,,PeopleSoft Campus Solutions,CS Financial Aid Area
PSFT_CS_FA_AID_YR_MISMATCH,2406742.1,"Select 'Review' ||count(*)|| ' is not set up properly or not exist in the valid term(s) for career (See KM 2406742.1 )' AS KEY_DATA,
'Please refer to Doc ID 2406742.1 to learn the possible causes of this issue and how to solve it' AS SOLUTION,
'Y' AS EVENT
From
(Select distinct T.emplid, T.institution, T.strm, T.acad_career, T.aid_year
from SYSADM.ps_stdnt_fa_term T
, SYSADM.ps_aid_year_tbl A
where A.acad_year_end >= sysdate
and T.institution = A.institution
and T.aid_year = A.aid_year
and not exists (Select 'X'
From SYSADM.ps_aid_yr_car_term A
where T.institution = A.institution
and T.aid_year = A.aid_year
and T.acad_career = A.acad_career
and T.strm = A.strm)) 
having count(*) > 0","The issue will be resolved with the following steps:

Correct any of the Academic Year values on FA Term that are incorrect. The field is on the first tab of the FA Term component, and is non-updateable, so any change will need to be made using SQL.
 If the student is built with the same career for all terms, add or complete any missing/incomplete setup for those terms in Valid Terms for Career. Main Menu > Set Up SACR > Product Related > Financial Aid >> Aid Year > Valid Terms for Career. OR if the FA Term row was assigned the wrong aid year, update it to the correct year, or inactivate the term. 
If the student is built for two careers with different terms, add all valid terms to both valid Careers in Valid Terms for Career. Main Menu > Set Up SACR > Product Related > Financial Aid > Aid Year > Valid Terms for Career.
Uncheck the Override Census Date Lock - within the 'Census' link on the first page of FA Term - on any fa term row where the aid year has been overridden.

Please review the knowledge management article: Award Posting Process Encountered Error(s), Error 172 Financial Aid Term Mismatch Detected (Doc ID 2406742.1)",,Financial Aid Term Mismatch,,2,PeopleSoft Enterprise CS Financial Aid,AWARDPRC,ONLNPKG,DAY,1,Student awards could be impacted due to FA Term showing a different AId Year on the term that the student has FA awarded.,,PeopleSoft Campus Solutions,CS Financial Aid Area
PSFT_CS_SF_CASHIER_GL_ENTRIES_SFDPTREC,2893167.1,"Select 'Review ' || count(*) || ' Failed Cashier GL Interface Process Instance(s) Corresponding EO_MSGBATPRM Entry Does Not Exist' as KEY_DATA,
'Publishing Accounting Entries Created by Generate Cashiering Entries Process (SFDPTREC) to FMS After Failed or Cancelled Process (Doc ID 2893167.1)' as SOLUTION, 'Y' as EVENT
From
(Select distinct A.process_instance
From SYSADM.ps_sf_acctg_ln A
Where A.process_instance > 0
and A.receipt_nbr > 0
and not exists (Select 'X'
From SYSADM.ps_eo_msgbatprm
Where process_instance = A.process_instance)
) having count(*) > 0","To resolve this issue, perform the following steps:

1.     Run the following SQL:
    Select distinct A.process_instance
    From ps_sf_acctg_ln A
    Where A.process_instance > 0
      and A.receipt_nbr > 0
      and not exists (Select 'X'
          From ps_eo_msgbatprm
          Where process_instance = A.process_instance);
2.     Confirm no entry for the process instance exists in PS_EO_MSGBATPRM:
    SELECT * FROM PS_EO_MSGBATPRM WHERE PROCESS_INSTANCE = 'XXX', where 'XXX' is the process instance returned by the above SQL script.

3.    If no row for the failed/cancelled process instance exists in PS_EO_MSGBATPRM, a row for the process instance must be inserted using SQL.
    Run the following SQL statement the following fields:
    PROCESS_INSTANCE
    JOBINSTANCE
    PROCESS_NAME
    PROCESS_STATUS
    BATCH_CLEANUP_FLG
    DATETIME_STAMP
  SQL script is:
    insert into PS_EO_MSGBATPRM
    values
    ('xxx', - where xxx is the process instance returned by the SQL in Step 1
    '0',
    'SFDPTREC',
    'N',
    'C',
    'datetime in the format appropriate for your database platform');
     NOTE: Any date/time can be used. To maintain as clean of an audit trail as possible, a datetime of the original Generate Cashiering Entries is recommended.
4.    When the row is inserted into PS_EO_MSGBATPRM, and the insert has been committed, run the Batch Publish process.",,Process SDPTREC errors causing accounting entries to not publish to Financials,"When the Generate Cashiering Entries process (SDPTREC) does not finish normally, the row for the process instance is not inserted into PS_EO_MSGBATPRM.",2,PeopleSoft Enterprise CS Student Financials,CASHPST,SFCASHR,MONTH,1,Accounting lines are not published to Financials due to a previous process error,,PeopleSoft Campus Solutions,CS Student Financials Area
PSFT_CS_SF_CREDITHISTORY_ACCTTERM,656449.1,"Select count(*) || ' Account Term Found In PS_ITEM_LINE_SF Not Matching With The Account Term in PS_ITEM_SF' as KEY_DATA, 
'Review KM Doc ID 656449.1 To Identify the Issue and To Resolve It' As Solution,
'Y' as EVENT
From 
(Select A.EMPLID, A.BUSINESS_UNIT, A.ITEM_NBR, A.ACCOUNT_TERM AS ""ITEM_LINE_SF.ACCOUNT_TERM"", B.ACCOUNT_TERM AS ""ITEM_SF.ACCOUNT_TERM"" 
From SYSADM.PS_ITEM_LINE_SF A, SYSADM.PS_ITEM_SF B 
Where A.COMMON_ID = B.COMMON_ID
 and A.BUSINESS_UNIT = B.BUSINESS_UNIT
 and A.ITEM_NBR = B.ITEM_NBR
 AND A.ACCOUNT_TERM <> B.ACCOUNT_TERM) 
HAVING COUNT(*) > 0","We can fix this with sql.

1   Update ps_item_line_sf set account_term = '' where sf business_unit = 'XXXXX and emplid = 'XXXXXXXXX' and item_nbr = 'XX' and line_seq_nbr = 'X'
it should update just one row setting the account term to blank to match the account term in ITEM_Sf for item number 21.

2  Run table validation
Student financials > charges and payments  > validate tables ......for just this one student
Check on EVERY BOX including the initial run and UPDATE and it will correct the account sf balances for the ADH001 account totals

       then I need you to run the following sql statements
3   Select B.ACCOUNT_TERM , A.*
From PS_ITEM_LINE_SF A, PS_ITEM_SF B
Where A.COMMON_ID = B.COMMON_ID and A.BUSINESS_UNIT = B.BUSINESS_UNIT
and A.ITEM_NBR = B.ITEM_NBR AND A.ACCOUNT_TERM <> B.ACCOUNT_TERM



This will check to see if you have this issue with any other students.
The sel will (hopefully) not return any rows but if that account per term flag was changed, you will likely have other students with similar issues.
If the SQL does find problems those problems will need to be corrected via SQL as well.

4   Also run this:
SELECT  a.emplid,
         a.account_term as 'item_sf.account_term',
         b.account_term as 'item_line.account_term,
         a.account_nbr as 'item-sf.acct#',
         b.account_nbr as 'item_line.acct#' ,
         a.item_type,
         a.item_nbr,
         a.item_amt,
         b.line_amt,
         b.line_seq_nbr
FROM PS_Item_sf A,
           PS_item_line_sf B
WHERE a.business_unit = b.business_unit and
            a.common_id = b.common_id and
            a.sa_id_type = b.sa_id_type and
            a.item_nbr = b.item_nbr and
            a.account_nbr <> b.account_nbr
ORDER by a.emplid

This should not return any errors/",,Student on Credit History because the ACCOUNT TERM value is unequal on ITEM SF tables,A student has corrupted data on ITEM_SF and ITEM_LINE_SF where the Account number of a specific item_nbr is not the same.,3,PeopleSoft Enterprise CS Student Financials,CHCOLLF,CREDTHIST,WEEK,SAT,Student will appear on credit history report but account balance is paid.,,PeopleSoft Campus Solutions,CS Student Financials Area
PSFT_CS_SF_CREDITHISTORY_ACCTNBR, 656449.1,"Select count(*) || ' Account Found In PS_ITEM_LINE_SF Not Matching With The Account in PS_ITEM_SF' as KEY_DATA, 
'Review KM Doc ID 656449.1 To Identify the Issue and To Resolve It' As Solution, 
'Y' as EVENT FROM ( 
SELECT a.emplid
     , a.account_term as ""item_sf.account_term""
     , b.account_term as ""item_line.account_term""
     , a.account_nbr as ""item_sf.acct""
     , b.account_nbr as ""item_line.acct""
     , a.item_type
     , a.item_nbr
     , a.item_amt
     , b.line_amt
     , b.line_seq_nbr 
FROM SYSADM.PS_Item_sf A
   , SYSADM.PS_item_line_sf B 
WHERE a.business_unit = b.business_unit 
  and a.common_id = b.common_id 
  and a.sa_id_type = b.sa_id_type 
  and a.item_nbr = b.item_nbr 
  and a.account_nbr <> b.account_nbr 
) HAVING COUNT(*) > 0","1  To correct this you must use sql to update item line sf
Update ps_item_line_sf set account_nbr = 'TUT001', Account_term = '2161'  where emplid = '0002206720' and item_nbr = '6'
2     run the sql below to ensure there are no other problem /bad data rows
2a  Select B.ACCOUNT_TERM , A.*
From PS_ITEM_LINE_SF A, PS_ITEM_SF B
Where A.COMMON_ID = B.COMMON_ID and A.BUSINESS_UNIT = B.BUSINESS_UNIT
and A.ITEM_NBR = B.ITEM_NBR AND A.ACCOUNT_TERM <> B.ACCOUNT_TERM

2b  SELECT  a.emplid,
         a.account_term as 'item_sf.account_term',
         b.account_term as 'item_line.account_term,
         a.account_nbr as 'item-sf.acct#',
         b.account_nbr as 'item_line.acct#' ,
         a.item_type,
         a.item_nbr,
         a.item_amt,
         b.line_amt,
         b.line_seq_nbr
FROM PS_Item_sf A,
           PS_item_line_sf B
WHERE a.business_unit = b.business_unit and
            a.common_id = b.common_id and
            a.sa_id_type = b.sa_id_type and
            a.item_nbr = b.item_nbr and
            a.account_nbr <> b.account_nbr
ORDER by a.emplid


3  Once you've updated item line sf you have to run the table validation again in update mode to correct account_sf  and item due sf.
4  And then for good measure I'd run the payment reapplier.",,Credit History process showing strange inconsistencies,"The Cre History process shows strange inconsistencies from accounts concerning 8/8/2016 transactions surrounding the 
removal of late payment fees. It app",3,PeopleSoft Enterprise CS Student Financials,CHCOLLF,CREDTHIST,WEEK,SAT,student appears on the credit history report due to a discrepancy of ACCT_NBR between ITEM_SF and ITEM_LINE_SF,,PeopleSoft Campus Solutions,CS Student Financials Area
PSFT_CS_SF_TUITION_CALC_CPLMISSING,2893424.1,"Select 'Review ' || count(*) ||' Potential Payment(s) Not Applied Correctly' as key_data, 'KM Doc ID 2893424.1' as solution, 'Y' as event
From (
select to_char(P.posted_date, 'MM/DD/YYYY'), P.* 
from SYSADM.ps_item_type_tbl T
   , SYSADM.ps_payment_tbl P
   , SYSADM.ps_set_cntrl_rec A
   , SYSADM.ps_bus_unit_tbl_sf B
where A.setcntrlvalue = B.institution    
  and A.recname = 'ITEM_TYPE_TBL'    
  and T.setid = A.setid 
  and T.item_type_cd IN ('P','F','W','D')   
  and T.charge_priority = ' '
  and P.item_type = T.item_type
  and P.payment_method <> 'TPC'
  and B.business_unit = P.business_unit
  and T.effdt = (Select max(effdt)
    From SYSADM.ps_item_type_tbl T1
    Where T1.setID = T.setid
      and T1.item_type = T.item_type
      and T1.effdt <= P.posted_date)
  and T.eff_status = 'A'
  and P.charge_priority = ' ')
  having count(*) > 0","To correct the student account please do the following:

You must update the Item Type 700000000032 with a Charge Priority List and a Payment Overall Priority value. When the Item type has been updated you will need to run the Apply Payments process.

1. Navigation: Student Financials > Charges and Payments > Reversals > Reverse Payment
2. Search on the Business Unit
3. Enter the student emplid and Search
4. Find the problem Payments and click the Reverse button
5. Navigation: Setup SACR > Product Related > Student Financials > Item types > Item types
6. Query Item Type = 700000000032
7. On the Miscellaneous tab complete the needed setup.
8. Navigation: Student Financials > Charges and Payments > Post Student Transaction
9. Re-Post the student Payments
10. Check the student account to confirm the Payments were applied",,Dropping a course and enrolling again for same course fees aren't assessed,Enrolled and paid for a course then Dropped the Course. Enrolled and paid again for the same Course and no charges are assessed.,2,PeopleSoft Enterprise CS Student Financials,FEECALC,TUITCLC,MONTH,LAST,Tuition Calculation is not assessing charges when a student drops a course and immediately adds a course.,,PeopleSoft Campus Solutions,CS Student Financials Area
PSFT_CS_SF_GL_GENERATE_ENTRIES_SFPGLINT,981134.1,"Select 'Review ' || count(*) || ' Failed GL Interface Process Instance(s) Corresponding EO_MSGBATPRM Entry Does Not Exist' as key_data, 
'See KM Doc 981134.1 For Solution' as solution,
'Y' as EVENT
From
(Select distinct A.process_instance
From SYSADM.ps_sf_acctg_ln A
Where A.process_instance > 0
and A.receipt_nbr = 0
and not exists (Select 'X'
From SYSADM.ps_eo_msgbatprm
Where process_instance = A.process_instance)
) having count(*) > 0",,,How to Publish a specific Student Financial Accounting Entry Journal to FMS,CS SF Generating Accounting Entries was run twice.  The Manual Batch process only publishes the Journal from the first run of the Acct Entries to FMS.,2,PeopleSoft Enterprise CS Student Financials,SFGLINT,SFGLINT,MONTH,1,GL Entries can not be created because of the previous failure of the process.,,PeopleSoft Campus Solutions,CS Student Financials Area
PSFT_CS_SR_STUD_PROGPLAN_PAGE,2890505.1,"Select 'Review ' || count(*) ||' Potential Out of Range Issue(s) With Plan Sequence Number Within ACAD_DEGR_PLAN Table' as key_data, 'KM Doc ID 2890505.1' as solution, 'Y' as event From (
Select A.emplid, A.acad_plan, D.plan_sequence As Incorrect_Value, A.plan_sequence As Correct_Value
from SYSADM.ps_acad_plan A
, SYSADM.ps_acad_degr_plan D
Where A.emplid = D.emplid
And A.acad_career = D.acad_career
And A.acad_plan = D.acad_plan
And A.stdnt_car_nbr = D.stdnt_car_nbr
And A.stdnt_degr = D.stdnt_degr
And A.plan_sequence <> D.plan_sequence
And A.effdt = (Select max(effdt)
From SYSADM.ps_acad_plan
Where emplid = A.emplid
And acad_career = A.acad_career
And stdnt_car_nbr = a.stdnt_car_nbr
And effdt <= SYSDATE)
And D.plan_sequence > 99)
having count(*) > 0","To resolve the issue please do the following:

1. Confirm you get the error when attempting to open the Student Degree for the student
2. If you get the error you will update the table with SQL:

Update PS_ACAD_DEGR_PLAN
Set plan_sequence = 20
Where emplid = 2155067
and acad_plan = 'BA_IB-CT

3. Try to open the Student Degree page
4. If the page opens go back to your SQL window and commit the change",,Error Trying to Access Student Program Plan Component,"We are unable to pull prog/plan for a student. A popup saying, ""A SQL error occurred. Please consult your system log for details"" appears after hitting the",2,PeopleSoft Enterprise CS Student Records,SRSTUINF,STDPRGPLN,MONTH,"1,LAST",Error trying to access student program plan component.,,PeopleSoft Campus Solutions,CS Student Records Area
PSFT_CS_CLASS_ENROLLMENT_TOTAL,609953.1,"Select  'Y' as EVENT
, 'To troubleshoot this issue further, please refer to Doc ID 609953.1. Standalone SQR program can be found in the bug attachment' as SOLUTION
, count(*) || ' Classes with total enrollment in schedule not equal to total enrolled students in class roster' as KEY_DATA
from (
SELECT 'Class ' || Q.class_nbr || ' in term ' || Q.strm || ' has a total enrollment in schedule of classes that is not equal to the total enrolled students in class roster (See KM 609953.1)' KEY_DATA
From
(Select C.institution, C.strm, C.class_nbr, C.session_code, C.enrl_tot, SE.tot_stdnt_enrl
From SYSADM.ps_class_tbl C,
SYSADM.ps_term_tbl T,
(Select institution, strm, class_nbr, session_code, count(*) tot_stdnt_enrl
from SYSADM.ps_stdnt_enrl
where stdnt_enrl_status = 'E'
group by institution, strm, class_nbr, session_code) SE
where T.term_end_dt > sysdate
and C.institution = T.institution
and C.acad_career = T.acad_career
and C.strm = T.strm
and C.enrl_stat = 'C'
and C.enrl_cap > 0
and SE.institution = C.institution
and SE.strm = C.strm
and SE.class_nbr = C.class_nbr
and SE.session_code = C.session_code
and SE.tot_stdnt_enrl <> C.enrl_tot) Q
) having count(*) >= 1","A new run control page has been added at Curriculum Management > Schedule of Classes > Synchronize Enrollment Totals .   This new run control was delivered in CS 9.2 PUM 23 (October, 2021)

The new SRENRTTL.sqr can be run in report only mode, or report and update mode.

Please Note:  If you are not current with PUM 23 , you can still run the enltotl.sqr attached to the solution found in Enrollment Total does not Equal the Number of Students on the Class Roster or in STDNT_ENRL (Doc ID 609953.1).  The SQR is  designed to be executed standalone using SQRW and expects dynamic input from the user during execution. 

For information on how to run SQR's please refer: Document 1480379.2 - Using PeopleTools SQR. To run the process using online PIA pages like System Process Request or a standalone Run Control page, the process should be modified to accept inputs from the Process Definition or the Run Control Page.",,Class roster enrollment control mismatch,,2,PeopleSoft Enterprise CS Student Records,SRENRLL,,DAY,1,Class roster and enrollment control do not match for student counts,,PeopleSoft Campus Solutions,CS Student Records Area
PSFT_CS_SR_HESA_REPORTING_ERROR,2901196.1,"Select 'REVIEW' ||count(*)||'HESA Program Codes With Duplicate Start And End Dates' as KEY_DATA, 
'HESA Reporting Create Extract Data Process Error Output File(Doc ID 2901196.1)' as SOLUTION,
'Y' as EVENT
From
(SELECT A.SSR_HE_PRD_CODE, A.DESCR, A.SSR_HE_REC_YEAR, TO_CHAR(A.SSR_HE_START_DT,'YYYY-MM-DD'), TO_CHAR(A.SSR_HE_END_DT,'YYYY-MM-DD'), A.SSR_HE_ACTIVE, A.SSR_HE_SOURCE
FROM SYSADM.PS_SSR_HE_REP_PRDS A
WHERE ( EXISTS (SELECT 'X'
FROM SYSADM.PS_SSR_HE_REP_PRDS B
WHERE A.SSR_HE_PRD_CODE <> B.SSR_HE_PRD_CODE
AND to_char(A.SSR_HE_START_DT, 'YYYY-MM-DD') = to_char(B.SSR_HE_START_DT, 'YYYY-MM-DD')
AND to_char(A.SSR_HE_END_DT, 'YYYY-MM-DD') = to_char(B.SSR_HE_END_DT, 'YYYY-MM-DD'))))
having count(*) > 0","The issue will be resolved with the following steps:
1) Navigate to Records and Enrollment > HESA Reporting > HESA Returns Setup > Reporting Periods
2) Click search to bring up all entries.
3) Identify the entries with the same start and end dates.
4) Choose which of the entries should be used with the process. Click into the other one(s), and modify the start and end dates to be different from the reporting period being used to run the process. For example, if the entries being changed were just used for testing, or are otherwise no longer valid, the dates can be backdated to (for example) 1900. The process does not look at the setting of the active checkbox when selecting the reporting period, but the box can be checked off to more easily identify periods not being currently used.
5) Re-test running the process",,PUM Image 26 Create Extract process,PUM Image 26 patch - The create extract process (process name -SSR_HE_DATA. Menu path - Records and enrollment > HESA Reporting > Extract Processing > Crea,3,PeopleSoft Enterprise CS Student Records,INTLFTR,UKHESA,WEEK,SAT,users will not be able to complete the requirements for HESA reporting due to the error.,,PeopleSoft Campus Solutions,CS Student Records Area
PSFT_CS_SR_ERROR_ENROLL_DIVIDEBYZERO,2527434.1,"Select 'Found Missing Max GPA for Chart Display In ' || Count(*) || ' Institution(s)' as KEY_DATA, 
'Doc ID 2527434.1 For Solution' As Solution,
'Y' AS EVENT 
From 
(Select I.INSTITUTION 
from SYSADM.PS_SAA_ARSLT_RQVW V, SYSADM.PS_SAA_ADB_REPORT R, SYSADM.PS_INSTITUTION_TBL I 
Where V.EMPLID = R.EMPLID 
AND V.ANALYSIS_DB_SEQ = R.ANALYSIS_DB_SEQ
AND V.SAA_CAREER_RPT = R.SAA_CAREER_RPT
AND ((V.ITEM_R_STATUS <> 'COMP' And V.GPA_REQUIRED > 0) OR (V.ITEM_R_STATUS = 'COMP' 
And V.SAA_DISPLAY_GPA = 'Y')) 
AND I.INSTITUTION = R.INSTITUTION 
AND I.SAA_MAX_GPA_FL = 0 
AND I.EFFDT = (Select Max(EFFDT) FROM SYSADM.PS_INSTITUTION_TBL WHERE INSTITUTION = I.INSTITUTION)) 
HAVING COUNT(*) > 0","Naviage:  Setup SACR > Foundation Tables > Academic Structure > Academic Institution Table > Academic Institution 7 tab.
Once on the page, populate the  Max GPA for Chart Display with your institution's max gpa.  
Most likely the highest mark gpa found on Set Up SACR > Foundation Tables > Academic Structure > Grading Scheme Table > Grading Scheme Table",,Manage classes Enroll by my requirement Fluid error,"Students facing the following error when they try to click on the ""Enroll by my requirement"" link, please advise.",2,PeopleSoft Enterprise CS Student Records,SRENRLL,ENRLMT,WEEK,SAT,users cannot enroll to their requirements.,,PeopleSoft Campus Solutions,CS Student Records Area
PSFT_AM_TRANSACTIONS_STUCK3,656760.1,"select 'Y' as EVENT
, 'Proposed solution: AM: AM_DEPR_CALC leaves CALC_DEPR_STATUS as ""I"" ( ""In Process"") (Doc ID 656760.1)' as SOLUTION
, count(*) || ' Display Assets and books where depreciation is In Processing for more than a day' as KEY_DATA
from (
select distinct
('Display Assets and books where depreciation is In Processing for more than a day ' || 'Business Unit =' || a.BUSINESS_UNIT || 'Calc Dept Status =' || a.CALC_DEPR_STATUS || 'Date Time Stamp =' || a.DTTM_STAMP) as KEY_DATA
from SYSADM.ps_open_trans a
where calc_depr_status = 'I'
AND dttm_stamp < SYSDATE - 1
) having count(*) >= 1","Please refer KM document EAM: AM_DEPR_CALC leaves CALC_DEPR_STATUS as ""I"" ( ""In Process"") (Doc ID 656760.1)
Solution:
SQL update  LAST_BK_DTTM_STAMP value in the PS_BOOK table to match the DTTM_STAMP value of the original ADD row on the PS_COST table. After updating the LAST_BK_DTTM_STAMP values via SQL and resetting the transactions in PS_OPEN_TRANS (as mentioned in DOCUMENT ID. 650116.1), the transactions in PS_OPEN_TRANS will get processed successfully. In other words, the AMDPCALC SQR program will kick off by the AM_DEPR_CALC Application Engine, the PS_DEPRECIATION table will be populated, and the transactions will get marked as completed (CALC_DEPR_STATUS set to ""C"" in PS_OPEN_TRANS).",AM,Missing depreciation amount ,,2,PeopleSoft Enterprise FIN Asset Management,DEPRE,,DAY,1,Missing depreciation amount as an error in process,Accounting to Financial Reports: Reconciliation,PeopleSoft Financial Management,PeopleSoft Asset Management
PSFT_FIN_PA_CA_BI_INTFC,665012.1,"select 'Y' as EVENT
, count(*) || ' Incurred Bill rows or Bill Plans stuck in process and need your attention' as KEY_DATA
,'Please review the following documents: How to Reset As-incurred Project Transactions To Send To Billing From Contracts (Doc ID 665012.1) and ECA-How To Reset A Contract Bill Plan If The PS_INTFC_BI Has An Error? (Doc ID 616495.1)' AS SOLUTION
from (
SELECT 'Total number of As Incurred Bill rows stuck in process and need your attention: ' || COUNT(*) AS KEY_DATA
FROM SYSADM.PS_PROJ_RESOURCE A
WHERE A.BI_DISTRIB_STATUS ='S'
AND ( (A.PROCESS_INSTANCE IN (SELECT B.PROCESS_INSTANCE FROM SYSADM.PS_PROJ_RESOURCE B, SYSADM.PSPRCSRQST C
WHERE B.PROCESS_INSTANCE = C.PRCSINSTANCE AND C.RUNSTATUS NOT IN (7) AND C.PRCSNAME <> 'CA_BI_INTFC' ))
OR (A.PROCESS_INSTANCE NOT IN (SELECT D.PROCESS_INSTANCE FROM SYSADM.PS_PROJ_RESOURCE D, SYSADM.PSPRCSRQST E
WHERE D.PROCESS_INSTANCE = E.PRCSINSTANCE)))
UNION
SELECT 'Total number of Bill Plans (As-incurred, Recurring or Other) in process and need your attention: ' || COUNT(*) AS KEY_DATA
FROM SYSADM.PS_CA_BILL_PLAN A
WHERE A.PROCESS_INSTANCE <> 0
AND ( (A.PROCESS_INSTANCE IN (SELECT B.PROCESS_INSTANCE FROM SYSADM.PS_CA_BILL_PLAN B, SYSADM.PSPRCSRQST C
WHERE B.PROCESS_INSTANCE = C.PRCSINSTANCE AND C.RUNSTATUS NOT IN (7) AND C.PRCSNAME <> 'CA_BI_INTFC' ))
OR (A.PROCESS_INSTANCE NOT IN (SELECT D.PROCESS_INSTANCE FROM SYSADM.PS_CA_BILL_PLAN D, SYSADM.PSPRCSRQST E
WHERE D.PROCESS_INSTANCE = E.PRCSINSTANCE)))
) having count(*) >= 1",Please refer KM doc How to Reset As-incurred Project Transactions To Send To Billing From Contracts (Doc ID 665012.1) and follow the solution section.,CA,Bill rows stuck,,2,PeopleSoft Enterprise FIN Contracts,BILLIN,,DAY,1,Bill rows are stuck and need attention as they carry financial information,P2P: Encumbrance,PeopleSoft Financial Management,PeopleSoft Project Accounting
PSFT_FIN_PA_PSA_ACCTGGL,620558.1,"select 'Y' as EVENT
, sum(numRows) || ' Incorrect Revenue Rows or Revenue Plans stuck in processing that need your attention' as KEY_DATA
,'Troubleshooting PSA_ACCTGGL When Not Generating Entries into CA_ACCTG_LN_PC for Transactions in PROJ_RESOURCE (Doc ID 620558.1)' AS SOLUTION
from (
SELECT 'Total number of As Incurrect Revenue Rows stuck in process and need your attention: ' || COUNT(*) AS KEY_DATA, Count(*) as numRows
FROM SYSADM.PS_PROJ_RESOURCE A
WHERE A.GL_DISTRIB_STATUS ='S'
AND ( (A.PROCESS_INSTANCE IN (SELECT B.PROCESS_INSTANCE FROM SYSADM.PS_PROJ_RESOURCE B, SYSADM.PSPRCSRQST C
WHERE B.PROCESS_INSTANCE = C.PRCSINSTANCE AND C.RUNSTATUS NOT IN (7) AND C.PRCSNAME <> 'PSA_ACCTGGL' ))
OR (A.PROCESS_INSTANCE NOT IN (SELECT D.PROCESS_INSTANCE FROM SYSADM.PS_PROJ_RESOURCE D, SYSADM.PSPRCSRQST E
WHERE D.PROCESS_INSTANCE = E.PRCSINSTANCE)))
UNION
SELECT 'Total number of Revenue Plans (As-incurred or Fixed Amount) stuck in process and need your attention: ' || COUNT(*) AS KEY_DATA, Count(*) as numRows
FROM SYSADM.PS_CA_ACCTPLAN A
WHERE A.PROCESS_INSTANCE <> 0
AND ( (A.PROCESS_INSTANCE IN (SELECT B.PROCESS_INSTANCE FROM SYSADM.PS_CA_ACCTPLAN B, SYSADM.PSPRCSRQST C
WHERE B.PROCESS_INSTANCE = C.PRCSINSTANCE AND C.RUNSTATUS NOT IN (7) AND C.PRCSNAME <> 'PSA_ACCTGGL' ))
OR (A.PROCESS_INSTANCE NOT IN (SELECT D.PROCESS_INSTANCE FROM SYSADM.PS_CA_ACCTPLAN D, SYSADM.PSPRCSRQST E
WHERE D.PROCESS_INSTANCE = E.PRCSINSTANCE)))
) having count(*) >= 1","Please refer to KM document, Troubleshooting PSA_ACCTGGL When Not Generating Entries into CA_ACCTG_LN_PC for Transactions in PROJ_RESOURCE (Doc ID 620558.1) to identify the possible cause and solution.",CA,Incurrent revenue rows stuck,,2,PeopleSoft Enterprise FIN Contracts,REVENU,,DAY,1,Incurrect Revenue Rows are stuck and need attention as they impact financial,P2P: Encumbrance,PeopleSoft Financial Management,PeopleSoft Project Accounting
PSFT_EXPENSES_OUT_OF_SYNC,2413707.1,"select 'Y' as EVENT
, count(*) || ' Expense header and line statuses out of sync' AS KEY_DATA
, 'Follow instructions in KM Doc ID 2413707.1' AS SOLUTION
from(
SELECT A.OUTOFSYNC
FROM (SELECT(
(SELECT A.EROOS
FROM (SELECT
((SELECT Count(*) FROM SYSADM.PS_EX_SHEET_HDR A WHERE A.SHEET_STATUS IN ('APY','DEN','STG','PD','CLS')
AND A.SHEET_ID IN (SELECT B.SHEET_ID FROM SYSADM.PS_EX_SHEET_LINE B WHERE A.SHEET_ID = B.SHEET_ID AND B.EX_LINE_STATUS IN ('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)
+
(SELECT Count (*) FROM SYSADM.PS_EX_SHEET_HDR A WHERE A.SHEET_STATUS NOT IN ('APY','DEN','STG','PD','CLS')
AND A.SHEET_ID NOT IN (SELECT B.SHEET_ID FROM SYSADM.PS_EX_SHEET_LINE B WHERE A.SHEET_ID = B.SHEET_ID AND EX_LINE_STATUS IN('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR','SFA','SUB'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)) EROOS FROM SYSADM.PS_INSTALLATION) A
WHERE A.EROOS > 0)
||
(SELECT A.TAOOS
FROM (SELECT
((SELECT Count (*) FROM SYSADM.PS_EX_TAUTH_HDR A WHERE TRAVEL_AUTH_STATUS IN ('APR','DEN','DNA','DNU','CLS')
AND A.TRAVEL_AUTH_ID IN (SELECT B.TRAVEL_AUTH_ID FROM SYSADM.PS_EX_TAUTH_LINE B WHERE A.TRAVEL_AUTH_ID = B.TRAVEL_AUTH_ID AND EX_LINE_STATUS IN ('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)
+
(SELECT Count (*) FROM SYSADM.PS_EX_TAUTH_HDR A WHERE TRAVEL_AUTH_STATUS NOT IN ('APR','DEN','DNA','DNU','CLS')
AND TRAVEL_AUTH_ID NOT IN (SELECT B.TRAVEL_AUTH_ID FROM SYSADM.PS_EX_TAUTH_LINE B WHERE A.TRAVEL_AUTH_ID = B.TRAVEL_AUTH_ID AND EX_LINE_STATUS IN ('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR','SFA','SUB'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)) TAOOS FROM SYSADM.PS_INSTALLATION) A
WHERE A.TAOOS > 0)
||
(SELECT A.CAOOS
FROM (SELECT
((SELECT Count (*) FROM SYSADM.PS_EX_ADV_HDR A WHERE A.ADV_STATUS IN ('APY','DEN','DNA','DNU','STG','PD','CLS')
AND A.ADVANCE_ID IN (SELECT B.ADVANCE_ID FROM SYSADM.PS_EX_ADV_LINE B WHERE A.ADVANCE_ID = B.ADVANCE_ID AND EX_LINE_STATUS IN ('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)
+
(SELECT Count (*) FROM SYSADM.PS_EX_ADV_HDR A WHERE A.ADV_STATUS NOT IN ('APY','DEN','DNA','DNU','STG','PD','CLS')
AND A.ADVANCE_ID NOT IN (SELECT B.ADVANCE_ID FROM SYSADM.PS_EX_ADV_LINE B WHERE A.ADVANCE_ID = B.ADVANCE_ID AND EX_LINE_STATUS IN('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR','SFA','SUB'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)) CAOOS FROM SYSADM.PS_INSTALLATION) A
WHERE A.CAOOS > 0)
||
(SELECT A.TROOS
FROM (SELECT
((SELECT Count (*) FROM SYSADM.PS_EX_TIME_HDR A WHERE A.TIME_SHEET_STATUS IN ('APR','DEN','DNA','DNU')
AND A.TIME_SHEET_ID IN (SELECT B.TIME_SHEET_ID FROM SYSADM.PS_EX_TIME_DTL B WHERE A.TIME_SHEET_ID = B.TIME_SHEET_ID AND EX_LINE_STATUS IN ('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)
+
(SELECT Count (*) FROM SYSADM.PS_EX_TIME_HDR A WHERE A.TIME_SHEET_STATUS NOT IN ('APR','DEN','DNA','DNU')
AND A.TIME_SHEET_ID NOT IN (SELECT B.TIME_SHEET_ID FROM SYSADM.PS_EX_TIME_DTL B WHERE A.TIME_SHEET_ID = B.TIME_SHEET_ID AND EX_LINE_STATUS IN('HDA','HDU','HLD','MFS','OPN','PND','PRO','XML','PAR','SFA','SUB'))
AND (EXTRACT(HOUR FROM (SYSDATE-A.LASTUPDDTTM))*60 + EXTRACT(MINUTE FROM (SYSDATE-A.LASTUPDDTTM))) > 15
AND A.LASTUPDDTTM > SYSDATE - 1)) TROOS FROM SYSADM.PS_INSTALLATION) A
WHERE A.TROOS > 0)) OUTOFSYNC From SYSADM.PS_INSTALLATION) A
WHERE A.OUTOFSYNC IS NOT NULL
) having count(*) >= 1","Identify if the data is stuck in the process or it is out of sync using the KM document 2413707.1. Once the problem is identified, follow the solution in KM.",EX,Unmatched financial details in header and line,,2,PeopleSoft Enterprise FIN Expenses,EXPENSR,,DAY,1,Unmatched financial details on header and line,,PeopleSoft Financial Management,PeopleSoft Expenses/Resource Management/Staffing
PSFT_GL_DOC_SEQ_RANGE,2693002.1,"select 'Y' as EVENT
, 'Document sequencing is enabled, but Document Sequence range is not mapped for ' || count(*) || ' document types' as KEY_DATA
, 'Please Follow instructions in KM Doc ID 2693002.1' as SOLUTION
from (
SELECT 'Document sequencing is enabled, but Document Sequence range is not mapped for document type: '|| DOC_TYPE KEY_DATA
FROM SYSADM.PS_DOC_TYPE_TBL WHERE SEQ_RANGE_ID = ' ' AND JRNL_CODE NOT
IN (SELECT DISTINCT JRNL_CODE FROM SYSADM.PS_JRNL_CODE_TBL WHERE SEQ_RANGE_ID <> ' ')
AND EXISTS (SELECT 'Y' FROM SYSADM.PS_INSTALLATION_FS I WHERE I.DOC_SEQ='Y' )
UNION
SELECT 'Document sequencing is enabled and Document Sequence range '||Z.SEQ_RANGE_ID||' is mapped to one or more document type(s),
but corresponding sequence range is defined till '||TO_CHAR(Z.MAX_ED,'DD-Mon-YYYY')||' Which does not fully cover current year' KEY_DATA
FROM (SELECT SEQ_RANGE_ID,MAX(END_DT) MAX_ED FROM SYSADM.PS_SEQ_RANGE_DETL WHERE SEQ_RANGE_ID IN(
SELECT DISTINCT SEQ_RANGE_ID FROM SYSADM.PS_DOC_TYPE_TBL WHERE SEQ_RANGE_ID <> ' ' ) GROUP BY SEQ_RANGE_ID) Z
WHERE Z.MAX_ED < ('31-Dec-'||(SELECT (TO_CHAR(SYSDATE,'YYYY')) FROM DUAL))
AND EXISTS (SELECT 'Y' FROM SYSADM.PS_INSTALLATION_FS I WHERE I.DOC_SEQ='Y' )
UNION
SELECT 'Document sequencing is enabled and Document Sequence range '||Z.SEQ_RANGE_ID||' is mapped to one or more Journal Code(s),
but corresponding sequence range is defined till '||TO_CHAR(Z.MAX_ED,'DD-Mon-YYYY')||' Which does not fully cover current year' KEY_DATA
FROM (SELECT SEQ_RANGE_ID,MAX(END_DT) MAX_ED FROM SYSADM.PS_SEQ_RANGE_DETL WHERE SEQ_RANGE_ID IN(
SELECT DISTINCT SEQ_RANGE_ID FROM SYSADM.PS_JRNL_CODE_TBL WHERE SEQ_RANGE_ID <> ' ') GROUP BY SEQ_RANGE_ID) Z
WHERE Z.MAX_ED < ('31-Dec-'||(SELECT (TO_CHAR(SYSDATE,'YYYY')) FROM DUAL))
AND EXISTS (SELECT 'Y' FROM SYSADM.PS_INSTALLATION_FS I WHERE I.DOC_SEQ='Y' )
) having count(*) >= 1",Please refer KM document EGL9.2: [Functional Diagnostics] What Needs to be Checked Periodically if Document Sequencing is Enabled in Installation Options (Doc ID 2693002.1) to make sure setup is correct as mentioned in the KM document.,GL,Document sequence range unmapped or incomplete,,2,PeopleSoft Enterprise FIN General Ledger,FUNCTIO,,DAY,1,Online transactions will not be saved and system generated transactions will not be posted for business units those have document sequence enabled but appropriate set up not done to cover business days as per accounting period.,,PeopleSoft Financial Management,PeopleSoft General Ledger
PSFT_GL_INDEX_CHECK,2393911.1,"SELECT distinct 'Y' EVENT, 'Chartfield Activate/Inactivate was completed by running CF configuration, but indexes are not re-built for records listed in FS_CF_CREATE_INDEX project' KEY_DATA, 'Please Follow instructions in KM Doc ID 2393911.1 to find the missing indexes' ACTION, 'Please build the missing indexes' SOLUTION
FROM SYSADM.PS_INSTALLATION INST WHERE
(SELECT MAX(DTTIME_LAST_MAINT) FROM SYSADM.PS_FS_CF_ACT_LOG LOG WHERE LOG.CF_TMPLT_ACTION ='I' AND LOG.CF_STATUS='C') >
(SELECT MIN(LAST_DDL_TIME) FROM USER_OBJECTS OBJ, USER_INDEXES IND
WHERE OBJ.OBJECT_NAME = IND.INDEX_NAME
AND OBJ.OBJECT_TYPE='INDEX'
AND IND.TABLE_NAME IN
(SELECT 'PS_'||OBJECTVALUE1 FROM SYSADM.PSPROJECTITEM PROJ WHERE PROJ.PROJECTNAME='FS_CF_CREATE_INDEX')
AND IND.UNIQUENESS='UNIQUE')",Please refer EGL9.2: [Functional Diagnostics] How To Identify If Indexes Have Been Rebuilt After Chartfield Configuration Was Run To Activate/Inactivate Any Chartfield ? (Doc ID 2393911.1) to identify the indexes that need to be rebuilt. Rebuild the record and indexes for identified data.,GL,Indexes not rebuilt after chartfield config process,,2,PeopleSoft Enterprise FIN General Ledger,CHARTFS,,MONTH,1,"Metric will : 
Proactively check if after last Chartfield Configuration process ,  indexes are re-created successfully
Prevent any delay in  GL processing and Book closures.
Prevent potential performance issues due to missing indexes",,PeopleSoft Financial Management,PeopleSoft General Ledger
PSFT_GL_CORRUPTED_DATA_CHECK,2393860.1,"select 'Y' as EVENT
, count(*) || ' Corrupted data rows(Currency code and Base currency same but corresponding Transaction amount and Base amounts differ) exist in Ledger record' as KEY_DATA
, 'Please Follow instructions in KM Doc ID 2393860.1' as SOLUTION
from (
SELECT distinct  'Corrupted data rows(Currency code and Base currency same but corresponding Transaction amount and Base amounts differ) exist in Ledger record for Business Unit '||Z.BUSINESS_UNIT||', Ledger '||Z.LEDGER||', Fiscal year '||Z.FISCAL_YEAR KEY_DATA
FROM (SELECT A.BUSINESS_UNIT, A.LEDGER, A.FISCAL_YEAR FROM SYSADM.PS_LEDGER A WHERE
A.FISCAL_YEAR IN (
(SELECT TO_CHAR(SYSDATE,'YYYY') FROM DUAL),
(SELECT TO_CHAR(SYSDATE,'YYYY')-1 FROM DUAL),
(SELECT TO_CHAR(SYSDATE,'YYYY')+1 FROM DUAL))
AND A.CURRENCY_CD = A.BASE_CURRENCY
AND A.BASE_CURRENCY <> ' '
AND A.POSTED_TRAN_AMT <> A.POSTED_BASE_AMT) Z
UNION
SELECT distinct 'Corrupted data rows with multiple Base currency exist in Ledger record for Business Unit '||Z.BUSINESS_UNIT||', Ledger '||Z.LEDGER KEY_DATA
FROM (SELECT DISTINCT A.BUSINESS_UNIT, A.LEDGER, COUNT(DISTINCT BASE_CURRENCY) FROM SYSADM.PS_LEDGER A WHERE
A.BASE_CURRENCY <> ' ' AND
A.FISCAL_YEAR IN(
(SELECT TO_CHAR(SYSDATE,'YYYY') FROM DUAL),
(SELECT TO_CHAR(SYSDATE,'YYYY')-1 FROM DUAL),
(SELECT TO_CHAR(SYSDATE,'YYYY')+1 FROM DUAL))
GROUP BY A.BUSINESS_UNIT, A.LEDGER
HAVING COUNT(DISTINCT BASE_CURRENCY) > 1) Z
) having count(*) >= 1",Please refer EGL9.2: [Functional Diagnostics] How To Find Corrupt Data Rows In Ledger That Would Create Unbalanced Closing Entries ? (Doc ID 2393860.1) to identify the problem data. If you need further help please create service request with Oracle Support GL team.,GL,Corrupted data rows in ledger,,2,PeopleSoft Enterprise FIN General Ledger,CLOSIN,,MONTH,1,"Metric will : 
Proactively check if Currency code and Base currency same but corresponding Transaction amount and Base amounts differ.
Rows with multiple Base currency exist in Ledger record for the same combination of Business units + Ledger",,PeopleSoft Financial Management,PeopleSoft General Ledger
PSFT_GL_CHART_CONFIG__SYNC_CHECK_FSCM,2393901.1,"SELECT distinct 'Y' EVENT, 'Chartfield configuration was run in FSCM, but Configuration details not successfully published to HCM/SF' KEY_DATA,
'Please Follow instructions in KM Doc ID 2393901.1' ACTION, '2393901.1' SOLUTION
FROM SYSADM.PS_INSTALLATION WHERE
(SELECT NVL(MAX(DTTIME_LAST_MAINT),'01-JAN-1900') FROM SYSADM.PS_FS_CF_ACT_LOG WHERE CF_STATUS='C') >
(SELECT NVL(MAX(PUBLISHTIMESTAMP),'01-JAN-1900') FROM SYSADM.PSAPMSGPUBCON WHERE IB_OPERATIONNAME = 'FSCM_CF_CONFIG' AND PUBCONSTATUS=4)",Please refer KM document EGL9.2: [Functional Diagnostics] How To Identify If Chartfield Configuration Details Is In-SYNC Between FSCM to HCM/SF? (Doc ID 2393901.1) to identify if any data is not in sync between FSCM and HCM.,GL,Chartfield configuration out of sync,,2,PeopleSoft Enterprise FIN General Ledger,CHARTFS,,MONTH,1,"Metric will : 
Proactively check if after last Chartfield Configuration process , Chartfield Configuration Details  is in sync between FSCM and HCM
Prevent inconsistencies in accounting in North America payroll and General Ledger",,PeopleSoft Financial Management,PeopleSoft General Ledger
PSFT_AP_VOUCHERS_STUCK,2363849.1,"SELECT 'Total number of Vouchers stuck in process and need your attention: ' || COUNT(*) AS KEY_DATA,
'EAP: Vouchers Stuck In Process (VOUCHER.IN_PROCESS_FLG =Y) (Doc ID 2363849.1)' AS SOLUTION,
'Y' AS EVENT
FROM SYSADM.PS_VOUCHER A
WHERE A.IN_PROCESS_FLG ='Y'
AND ( (A.PROCESS_INSTANCE IN (SELECT B.PROCESS_INSTANCE FROM SYSADM.PS_VOUCHER B, SYSADM.PSPRCSRQST C
WHERE B.PROCESS_INSTANCE = C.PRCSINSTANCE AND C.RUNSTATUS NOT IN (9,7)))
OR (A.PROCESS_INSTANCE NOT IN (SELECT D.PROCESS_INSTANCE FROM SYSADM.PS_VOUCHER D, SYSADM.PSPRCSRQST E
WHERE D.PROCESS_INSTANCE = E.PRCSINSTANCE)))
HAVING COUNT(*) > 0",Please follow the solution in KM document EAP: Vouchers Stuck In Process (VOUCHER.IN_PROCESS_FLG ='Y) (Doc ID 2363849.1).,AP,Vouchers stuck in processing,Check if Vouchers are stuck in process,2,PeopleSoft Enterprise FIN Payables,VCHRPRCS,VCHRPST,DAY,1,"Metric will : 
Proactively identify Vouchers that are stuck  in process and provide the list if vouchers and its related information 
Solution/ Action plan will be provided based on the Voucher details fetched
This will reduce time spent on finding the reasons why vouchers not getting paid 
Payments are can be done in time to utilize the early payment discounts
Prevent accruing late charges
-    Reduce phone calls/inquiry from Suppliers regarding ETA on Payments.",,PeopleSoft Financial Management,PeopleSoft Payables
PSFT_AP_VOUCHER_INCOMPLETE,2545958.1,"SELECT 'Total number of Vouchers with Incomplete Status and need your attention :  ' || COUNT(*) AS KEY_DATA, 
'EAP: Vouchers With Incomplete Status (Doc ID 2545958.1)' AS SOLUTION, 
COUNT(*) AS COUNT  
FROM SYSADM.PS_VOUCHER A
WHERE A.IN_PROCESS_FLG ='N' 
AND A.ENTRY_STATUS = 'R' 
AND A.VCHR_DRAFT_FLG = 'Y' 
AND A.IN_PROCESS_FLG IN ('N',' ')
","User can refer KM doc EAP: Vouchers With Incomplete Status (Doc ID 2545958.1) for details.
1: To identify incomplete vouchers, the user can either search in the Regular Entry Voucher Search page and take action.

2: When using Accounts Payables Work Center, users can also add ""Incomplete Voucher(s)""  link under My Work.

3: Following SQL gives the list of all incomplete Vouchers in the system along with the User ID who entered the Voucher and the last User Id to update the Voucher. 

SELECT A.BUSINESS_UNIT
 , A.VOUCHER_ID
 , A.VENDOR_SETID
 , A.VENDOR_ID
 , B.VENDOR_NAME_SHORT
 , B.NAME1
 , A.INVOICE_ID
 , A.INVOICE_DT
 , A.GROSS_AMT
 , A.TXN_CURRENCY_CD
 , A.OPRID
 , A.OPRID_LAST_UPDT
 , A.ORIGIN
 , A.VOUCHER_STYLE
 , A.VCHR_SRC
 , A.ENTERED_DT
  FROM PS_VOUCHER A
  , PS_VENDOR B
 WHERE A.VENDOR_SETID = B.SETID
   AND A.VENDOR_ID = B.VENDOR_ID
   AND A.ENTRY_STATUS = 'R'
   AND A.VCHR_DRAFT_FLG = 'Y'",AP,Incomplete Vouchers,,2,PeopleSoft Enterprise FIN Payables,VCHRCR,VCHRENT,WEEK,MON,Proactively identify Vouchers that are incomplete status and need user attention.,,PeopleSoft Financial Management,PeopleSoft Payables
PSFT_AP_VOUCHERS_UNPOSTED,622217.1,"select 'Y' as EVENT
, 'EAP: Payment Post / Voucher Post ABENDED at Step AP_PSTCOMMON.ACCOUNTS.Step05 with a ""duplicate rows in a table with a UNIQUE index"" Error. (Doc ID 622217.1)' as SOLUTION
, count(*) || ' Vouchers with existing Accrual/Closure Accounting Entries, or Vouchers with unposted Payments and existing Payment/Cancel Accounting Entries' as KEY_DATA
from (
SELECT 'Total number of Vouchers with existing Accruals/Closure Accounting Entries: ' || COUNT(*) as KEY_DATA
FROM SYSADM.PS_VOUCHER A
WHERE (A.BUSINESS_UNIT,A.VOUCHER_ID ) IN (SELECT DISTINCT B.BUSINESS_UNIT,B.VOUCHER_ID FROM SYSADM.PS_VOUCHER B, SYSADM.PS_VCHR_ACCTG_LINE C
WHERE A.BUSINESS_UNIT = B.BUSINESS_UNIT
AND A.VOUCHER_ID = B.VOUCHER_ID
AND B.BUSINESS_UNIT = C.BUSINESS_UNIT
AND B.VOUCHER_ID=C.VOUCHER_ID
AND (( B.POST_STATUS_AP = 'U'AND C.POSTING_PROCESS ='ACCR' AND C.UNPOST_SEQ = 0)
OR ( B.POST_STATUS_AP = 'P' AND B.PROCESS_MAN_CLOSE = 'Y' AND C.POSTING_PROCESS = 'CLOS')))
having count(*) >= 20
UNION
SELECT 'Total number of Vouchers with unposted Payments with existing Payment/Cancel Accounting Entries: ' || COUNT(*) as KEY_DATA
FROM SYSADM.PS_PYMNT_VCHR_XREF A
WHERE (A.BUSINESS_UNIT,A.VOUCHER_ID,A.PYMNT_CNT ) IN (SELECT DISTINCT B.BUSINESS_UNIT,B.VOUCHER_ID,B.PYMNT_CNT
FROM SYSADM.PS_PYMNT_VCHR_XREF B, SYSADM.PS_VCHR_ACCTG_LINE C ,SYSADM.PS_PAYMENT_TBL D
WHERE B.BUSINESS_UNIT = A.BUSINESS_UNIT
AND B.VOUCHER_ID = A.VOUCHER_ID
AND B.PYMNT_CNT = A.PYMNT_CNT
AND A.BUSINESS_UNIT = C.BUSINESS_UNIT
AND A.VOUCHER_ID = C.VOUCHER_ID
AND A.PYMNT_CNT = C.PYMNT_CNT
AND B.BUSINESS_UNIT = C.BUSINESS_UNIT
AND B.VOUCHER_ID = C.VOUCHER_ID
AND B.PYMNT_CNT = C.PYMNT_CNT
AND D.BANK_SETID = B.BANK_SETID
AND D.BANK_CD = B.BANK_CD
AND D.BANK_ACCT_KEY = B.BANK_ACCT_KEY
AND D.PYMNT_ID = B.PYMNT_ID
AND ((D.POST_STATUS_AP = 'U' and C.POSTING_PROCESS = 'PYMN')
OR (D.POST_STATUS_AP = 'P' and D.CANCEL_ACTION in ('R','C','H') AND C.POSTING_PROCESS='CANC' AND D.CANCEL_POST_STATUS ='W')))
having count(*) >= 20
)having count(*) >= 1","Please refer KM document EAP: Payment Post / Voucher Post ABENDED at Step AP_PSTCOMMON.ACCOUNTS.Step05 with a ""duplicate rows in a table with a UNIQUE index"" Error (Doc ID 622217.1) for detailed solution.",AP,Unposted Vouchers,,2,PeopleSoft Enterprise FIN Payables,VCHRPRCS,VCHRPST,DAY,1,"Metric will : 
Proactively identify Vouchers/Payments that are posted but the flags didnt get update
Solution/ Action plan will be provided based on the Voucher details fetched
This will prevent further abends  which will need very extensive invasive steps to fix.  Fixing the data before its reprocessed involves less invasive measures",,PeopleSoft Financial Management,PeopleSoft Payables
PSFT_FIN_PA_PRICING_STUCK,2707359.1,"select 'Total number of Transactions in PROJ_RESOURCE stuck with PC_DISTRIB_STATUS in locked status that needs your attention: ' || Count(*) AS KEY_DATA,
'The PC_DISTRIB_STATUS of ""L"" status shows that something went wrong with PC_PRICING engine. Please review trace files for errors and refer to EPC: PC_PRICING Is Not Creating Expected Target Rows for Rate Based Contracts. the Contract ID on the Transactions Is Also Blank. (Doc ID 2707359.1)' AS SOLUTION,
'Y' as EVENT
from SYSADM.PS_PROJ_RESOURCE where PC_DISTRIB_STATUS = 'L'
having count(*) >= 1","Application Engine PC_PRICING has not run successfully. Some of the rows in PROJ_RESOUCE is having PC_DISTRIB_STATUS of ""L"" (locked). Please review the knowledge document:  EPC: PC_PRICING Is Not Creating Expected Target Rows for Rate Based Contracts. the Contract ID on the Transactions Is Also Blank. (Doc ID 2707359.1) to implement workaround/solution.",PC,Pricing transactions stuck,,2,PeopleSoft Enterprise FIN Project Costing,PRICIN,,DAY,1,Stuck transactions need attention as they could impact financials,O2C: Credit to Cash,PeopleSoft Financial Management,PeopleSoft Project Accounting
PSFT_BEN_BENPROG_ORPH_CHK,607150.1,"Select 'Review ' || count(*) || ' Orphaned Row(s) In The Benefit Plan,Option,Cost Tables' AS KEY_DATA, 'Benefits Administration Error: Cost not found for Pgm/Plan/Optn (Doc ID 607150.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT 'Potential Ben Admin Process Issue Caused By Benefit Program Structure Orphaned Data (See KM 607150.1 - Go To Item#12)' AS KEY_DATA
FROM SYSADM.PS_BEN_DEFN_PLAN A WHERE NOT EXISTS (SELECT * FROM SYSADM.PS_BEN_DEFN_PGM B WHERE B.BENEFIT_PROGRAM = A.BENEFIT_PROGRAM AND B.EFFDT = A.EFFDT)
UNION
SELECT 'Potential Ben Admin Process Issue Caused By Benefit Program Structure Orphaned Data (See KM 607150.1 - Go To Item#12)' AS KEY_DATA
FROM SYSADM.PS_BEN_DEFN_OPTN A WHERE NOT EXISTS (SELECT * FROM SYSADM.PS_BEN_DEFN_PLAN B WHERE B.BENEFIT_PROGRAM = A.BENEFIT_PROGRAM AND B.EFFDT = A.EFFDT AND B.PLAN_TYPE = A.PLAN_TYPE)
UNION
SELECT 'Potential Ben Admin Process Issue Caused By Benefit Program Structure Orphaned Data (See KM 607150.1 - Go To Item#12)' AS KEY_DATA
FROM SYSADM.PS_BEN_DEFN_COST A WHERE NOT EXISTS (SELECT * FROM SYSADM.PS_BEN_DEFN_OPTN B WHERE B.BENEFIT_PROGRAM = A.BENEFIT_PROGRAM AND B.EFFDT = A.EFFDT AND B.PLAN_TYPE = A.PLAN_TYPE AND B.OPTION_ID = A.OPTION_ID)
)
having count(*) > 0","Symptoms
-----------
When running Benefits Administration (PSPBARUN), an error is encountered: Cost not found for Program / Plan / Option.

Cause
------
Orphaned records in the Benefit Program configuration tables.

Solution
--------
Using SQL query tool run SQLs below to identify orphan rows from the following tables with parent/child relationships:

PS_BEN_DEFN_PLAN
PS_BEN_DEFN_OPTN
PS_BEN_DEFN_COST

1.SELECT A.BENEFIT_PROGRAM, A.EFFDT, A.PLAN_TYPE
FROM PS_BEN_DEFN_PLAN A
WHERE NOT EXISTS (SELECT *
FROM PS_BEN_DEFN_PGM B
WHERE B.BENEFIT_PROGRAM = A.BENEFIT_PROGRAM
AND B.EFFDT = A.EFFDT)

2.SELECT A.BENEFIT_PROGRAM, A.EFFDT, A.PLAN_TYPE, A.OPTION_ID
FROM PS_BEN_DEFN_OPTN A
WHERE NOT EXISTS (SELECT *
FROM PS_BEN_DEFN_PLAN B
WHERE B.BENEFIT_PROGRAM = A.BENEFIT_PROGRAM
AND B.EFFDT = A.EFFDT
AND B.PLAN_TYPE = A.PLAN_TYPE)

3.SELECT A.BENEFIT_PROGRAM, A.EFFDT, A.PLAN_TYPE, A.OPTION_ID, A.COST_ID
FROM PS_BEN_DEFN_COST A
WHERE NOT EXISTS (SELECT *
FROM PS_BEN_DEFN_OPTN B
WHERE B.BENEFIT_PROGRAM = A.BENEFIT_PROGRAM
AND B.EFFDT = A.EFFDT
AND B.PLAN_TYPE = A.PLAN_TYPE
AND B.OPTION_ID = A.OPTION_ID)

Analyze Data returned by these SQLs and delete these ""orphan"" rows.",BENEFIT_ADMINISTRN,Benefit Program orphan records,,2,PeopleSoft Enterprise HCM Benefits,DEDUCT,,DAY,1,Orphaned records in the Benefit Program configuration tables.,,PeopleSoft Human Capital Management,PeopleSoft Advanced Benefits
PSFT_BEN_HSA_PLAN_CHK,2346429.1,"Select 'Review ' || count(*) || ' Missing HSA Plan(s) in FSA Benefits Table That May Impact Payroll Process' AS KEY_DATA, 'Payroll Fails with the Following Error: Message ID 000027 The benefit plan displayed below was not found in the appropriate benefit table. (Doc ID 2346429.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT 'Potential Payroll Issue Caused By Missing HSA Plan in FSA Benefits Table (See KM 2346429.1)' AS KEY_DATA
From SYSADM.PS_FSA_BENEFIT F
Where F.effdt = (Select max(effdt)
From SYSADM.PS_FSA_BENEFIT
Where emplid = F.emplid
And empl_rcd = F.empl_rcd
And cobra_event_id = F.cobra_event_id
And plan_type = F.plan_type
And benefit_nbr = F.benefit_nbr
And effdt <= SYSDATE)
And F.plan_type = 67
And F.coverage_elect = 'E'
And not exists (Select 'X'
From SYSADM.PS_FSA_BENEF_TBL FB
Where FB.plan_type = F.plan_type
And FB.benefit_plan = F.benefit_plan
And FB.effdt = (Select max(effdt)
From SYSADM.PS_FSA_BENEF_TBL
Where plan_type = FB.plan_type
And benefit_plan = FB.benefit_plan
And effdt <= F.effdt))
)
having count(*) > 0","Symptoms
--------
When running Payroll calculation, it fails with the following error:

Message ID 000027: The benefit plan displayed below was not found in the appropriate benefit table.
Message Data: 67 HSA.

Cause
------
The Health Savings Account (HSA) Plan was not set up in the FSA Benefits Table.
Error message is being generated because no Plan Attributes were set up for the HSA Plan in this environment.
 
Solution
--------
To implement this solution, please take the following steps:

1. Configure the HSA Plan on the FSA Benefits Table (Navigation: Set Up HCM > Product Related > Base Benefits > Plan Attributes > FSA Benefits Table).
2. Calculate payroll checks again (Navigation: Payroll for North America > Payroll Processing USA > Produce Payroll > Calculate Payroll).",BENEFIT_ADMINISTRN,Flexible Spending Account not connected to benefit plan,,2,PeopleSoft Enterprise HCM Benefits,FSA,,DAY,1,Flexible Spending Account is not connected to a Benefit Plan,,PeopleSoft Human Capital Management,PeopleSoft Advanced Benefits
PSFT_BEN_COBRA_ORPH_CHK,609206.1,"Select 'Review ' || count(*) || ' Cobra Benefits Orphaned Data That May Cause Issue With PSPCOBRA Process' AS KEY_DATA, 'COBRA Administration Error: 153 - Subscript Out Of Range, When Reprocessing Event To ""Qualify"" or ""Prepare Options"" (Doc ID 609206.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT 'Potential Cobra process (PSPCOBRA) Issue Caused By Cobra Benefits Orphaned Data (See KM 609206.1)' AS KEY_DATA
from SYSADM.ps_cbr_partic p
where not exists (select 'x'
from SYSADM.ps_cobra_event e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id)
UNION
SELECT 'Potential Cobra process (PSPCOBRA) Issue Caused By Cobra Benefits Orphaned Data (See KM 609206.1)' AS KEY_DATA
from SYSADM.ps_cbr_partic_plan p
where not exists (select 'x'
from SYSADM.ps_cbr_partic e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id
and e.dependent_benef = p.dependent_benef)
UNION
SELECT 'Potential Cobra process (PSPCOBRA) Issue Caused By Cobra Benefits Orphaned Data (See KM 609206.1)' AS KEY_DATA
from SYSADM.PS_CBR_PARTIC_OPTN p
where not exists (select 'x'
from SYSADM.PS_CBR_PARTIC_PLAN e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id
and e.dependent_benef = p.dependent_benef
AND e.plan_type = p.plan_type)
UNION
SELECT 'Potential Cobra process (PSPCOBRA) Issue Caused By Cobra Benefits Orphaned Data (See KM 609206.1)' AS KEY_DATA
from SYSADM.PS_CBR_PARTIC_DPND p
where not exists (select 'x'
from SYSADM.PS_CBR_PARTIC_PLAN e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id
and e.dependent_benef = p.dependent_benef
AND e.plan_type = p.plan_type)
)
having count(*) > 0","Symptoms
-----------
Reprocessing COBRA events back to ""Qualify"" or ""Prepare Options""  caused an error 153 Subscript Out Of Range Error.

Cause
------
One possibility that could have caused the 153 error could be that when it tried to prepare the options, it saw that there was a new plan type that was added in that did qualify during the original processing.  It deleted the CBR_PARTIC_DPND and OPTN, however, it didn't delete the CBR_PARTIC and somehow became out of sync.

Solution
--------
Run SQL queries below to identify ""orphan"" rows in Cobra event tables:

select p.emplid
, p.benefit_rcd_nbr
, p.cobra_event_id
, P.DEPENDENT_BENEF
from ps_cbr_partic p
where not exists (select 'x'
from ps_cobra_event e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id)

select p.emplid
, p.benefit_rcd_nbr
, p.cobra_event_id
, P.DEPENDENT_BENEF
, P.PLAN_TYPE
from ps_cbr_partic_plan p
where not exists (select 'x'
from ps_cbr_partic e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id
and e.dependent_benef = p.dependent_benef)

select p.emplid
, p.benefit_rcd_nbr
, p.cobra_event_id
, P.DEPENDENT_BENEF
, P.PLAN_TYPE
, P.OPTION_ID
from PS_CBR_PARTIC_OPTN p
where not exists (select 'x'
from PS_CBR_PARTIC_PLAN e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id
and e.dependent_benef = p.dependent_benef
AND e.plan_type = p.plan_type)

select p.emplid
, p.benefit_rcd_nbr
, p.cobra_event_id
, P.DEPENDENT_BENEF
, P.PLAN_TYPE
, P.COBRA_DEP_BENEF
from PS_CBR_PARTIC_DPND p
where not exists (select 'x'
from PS_CBR_PARTIC_PLAN e
where e.emplid = p.emplid
and e.benefit_rcd_nbr = p.benefit_rcd_nbr
and e.cobra_event_id = p.cobra_event_id
and e.dependent_benef = p.dependent_benef
AND e.plan_type = p.plan_type)

Analyze data returned by these SQLs and delete any ""orphan"" rows using SQL query tool.",BENEFIT_ADMINISTRN,COBRA orphan records,,2,PeopleSoft Enterprise HCM Benefits,COBRA,,DAY,1,Orphaned records in COBRA event tables.,,PeopleSoft Human Capital Management,PeopleSoft Advanced Benefits
PSFT_BENADMIN_START_DT,608012.1,"SELECT 'Our system detected that your Benefits Administration start date is set to ' || START_EVENT_DT || ' which is two years older than the current date' as KEY_DATA, 
'Proposed solution: What Should the Benefits Administration Start Date on the Installation Table Be? (Doc ID 608012.1)' as SOLUTION, 'Y' as EVENT
from SYSADM.PS_INSTALLATION WHERE BENEFIT_ADMINISTRN = 'Y' and START_EVENT_DT < sysdate - 730;","Consider changing the Benefits Administration Start Date on Installation table.
Which date you pick is a matter of your business requirements of course, but what we would recommend would be to go back to include at least one Open Enrollment. Typically, two years of data should be enough for most organizations to work with at any given time. Changing the date generally does improve performance, especially for customers with larger employee populations.",,Benefits Administration Start Date is two years older than the current date,Our system detected that your Benefits Administration start date is two years older than the current date,3,PeopleSoft Enterprise HCM Benefits Administration,EVENTS,OE,MONTH,1,"Changing the BenAdmin Start Date should improve performance, especially for customers with larger employee population.",,PeopleSoft Human Capital Management,PeopleSoft Advanced Benefits
PSFT_BEN_BENADMIN_ORPH_CHK,2438825.1,"Select 'Review ' || count(*) || ' Orphan Row(s) To Avoid Unique Constraint Error In The Ben Admin Program' AS KEY_DATA, 'Potential Ben Admin Program Issue Caused By Orphaned Data (See KM 2438825.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT 'Potential Ben Admin Program Issue Caused By Orphaned Data (See KM 2438825.1)' AS KEY_DATA
FROM SYSADM.PS_BAS_PARTIC_COST A
WHERE NOT EXISTS (SELECT *
FROM SYSADM.PS_BAS_PARTIC_OPTN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE
AND B.OPTION_ID = A.OPTION_ID)
UNION
SELECT 'Potential Ben Admin Program Issue Caused By Orphaned Data (See KM 2438825.1)' AS KEY_DATA
FROM SYSADM.PS_BAS_PARTIC_PLAN A
WHERE NOT EXISTS (SELECT *
FROM SYSADM.PS_BAS_PARTIC B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID)
UNION
SELECT 'Potential Ben Admin Program Issue Caused By Orphaned Data (See KM 2438825.1)' AS KEY_DATA
FROM SYSADM.PS_BAS_PARTIC_OPTN A
WHERE NOT EXISTS (SELECT *
FROM SYSADM.PS_BAS_PARTIC_PLAN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE)
UNION
SELECT 'Potential Ben Admin Program Issue Caused By Orphaned Data (See KM 2438825.1)' AS KEY_DATA
FROM SYSADM.PS_BAS_PARTIC_DPND A
WHERE NOT EXISTS (SELECT *
FROM SYSADM.PS_BAS_PARTIC_PLAN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE)
UNION
SELECT 'Potential Ben Admin Program Issue Caused By Orphaned Data (See KM 2438825.1)' AS KEY_DATA
FROM SYSADM.PS_BAS_PARTIC_INVT A
WHERE NOT EXISTS (SELECT *
FROM SYSADM.PS_BAS_PARTIC_PLAN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE)
UNION
SELECT 'Potential Ben Admin Program Issue Caused By Orphaned Data (See KM 2438825.1)' AS KEY_DATA
FROM SYSADM.PS_BAS_PARTIC_ELIG A
WHERE NOT EXISTS (SELECT *
FROM SYSADM.PS_BAS_PARTIC B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID)
)
having count(*) > 0","Symptoms:
--------
BenAdmin process could fail with the error below due to orphan rows in BAS_PARTICXXX tables:

00805
Error Message : INSERT or UPDATE would result in duplicate rows in a table with a UNIQUE index

Cause: 
-----
Duplicate Inserts in PSPBARUN (BenAdmin), a.k.a. Unique Constraints, are almost inevitably caused by data issues. Duplicate insert happens quite often in Ben Admin if a previous Ben Admin run for some reason did not finish successfully.

Solution:
--------
Identify the problem using the following SQLs. Analyze Data returned by these SQLs and delete these ""orphan"" rows.

SELECT A.SCHED_ID, A.EMPLID, A.BENEFIT_RCD_NBR, A.EVENT_ID, A.PLAN_TYPE, A.OPTION_ID, A.COST_ID
FROM PS_BAS_PARTIC_COST A
WHERE NOT EXISTS (SELECT *
FROM PS_BAS_PARTIC_OPTN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE
AND B.OPTION_ID = A.OPTION_ID)


SELECT A.SCHED_ID, A.EMPLID, A.BENEFIT_RCD_NBR, A.EVENT_ID, A.PLAN_TYPE
FROM PS_BAS_PARTIC_PLAN A
WHERE NOT EXISTS (SELECT *
FROM PS_BAS_PARTIC B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID)

SELECT A.SCHED_ID, A.EMPLID, A.BENEFIT_RCD_NBR, A.EVENT_ID, A.PLAN_TYPE, A.OPTION_ID
FROM PS_BAS_PARTIC_OPTN A
WHERE NOT EXISTS (SELECT *
FROM PS_BAS_PARTIC_PLAN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE)

SELECT A.SCHED_ID, A.EMPLID, A.BENEFIT_RCD_NBR, A.EVENT_ID, A.PLAN_TYPE, A.DEPENDENT_BENEF
FROM PS_BAS_PARTIC_DPND A
WHERE NOT EXISTS (SELECT *
FROM PS_BAS_PARTIC_PLAN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE)


SELECT A.SCHED_ID, A.EMPLID, A.BENEFIT_RCD_NBR, A.EVENT_ID, A.PLAN_TYPE, A.INVESTMENT_OPT
FROM PS_BAS_PARTIC_INVT A
WHERE NOT EXISTS (SELECT *
FROM PS_BAS_PARTIC_PLAN B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID
AND B.PLAN_TYPE = A.PLAN_TYPE)


SELECT A.SCHED_ID, A.EMPLID, A.BENEFIT_RCD_NBR, A.EVENT_ID, A.EMPL_RCD, A.BAS_ELIG_SRC, A.ELIG_EFFDT,A.ELIG_EFFSEQ
FROM PS_BAS_PARTIC_ELIG A
WHERE NOT EXISTS (SELECT *
FROM PS_BAS_PARTIC B
WHERE B.SCHED_ID = A.SCHED_ID
AND B.EMPLID = A.EMPLID
AND B.BENEFIT_RCD_NBR = A.BENEFIT_RCD_NBR
AND B.EVENT_ID = A.EVENT_ID)",BENEFIT_ADMINISTRN,Benefit Admin orphan data,,2,PeopleSoft Enterprise HCM Benefits Administration,EVENTS,EM,DAY,1,Orphan data could exist in BenAdmin Event tables.,,PeopleSoft Human Capital Management,PeopleSoft Advanced Benefits
PSFT_GP_INVALID_FLD_TYPE_PIN_MISMATCH,2576632.1,"select 'Y' as EVENT
, count(*) || ' Field Type and PIN mismatches' as KEY_DATA
, 'PSFT Global Payroll - Invalid Array Field Types And PIN Mismatches Or If Pointer Is Used The Field Name Needs To Be PIN_NUM (Doc ID 2576632.1)' AS SOLUTION
from (
SELECT DISTINCT
('Record Name = ' || E1.RECNAME ||
'; PIN Number = ' || E1.PIN_NUM ||
'; Element Name = ' || E3.PIN_NM ||
'; Field Name = ' || E2.FIELDNAME ||
'; Element for Target Value = ' || E2.PIN_VAR_NUM ||
'; Element Name = ' || E4.PIN_NM ||
'; Field Format = ' || E3.FLD_FMT ||
'; Field Type = ' || E5.FIELDTYPE ||
'; Country = ' || E3.COUNTRY) AS KEY_DATA
FROM SYSADM.PS_GP_ARRAY E1,
SYSADM.PS_GP_ARRAY_FLD E2,
SYSADM.PS_GP_PIN E3,
SYSADM.PS_GP_PIN E4,
SYSADM.PSDBFIELD E5
WHERE E1.PIN_NUM = E2.PIN_NUM
AND E2.PIN_NUM = E3.PIN_NUM
AND E2.PIN_VAR_NUM = E4.PIN_NUM
AND E2.FIELDNAME = E5.FIELDNAME
AND ((E4.FLD_FMT = '1' AND E5.FIELDTYPE <> '0')
OR (E4.FLD_FMT = '2' AND E5.FIELDTYPE <> '4')
OR (E4.FLD_FMT IN ('3', '4') AND E5.FIELDTYPE NOT IN ('2', '3') )
OR (E4.FLD_FMT = '5' AND (E2.ARRAY_FLD_USE <> 'E' OR E5.FIELDTYPE NOT IN ('2','3') ) ))
AND EXISTS (SELECT 'X' FROM SYSADM.PSRECDEFN
WHERE RECNAME = E1.RECNAME)
) having count(*) >= 1","Symptoms: Elements of type AR (Array) where there are invalid array field types and PIN mismatches cannot be used.
At the same time, if the pointer is used, the field name needs to be PIN_NUM.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To correct the Arrays where there are invalid array field types and PIN mismatches, follow the below instructions:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Supporting Elements > Arrays
2. Search for the Element returned and go to Field Map and Keyes tab
3. In grid Map Retrieved Fields to Variable Elements, correct the Field Use value
4. Save the change


Field Use - Available options:
    Monetary: When monetary conversion is required.
    Pointer: To specify that a column contains a PIN.
    Other: (default) For all other cases.

For more details, please refer to PSFT Global Payroll - Invalid Array Field Types And PIN Mismatches Or If Pointer Is Used The Field Name Needs To Be PIN_NUM (Doc ID 2576632.1).",INSTALLED_PAY_GBL,Invalid array field types or PIN mismatch,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies all the rows with invalid array field types and pin mismatches OR if pointer is used the field name needs to be PIN_NUM. If these rows are not correctly promptly, they can cause discrepancy because element can be used by many countries.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_INVALID_FIELDS_IN_ARRAY_REC,2576635.1,"Select 'Review ' || count(*) || ' Element(s) of Type WR (Writable Array) With Invalid Fields In Record Definition' AS KEY_DATA, 'PSFT Global Payroll - Invalid Fields In The Writeable Array Record Definition (Doc ID 2576635.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Record Name = ' || E1.RECNAME ||
'; PIN Number = ' || E1.PIN_NUM ||
'; Element Name = ' || E3.PIN_NM ||
'; Field Name = ' || E2.FIELDNAME ||
'; Element Number = ' || E2.PIN_ELEM_NUM ||
'; Element Name = ' || E4.PIN_NM ||
'; Field Format = ' || E4.FLD_FMT ||
'; Country = ' || E4.COUNTRY) AS KEY_DATA
FROM SYSADM.PS_GP_WA_ARRAY E1,
SYSADM.PS_GP_WA_FLD E2,
SYSADM.PS_GP_PIN E3,
SYSADM.PS_GP_PIN E4
WHERE E1.PIN_NUM = E2.PIN_NUM
AND E1.PIN_NUM = E3.PIN_NUM
AND E2.PIN_NUM = E3.PIN_NUM
AND E2.PIN_ELEM_NUM = E4.PIN_NUM
AND E2.FIELDNAME NOT IN (SELECT E5.FIELDNAME
FROM SYSADM.PSRECFIELDALL E5
WHERE E5.RECNAME = E1.RECNAME)
AND EXISTS (SELECT 'X' FROM SYSADM.PSRECDEFN
WHERE RECNAME = E1.RECNAME))
having count(*) > 0","Symptoms: Elements of type WR (Writable Array) cannot be used if they have invalid fields in the record definition

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To fix the invalid field in the Writable Array, follow the instructions below:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Supporting Elements > Writable Arrays
2. Search for the Element returned and go to Definition and Fields tab
3. In grid Writable Array Fields, correct the invalid field (Field Name)
4. Save the change

For more details, please refer to PSFT Global Payroll - Invalid Fields In The Writeable Array Record Definition (Doc ID 2576635.1)",INSTALLED_PAY_GBL,Invalid fields in array record definition,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies the invalid fields in the writable array record definition. If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_PROCESS_LIST_NOT_REFERENCED,2576668.1,"Select 'Review ' || count(*) || ' Process List(s) Not Referenced By Run Type' AS KEY_DATA, 'Proposed solution: PSFT Global Payroll - Process List Not Referenced by Run Type (Doc ID 2576668.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || A.COUNTRY || '; Element Type = ' || A.PIN_TYPE || '; PIN Number = ' || A.PIN_NUM || '; Element Name = ' || A.PIN_NM || '; PIN Code = ' || A.PIN_CODE) AS KEY_DATA
FROM SYSADM.PS_GP_PIN A
WHERE PIN_TYPE = 'PR' AND
NOT EXISTS(SELECT 'X' FROM SYSADM.PS_GP_RUN_TYPE_DTL WHERE SYSADM.PS_GP_RUN_TYPE_DTL.PIN_PRC_NUM = A.PIN_NUM) AND
NOT EXISTS (SELECT 'X' FROM SYSADM.PS_GP_FC_TBL WHERE SYSADM.PS_GP_FC_TBL.PIN_PRC_NUM = A.PIN_NUM))
having count(*) > 0","Symptoms: After creating a Process List, it needs to be linked to a Run Type in order to be processed.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To fix the Process Lists not referenced by a Run Type, follow the below steps:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Framework > Run Types
2. Search the Run Type that should reference the Process List
3. Add the Process List to Definition grid, in field Process Name

OR 

4. Add New Run Type Value
5. Add the Process List to Definition grid, in field Process Name
6. Save the change

For more details, please refer to PSFT Global Payroll - Process List Not Referenced by Run Type (Doc ID 2576668.1).",INSTALLED_PAY_GBL,Process list not referenced,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if process list is not referenced by Run Type or Fictitious calculation.,,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_PIN_CODE_NOT_MATCH_PIN_NAME_AND_COUNTRY,2576176.1,"Select 'Review ' || count(*) || ' Pin Code(s) Not Matching With Pin Name and Country' AS KEY_DATA, 'PSFT Global Payroll - Pin Code Doesn''t Match PIN NAME + '' '' + Country (Doc ID 2576176.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('PIN Number = ' || PIN_NUM || '; PIN Code = ' || PIN_CODE || '; Element Name = ' || PIN_NM || '; Country = ' || COUNTRY
) AS KEY_DATA
FROM SYSADM.PS_GP_PIN
WHERE PIN_CODE <> (RTRIM(PIN_NM) || ' ' || COUNTRY))
having count(*) > 0","Symptoms: Errors will occur when running the GPPDPRUN process (used for running both Payroll and Absences) when there are elements that have the PIN Code not matching PIN NAME + ' ' + Country (in table PS_GP_PIN)

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To fix the rows where the PIN Code is not matching PIN NAME + ' ' + Country, navigate to the page specific of the element type returned:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements:
    a. Payroll Elements for Earnings and Deductions
    b. Absence Elements for Absence Entitlements and Absence Takes
    c. Supporting Elements for Accumulators, Arrays, Brackets, Formulas, Dates, and so forth
    d. Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Supporting Elements > System Elements > System Element Name
    e. Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Element Groups 
2. Search the Element Name that needs to be modified
3. The field ""Name"" should be modified to match the PIN Code without the Country Extension
4. Save the change

For more details, please refer to PSFT Global Payroll - Pin Code Doesn't Match PIN NAME + ' ' + Country (Doc ID 2576176.1).",INSTALLED_PAY_GBL,PIN Code or PIN Name or space or country mismatch,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies rows where 
Pin Code not match Element Name + space + Country in PS_GP_PIN table (Global Payroll Pay Item Names table). If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_CALENDAR_GROUP_RUN_BY_STREAM_NO_ROWS,2579774.1,"Select 'Review ' || count(*) || ' Calendar Group ID(s) Marked To Be Run By Stream But No Rows In The GP_STRM Table' AS KEY_DATA, 'PSFT Global Payroll - The Calendar Group Marked To Be Run By Stream, But No Rows In The GP_STRM Table (Doc ID 2579774.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Calendar Group ID = ' || A.CAL_RUN_ID || '; Description = ' || A.DESCR || '; Short Description = ' || A.DESCRSHORT || '; Country = ' || A.COUNTRY || '; Process by Stream = ' || A.PROCESS_STRM_IND) AS KEY_DATA
FROM SYSADM.PS_GP_CAL_RUN A
WHERE A.PROCESS_STRM_IND = 'Y'
AND NOT EXISTS (SELECT B.CAL_RUN_ID FROM SYSADM.PS_GP_CAL_RUN_STRM B, SYSADM.PS_GP_STRM C WHERE B.STRM_NUM = C.STRM_NUM AND A.CAL_RUN_ID = B.CAL_RUN_ID))
having count(*) > 0","Symptoms: The process GPPDPRUN (used for both Absence and Payroll run) cannot be run without selecting a stream when the Calendar Group ID was marked to be run by stream but there are no rows in the GP_STRM table for it.

The system triggers the message:

""Stream Number is required to run the Identify step (17000,1402)
You must select a Stream Number to run the Identify step when the Calendar Group was set up to be run by Stream.""

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To update the Calendar Group IDs returned by the above script, follow the below steps:

1. Navigate to Global Payroll & Absence Mgmt > Absence and Payroll Processing > Define Calendars > Calendar Groups
2. Search the Calendar Group returned by the above script
3. Uncheck Process by Stream checkbox
4. Save the change

For more details, please refer to PSFT Global Payroll - The Calendar Group Marked To Be Run By Stream, But No Rows In The GP_STRM Table (Doc ID 2579774.1).",INSTALLED_PAY_GBL,No rows in stream for GP Calendar,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,The process GPPDPRUN (used for both Absence and Payroll run) will end in error if the Calendar Group was marked to be run by stream but there are no rows in the GP_STRM table.,,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_FORMULAS_NOT_VALIDATED,2576575.1,"Select 'Review ' || count(*) || ' Formula(s) Not Validated In The System' AS KEY_DATA, 'PSFT Global Payroll - Formulas Not Validated (Doc ID 2576575.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || A.COUNTRY || '; PIN Number = ' || A.PIN_NUM || '; Element Name = '|| A.PIN_NM || '; Validated Formula = '|| B.FRML_VALIDATED_IND || ';
Effective Date = ' || B.EFFDT
) AS KEY_DATA
FROM SYSADM.PS_GP_PIN A,
SYSADM.PS_GP_FORMULA B
WHERE A.PIN_NUM = B.PIN_NUM
AND B.FRML_VALIDATED_IND <> 'Y')
having count(*) > 0","Symptoms: Errors will occur when running the process GPPDPRUN (used for both Absence and Payroll run) if formulas are not validated in the system.

Cause: This can occur while applying maintenance or after any customization.

Solution:  To fix the rows where a formula is not validated, follow the below instructions:
1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements >Supporting Elements > Formulas 
2. Search the formula returned by the script with Correct History enabled
3. Go to Field-by-Field Definition tab, notice the Validated checkbox is not checked
4. Press the Validate button, make sure the Validated checkbox is checked
5. Save the change

For more details, please refer to PSFT Global Payroll - Formulas Not Validated (Doc ID 2576575.1).",INSTALLED_PAY_GBL,Formulas not validated,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"If formula is not validated then GPPDPRUN process (run for both Payroll and Absences) will end in error.
Please make sure all formulas are validated before running any Calendar.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_MORE_ELEMENTS_WITH_SAME_PIN_CODE,2576172.1,"select 'Y' as EVENT
, count(*) || ' Elements with same PIN Code' as KEY_DATA
, 'PSFT Global Payroll - More Than One Element Exists With The Same PIN Code (Doc ID 2576172.1)' as SOLUTION
from (
SELECT
('Country = '||COUNTRY|| '; PIN Code = ' || PIN_CODE) AS KEY_DATA
FROM SYSADM.PS_GP_PIN
GROUP BY COUNTRY, PIN_CODE
HAVING COUNT(*) > 1
) having count(*) >= 1","Symptoms: If there are more elements are having the same PIN_CODE, the GPPDPRUN process (used for running both Payroll and Absences) will end in error and there will be miscalculations as well.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  When an element name is created, the system assigns the element a PIN code and a PIN number. As per PeopleBooks Understanding PIN Codes and PIN Numbers, an element name can be renamed, but the PIN code is a constant.

In order to correct the elements that have the same PIN_CODE, please raise a Service Request with the Global Payroll Core Support team.
Product: PeopleSoft Enterprise HCM Global Payroll Core 
Problem Type: Elements - Framework

For more details, please refer to PSFT Global Payroll - More Than One Element Exists With The Same PIN Code (Doc ID 2576172.1)",INSTALLED_PAY_GBL,Elements with same PIN code,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies when more than one Element exists with the same Pin Code. If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_PROCESS_LIST_NO_SECTIONS,2576670.1,"Select 'Review ' || count(*) || ' Process List(s) With Missing Section(s) In The Setup' AS KEY_DATA, 'PSFT Global Payroll - Process List Does Not Contain Any Section (Doc ID 2576670.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || A.COUNTRY || '; Element Type = ' || A.PIN_TYPE || '; PIN Number = ' || A.PIN_NUM || '; Element Name = ' || A.PIN_NM || '; PIN Code = ' || A.PIN_CODE) AS KEY_DATA
FROM SYSADM.PS_GP_PIN A, SYSADM.PS_GP_PROCESS B
WHERE A.PIN_NUM = B.PIN_NUM AND
A.PIN_TYPE = 'PR' AND
NOT EXISTS(SELECT 'X' FROM SYSADM.PS_GP_PROCESS_DTL WHERE PS_GP_PROCESS_DTL.PIN_NUM = B.PIN_NUM))
having count(*) > 0","Symptoms:  Process lists control Absence and Payroll processing at the highest level. They identify the sections, or sets of elements, to resolve during processing and the order in which they resolve.
There shouldn't be Process Lists that have no Sections in the setup. 

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To add sections to a Process Lists, follow the below instructions:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Framework > Processing > Process Lists 
2. Search the Element Name that needs to be modified
3. Go to Definition tab, add sections to Process List Members grid, based on your business requirement
4. Save the change

For more details, please refer to PSFT Global Payroll - Process List Does Not Contain Any Section (Doc ID 2576670.1).",INSTALLED_PAY_GBL,Process list has no sections,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if the Process List does not contain any Sections.,,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_ER_DD_AT_PART_OF_SECTIONS,2576672.1,"Select 'Review ' || count(*) || ' Earning(s), Deduction(s) or Absence Take(s) That Are Not Part of any Element Groups' AS KEY_DATA, 'PSFT Global Payroll - ER,DD,AT That Are Part Of The Sections That Are Not Part Of Any Element Group (Doc ID 2576672.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || C.COUNTRY || '; Element Name = ' || C.PIN_NM || '; PIN Number = ' || C.PIN_NUM || '; PIN Code = ' || C.PIN_CODE || '; Element Number = ' || B.PIN_NM || '; Element Type = ' || C.PIN_TYPE) AS KEY_DATA
FROM SYSADM.PS_GP_SECTION_DTL A, SYSADM.PS_GP_PIN B, SYSADM.PS_GP_PIN C
WHERE A.PIN_NUM = B.PIN_NUM
AND C.PIN_NUM = A.PIN_ELEM_NUM AND C.PIN_TYPE IN ('ER','DD','AT')
AND C.PIN_NUM NOT IN (SELECT D.PIN_NUM FROM SYSADM.PS_GP_ELEM_GRP_MBR E, SYSADM.PS_GP_PIN F, SYSADM.PS_GP_PIN D
WHERE E.PIN_NUM = F.PIN_NUM AND D.PIN_NUM = E.PIN_ELEM_NUM))
having count(*) > 0","Symptoms: Earnings, Deductions or Absence Takes that are part of the Sections, should also be part of Element Groups.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  Check the results returned to see if the elements are used, or obsolete.

If the elements are used, follow the below instructions to correct the Elements:
1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Framework > Organizational > Element Groups 
2. Add the element returned, by the script, to the Element Group it belongs.
3. Next, after you have identified the Element Group, go to Element Group Members Tab, click the ""+"" sign and add the element
4. Save the change

For more details, please refer to PSFT Global Payroll - ER,DD,AT That Are Part Of The Sections That Are Not Part Of Any Element Group (Doc ID 2576672.1).",INSTALLED_PAY_GBL,ER DD AT are part of the Sections which are not part of any Element Group,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if ER,DD,AT are part of the Sections which are not part of any Element Group.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_RECORD_FIELD_COMBINATION,2576667.1,"Select 'Review ' || count(*) || ' Missing Field Combinations Within System Elements' AS KEY_DATA, 'PSFT Global Payroll - Referencing ""Record.Field"" Combination That Does Not Exist (Doc ID 2576667.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || B.COUNTRY || '; PIN Number = ' || A.PIN_NUM || '; Element Number = ' || B.PIN_NM || '; Record Name = ' || A.RECNAME || '; Field Name = ' || A.FIELDNAME ) AS KEY_DATA
FROM SYSADM.PS_GP_SYSTEM_PIN A, SYSADM.PS_GP_PIN B
WHERE A.PIN_NUM = B.PIN_NUM AND A.SYSPIN_SRC = 'D' AND
NOT EXISTS (SELECT 'X' FROM SYSADM.PSRECFIELD C, SYSADM.PSRECFIELD D
WHERE (A.RECNAME = C.RECNAME AND A.FIELDNAME = C.FIELDNAME AND
A.RECNAME = D.RECNAME AND A.FIELDNAME = D.FIELDNAME AND
C.SUBRECORD <> 'Y') OR
(A.RECNAME = C.RECNAME AND
C.FIELDNAME = D.RECNAME AND A.FIELDNAME = D.FIELDNAME AND
C.SUBRECORD = 'Y' AND D.SUBRECORD <> 'Y')))
having count(*) > 0","Symptoms: System elements are delivered and maintained by PeopleSoft and usually contain payee-related data for use in calculations. Although system elements cannot be added, various parameters that control their use can be amended.

The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if Record-Field combination is referenced but the field does not exist.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution: To fix the System Elements returned by the above script, follow the instructions below:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Supporting Elements > System Elements
2. Search the Element Name that needs to be modified
3. Go to Source and Use tab, Element Detail grid
4. Open the prompt button from Field Name and add the corresponding field values defined for the Record
5. Save the change

For more details, please refer to PSFT Global Payroll - Referencing ""Record.Field"" Combination That Does Not Exist (Doc ID 2576667.1).",INSTALLED_PAY_GBL,Inexistent record field combination referenced,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if Record-Field combination is referenced but does not exist.,,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_COUNTRY_PARENT_CHILD_NOT_MATCH,2576620.1,"select 'Y' as EVENT
, count(*) || ' Elements with Country on Parent not matching Country on Child' as KEY_DATA
, 'PSFT Global Payroll - Country On Parent Does Not Match Country On Child Element (Doc ID 2576620.1)' as SOLUTION
from (
SELECT DISTINCT
('PIN Number = '|| A.PIN_NUM || '; Element Name = ' || B.PIN_NM || '; Country = '|| B.COUNTRY || ';
PIN Member Number = ' || A.PIN_MBR_NUM || '; Element Name = '|| C.PIN_NM || ';
Country = '|| C.COUNTRY ) AS KEY_DATA
FROM SYSADM.PS_GP_PINTREE_VW A,
SYSADM.PS_GP_PIN B,
SYSADM.PS_GP_PIN C
WHERE A.PIN_NUM = B.PIN_NUM
AND A.PIN_MBR_NUM = C.PIN_NUM
AND ((B.COUNTRY <> C.COUNTRY and (B.COUNTRY <> 'ALL' and C.COUNTRY <> 'ALL'))
OR (B.COUNTRY = 'ALL' and C.COUNTRY <> 'ALL'))
) having count(*) >= 1","Symptoms: When performing PUM updates it can happen that the country data on parent element does not match the country on the child element.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To fix the rows where the child element does not have the same Country as the parent element, navigate to the page specific of the element type returned:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements:
    a. Payroll Elements for Earnings and Deductions
    b. Absence Elements for Absence Entitlements and Absence Takes
    c. Supporting Elements for Accumulators, Arrays, Brackets, Formulas, and so forth
2. Search the Element Name (Parent or Child) that needs to be modified
3. The field ""Used By"" should be modified with either ALL or Specific Country
4. For Specific Country, populate the field Country with the required value
5. Save the change

For more details, please refer to PSFT Global Payroll - Country On Parent Does Not Match Country On Child Element (Doc ID 2576620.1).",INSTALLED_PAY_GBL,Parent and Child country mismatch,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies when Country on parent Element does not match with Country on child Element. If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_ELEMENTS_MISMATCHED_USEDBY_AND_COUNTRY,2576198.1,"Select 'Review ' || count(*) || ' Element(s) With Mismatched USED_BY and Country Fields' AS KEY_DATA, 'PSFT Global Payroll - Elements With Mismatched USED_BY And Country Fields (Doc ID 2576198.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('PIN Number = ' || PIN_NUM || '; Element Name = '|| PIN_NM || '; Used By = '|| USED_BY || '; Country = ' || COUNTRY
) AS KEY_DATA
FROM SYSADM.PS_GP_PIN
WHERE ((USED_BY = 'A'
AND COUNTRY <> 'ALL')
OR (USED_BY = 'C'
AND COUNTRY = 'ALL')))
having count(*) > 0","Symptoms: The GPPDPRUN process (used to run Payroll and Absences), will end in warning if there are elements that have the USED_BY and COUNTRY different in the GP_PIN record.
This situation can cause discrepancy because an element can be used by more countries. This is not recommended, each country using Global Payroll defines its own rules, and must use proper elements.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution: To fix the elements where the USED_BY and COUNTRY fields are different in PS_GP_PIN record, navigate to the page specific of the element type returned:

    Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements:
        a. Payroll Elements for Earnings and Deductions
        b. Absence Elements for Absence Entitlements and Absence Takes
        c. Supporting Elements for Accumulators, Arrays, Brackets, Formulas and so forth
    2. Search the Element Name (Parent or Child) that needs to be modified
    3. The field ""Used By"" should be modified with either ALL or Specific Country
    4. For Specific Country, populate the field Country with the required value
    5. Save the change

For more details, please refer to PSFT Global Payroll - Elements With Mismatched USED_BY And Country Fields (Doc ID 2576198.1).",INSTALLED_PAY_GBL,Used by and Country field mismatch,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies Elements with mismatched USED_BY and Country fields. If these rows are not correctly promptly, they can cause discrepancy because element can be used by many countries.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_CONFLICTING_RETRO_TRIGGERS_FOR_EMPLOYEE,2576660.1,"select 'Y' as EVENT, 
count(*) || ' Conflicting Retro triggers found for an employee in Payroll Run' as KEY_DATA,
'Proposed solution: PSFT Global Payroll - Conflicting Retro Triggers For An Employee In A Payroll Run (Doc ID 2576660.1)' AS SOLUTION
from (
SELECT DISTINCT
('EmplID = ' || A.EMPLID || '; Country = ' || A.COUNTRY || '; Retro Process Definition ID = ' || C.RTO_PRC_ID || '; Calendar Group = ' || A.CAL_RUN_ID|| '; Trigger Event ID = ' || C.TRGR_EVENT_ID) as KEY_DATA
FROM SYSADM.PS_GP_PYE_PRC_STAT A
,SYSADM.PS_GP_RTO_TRGR B
,SYSADM.PS_GP_RTO_EVT C
WHERE A.CAL_RUN_ID <>' '
AND A.SEL_STAT IN ('A','I')
AND A.PRD_TYPE = 'C'
AND A.EMPLID = B.EMPLID
AND B.CAL_RUN_ID = A.CAL_RUN_ID
AND A.COUNTRY = B.COUNTRY
AND C.COUNTRY = B.COUNTRY
AND C.TRGR_EVENT_ID = B.TRGR_EVENT_ID
AND
(EXISTS
(SELECT EMPLID FROM SYSADM.PS_GP_ITER_TRGR I
WHERE I.CAL_RUN_ID= A.CAL_RUN_ID
AND I.ITER_TRGR_STATUS='I'
AND I.EMPLID = A.EMPLID
)
)
AND A.PRC_ORD_TS =
(SELECT MIN(X.PRC_ORD_TS) FROM SYSADM.PS_GP_PYE_PRC_STAT X
WHERE X.EMPLID = A.EMPLID
AND X.EMPL_RCD = A.EMPL_RCD
AND X.CAL_RUN_ID = A.CAL_RUN_ID)
) having count(*) >= 1","Symptoms: The GPPDPRUN fails with the following error:
No segment record found for payee %1, %2 for calendar %3 of pay group %4

Cause: This issue is caused when there are orphaned data, old retro triggers to process or SQL updates directly in the table.

Solution:  To correct the triggers returned by the above script, follow the below instructions:
1. Navigate to Global Payroll & Absence Mgmt > Absence and Payroll Processing > Calculate Absence and Payroll use the run control that the crash occurred from (with parameters grayed out) to cancel the affected payroll run.  
2. Once the payroll run is canceled, go to Global Payroll & Absence Mgmt > Absence and Payroll Processing > Prepare Payroll > Review Triggers and remove the retro triggers for the affected employee.
3. Run again the payroll

For more details, please refer to PSFT Global Payroll - Conflicting Retro Triggers For An Employee In A Payroll Run (Doc ID 2576660.1).",INSTALLED_PAY_GBL,Conflicting retro triggers for employee,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,If an employee have a job data change which causes a corrective retro and if there is absence data entry which causes a forwarding retro then multiple retro events exist with contradictory Retro Process Definitions cannot be processed for an employee at the same time. Either one of the retro has to be cancelled before proceeding with the payroll.,,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_ER_DD_AT_PART_OF_ELEMENT_GROUP,2576674.1,"Select 'Review ' || count(*) || ' Earning(s), Deduction(s) or Absence Take(s) That Are Not Part of any Section or Formula' AS KEY_DATA, 'PSFT Global Payroll - ER,DD,AT That Are Part Of An Element Group That Are Not Part Of Any Section or Formula (Doc ID 2576674.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || D.COUNTRY || '; Element Name = ' || D.PIN_NM || '; PIN Number = ' || D.PIN_NUM || '; PIN Code = ' || D.PIN_CODE || '; Element Number = ' || F.PIN_NM || '; Element Type = ' || D.PIN_TYPE) AS KEY_DATA
FROM SYSADM.PS_GP_ELEM_GRP_MBR E, SYSADM.PS_GP_PIN F, SYSADM.PS_GP_PIN D
WHERE E.PIN_NUM = F.PIN_NUM
AND D.PIN_NUM = E.PIN_ELEM_NUM AND D.PIN_TYPE IN ('ER','DD','AT')
AND D.PIN_NM NOT IN (SELECT C.PIN_NM FROM SYSADM.PS_GP_SECTION_DTL A, SYSADM.PS_GP_PIN B, SYSADM.PS_GP_PIN C
WHERE A.PIN_NUM = B.PIN_NUM AND C.PIN_NUM = A.PIN_ELEM_NUM
AND C.PIN_TYPE IN ('ER','DD','AT'))
AND D.PIN_NUM NOT IN (SELECT G.PIN_FRML_FLD3_NUM FROM SYSADM.PS_GP_FORMULA_DTL G)
AND D.PIN_NUM NOT IN (SELECT H.PIN_ELEM_NUM FROM SYSADM.PS_GP_PYE_SECT_DTL H))
having count(*) > 0","Symptoms: The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if ER,DD,AT that are part of an Element Group which is not part of any Section or Formula.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  Check the results returned to see if the elements are used, or obsolete.

If the elements are used, then they should be added either to a Section or to a Formula. 

To add an element to a Section:
1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Framework > Processing > Sections 
2. Add the element returned, by the script, to the Section it belongs.
3. Next, after you have identified the Section, go to Definition Tab, click the ""+"" sign and add the element in the Section Element list grid.
4. Save the change

To add an element to a Formula:
1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Supporting Elements > Formulas 
2. Add the element returned, by the script, to the Formula it belongs.
3. Next, after you have identified the Formula, go to Field-by-Field Definition Tab and add the Element to the Field-by-Field area.
Note: Adding the element depends on the calculation rules/sequences you have defined.
4. Save the change

For more details, please refer to PSFT Global Payroll - ER,DD,AT That Are Part Of An Element Group That Are Not Part Of Any Section or Formula (Doc ID 2576674.1).",INSTALLED_PAY_GBL,These elements ER DD AT are part of an element group,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if ER,DD,AT that are part of an Element Group which is not part of any Section or Formula.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_INDUSTRY_PARENT_CHILD_NOT_MATCH,2576619.1,"select 'Y' as EVENT
, count(*) || ' Pins with Industry on Parent not matching Industry on Child' as KEY_DATA
, 'PSFT Global Payroll - Industry On Parent Does Not Match Industry On Child (Doc ID 2576619.1)' as SOLUTION
from (
SELECT DISTINCT ('
PIN Number = '|| A.PIN_NUM || '; Element Name = ' || B.PIN_NM || '; Country = '|| B.COUNTRY || ';
Industry = ' || B.PIN_INDUSTRY || '; PIN Member Number = ' || A.PIN_MBR_NUM || '; Element Name = '|| C.PIN_NM || ';
Country = '|| C.COUNTRY || '; Industry = ' || C.PIN_INDUSTRY ) AS KEY_DATA
FROM SYSADM.PS_GP_PINTREE_VW A,
SYSADM.PS_GP_PIN B,
SYSADM.PS_GP_PIN C WHERE A.PIN_NUM = B.PIN_NUM AND A.PIN_MBR_NUM = C.PIN_NUM AND B.PIN_INDUSTRY <> ' ' AND (C.PIN_INDUSTRY <> ' ' AND B.PIN_INDUSTRY <> C.PIN_INDUSTRY)
) having count(*) >= 1","Symptoms: Errors will occur if Industry set on Parent Element does not match Industry on Child Element.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To fix the Elements with different Industry values, navigate to the page specific of the element type returned:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements:
    a. Payroll Elements for Earnings and Deductions
    b. Absence Elements for Absence Entitlements and Absence Takes
    c. Supporting Elements for Accumulators, Arrays, Brackets, Formulas and so forth
2. Search the Element Name that needs to be modified
3. On the first tab of the Element, the field ""Industry/Region"" should be modified accordingly
4. Save the change

For more details, please refer to PSFT Global Payroll - Industry On Parent Does Not Match Industry On Child (Doc ID 2576619.1).",INSTALLED_PAY_GBL,Parent and Child Industry mismatch,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies when 9.	Industry on parent Element does not match industry on child Element. If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_ARRAY_KEYS_NOT_EXIST_IN_REC_DEFN,2576622.1,"Select 'Review ' || count(*) || ' Missing Element(s) of Type AR (Array) In Record Definition' AS KEY_DATA, 'PSFT Global Payroll - Array Keys Does Not Exist In Record Definition (Doc ID 2576622.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT
DISTINCT ('Record Name = ' || E1.RECNAME || '; PIN Number = ' || E1.PIN_NUM || '; Element Name = '|| E3.PIN_NM || '; Field Name = ' || E2.FIELDNAME || ';
Element Number = ' || E2.PIN_ELEM_NUM || '; Element Name = '|| E4.PIN_NM || '; Field Format = '|| E4.FLD_FMT ||'; Country = '||E3.COUNTRY ) AS KEY_DATA
FROM SYSADM.PS_GP_ARRAY E1,
SYSADM.PS_GP_ARRAY_KEY E2,
SYSADM.PS_GP_PIN E3,
SYSADM.PS_GP_PIN E4
WHERE E1.PIN_NUM = E2.PIN_NUM
AND E1.PIN_NUM = E3.PIN_NUM
AND E2.PIN_NUM = E3.PIN_NUM
AND E2.PIN_ELEM_NUM = E4.PIN_NUM
AND E2.FIELDNAME NOT IN (SELECT E5.FIELDNAME
FROM SYSADM.PSRECFIELDALL E5
WHERE E1.RECNAME = E5.RECNAME)
AND EXISTS (SELECT 'X' FROM SYSADM.PSRECDEFN
WHERE RECNAME = E1.RECNAME
))
having count(*) > 0","Symptoms: The GPPDPRUN process (used for running both Payroll and Absences) will end in error and there will be miscalculations as well when there are elements of type AR (array), that don't have Array Keys in the definition. 

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To correct the values returned, follow the below steps:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Supporting Elements > Arrays
2. Search the Element Name that needs to be modified
3. Go to Field Map and Keys tab and modify the values from Keys and Retrieval Criteria grid
4. Save the change

For more details, please refer to PSFT Global Payroll - Array Keys Does Not Exist In Record Definition (Doc ID 2576622.1).",INSTALLED_PAY_GBL,Array Keys do not exist in record definition,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies the Array Keys that does not exist in record definition. If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_EMPLOYEES_RETRO_CALC_DATE_NOT_MATCH,2579771.1,"Select 'Review ' || count(*) || ' Employee(s) Who Has a Retroactive Calc Begin Date With Unmatched Earliest Job Record Row' AS KEY_DATA, 'PSFT Global Payroll - Employees Whose Retro Calculation Begin Date Does Not Match Earliest JOB Record (Doc ID 2579771.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Empl ID = ' || A.EMPLID || '; No Retro Processing Before = ' || B.GP_CALC_BGN_DT || '; Payroll System = ' || A.PAY_SYSTEM_FLG || '; Effective Date = ' || A.EFFDT) AS KEY_DATA
FROM SYSADM.PS_JOB A,
SYSADM.PS_GP_PAYEE_DATA B,
SYSADM.PS_PERSONAL_DATA C
WHERE A.EMPLID= B.EMPLID
AND A.EFFDT <> B.GP_CALC_BGN_DT
AND A.EFFDT = (SELECT MIN (C.EFFDT)
FROM SYSADM.PS_JOB C
WHERE A.EMPLID = C.EMPLID
AND C.PAY_SYSTEM_FLG = 'GP')
AND C.EMPLID = B.EMPLID)
having count(*) > 0","Symptoms: The retro pay calendar is not calculated when an employee has a retroactive calculation begin date that does not match the earliest Job record row.

Cause: This can happen due to backdated hire date change where the trigger will not be processed. 

Solution:  To correct the data for the employees returned by the above script follow the below steps:

1. Navigate to Global Payroll & Absence Mgmt > Payee Data > Create Overrides > Assign Retro Limits
2. Search for the problematic EMPLID
3. Update the field ""No Retro Processing Before"" with a date that matches the earliest effective date from Job Data page (Workforce Administration > Job Information > Job Data)
4. Save the change

For more details, please refer to PSFT Global Payroll - Employees Whose Retro Calculation Begin Date Does Not Match Earliest JOB Record (Doc ID 2579771.1).",INSTALLED_PAY_GBL,Employee retro calculation date mismatch,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if employees Retro calculation begin date does not match with the earliest Job record. This is caused due to backdated hire date change where the trigger will not be processed.,,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_INVALID_FIELDS_IN_ARRAY_RECORD_DEFN,2576621.1,"Select 'Review ' || count(*) || ' Array(s) With Invalid Fields In Record Definition' AS KEY_DATA, 'PSFT Global Payroll - Invalid Fields In Array Record Definition (Doc ID 2576621.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT
DISTINCT ('Record Name = ' || A.RECNAME || '; PIN Number = ' || A.PIN_NUM || '; Element Name = '|| C.PIN_NM || '; Field Name = ' || B.FIELDNAME || '; Variable Number = ' || B.PIN_VAR_NUM || '; Country = ' || C.COUNTRY) AS KEY_DATA
FROM SYSADM.PS_GP_ARRAY A,
SYSADM.PS_GP_ARRAY_FLD B,
SYSADM.PS_GP_PIN C,
SYSADM.PS_GP_PIN D
WHERE A.PIN_NUM = B.PIN_NUM
AND A.PIN_NUM = C.PIN_NUM
AND B.PIN_NUM = C.PIN_NUM
AND B.PIN_VAR_NUM = D.PIN_NUM
AND B.FIELDNAME NOT IN (SELECT E.FIELDNAME FROM SYSADM.PSRECFIELDALL E
WHERE E.RECNAME = A.RECNAME)
AND EXISTS (SELECT 'X' FROM SYSADM.PSRECDEFN
WHERE RECNAME = A.RECNAME
))
having count(*) > 0","Symptoms: The GPPDPRUN process (used for running both Payroll and Absences) will end in error and there will be miscalculations as well when there are invalid Fields in the Array record definition. 

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To fix the Arrays with invalid Fields in record definition, follow the instructions below:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements > Supporting Elements > Arrays
2. Search the Element Name that needs to be modified
3. Go to Field Map and Keys, in Map Retrieved Fields to Variable Elements grid correct the invalid field.
4. Save the change

For more details, please refer to PSFT Global Payroll - Invalid Fields In Array Record Definition (Doc ID 2576621.1).",INSTALLED_PAY_GBL,Invalid Fields in Array record definition,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies invalid Fields in Array record definition. If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_ELEMENTS_WITH_DUPLICATE_NAMES,2583254.1,"select 'Y' as EVENT
, count(*) || ' Elements found with duplicate names' as KEY_DATA
, 'Proposed solution: PSFT Global Payroll - Elements With Duplicate Names (Doc ID 2583254.1)' as SOLUTION
from (
SELECT DISTINCT
('Country = ' || A.COUNTRY || ';
PIN Number = ' || A.PIN_NUM || ';
Element Name = ' || A.PIN_NM) AS KEY_DATA
FROM SYSADM.PS_GP_PIN A, SYSADM.PS_GP_PIN B
WHERE A.USED_BY = 'A'
AND A.PIN_NM = B.PIN_NM
AND A.PIN_NUM <> B.PIN_NUM
OR
(A.USED_BY = 'C' AND A.COUNTRY = B.COUNTRY
AND A.PIN_NM = B.PIN_NM
AND A.PIN_NUM <> B.PIN_NUM)
) having count(*) >= 1","Symptoms: After running GPPDPRUN process (used for running both Payroll and Absences) there will be miscalculations if there are Elements with duplicate names on GP_PIN table.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution: To fix the Elements with duplicate names on GP_PIN, navigate to the page specific of the element type returned:

1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Elements:
    a. Payroll Elements for Earnings and Deductions
    b. Absence Elements for Absence Entitlements and Absence Takes
    c. Supporting Elements for Accumulators, Arrays, Brackets, Formulas and so forth
2. Search the Element Name that needs to be modified
3. On the first tab of the Element, the field ""Name"" should be modified accordingly
4. Save the change

For more details, please refer to PSFT Global Payroll - Elements With Duplicate Names (Doc ID 2583254.1).",INSTALLED_PAY_GBL,Elements with duplicate names,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies when more Elements are defined with same Name on PS_GP_PIN (Global Payroll Pay Item Names table). If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_DUPLICATE_PIN_CODE,2576172.1,"Select 'Review ' || count(*) || ' Element(s) With The Same PIN Code' AS KEY_DATA, 'PSFT Global Payroll - More Than One Element Exists With The Same PIN Code (Doc ID 2576172.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT ('Country = ' || COUNTRY || '; PIN Code = ' || PIN_CODE ) AS KEY_DATA
FROM SYSADM.PS_GP_PIN
GROUP BY COUNTRY , PIN_CODE
HAVING COUNT(*) > 1)
having count(*) > 0","Symptoms: The GPPDPRUN process (used for running both Payroll and Absences) will end in error and there will be miscalculations as well when there are more elements having the same PIN_CODE. 

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  When an element name is created, the system assigns the element a PIN code and a PIN number. As per PeopleBooks Understanding PIN Codes and PIN Numbers, an element name can be renamed, but the PIN code is a constant.

In order to correct the elements that have the same PIN_CODE, please raise a Service Request with the Global Payroll Core Support team.
Product: PeopleSoft Enterprise HCM Global Payroll Core 
Problem Type: Elements - Framework

For more details, please refer to PSFT Global Payroll - More Than One Element Exists With The Same PIN Code (Doc ID 2576172.1).",INSTALLED_PAY_GBL,Duplicate PIN code,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,MON,"If duplicate PIN code, Payroll Process GPPDPRUN will run to error",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_TL_CALENDAR_SET_FOR_PAYGROUP_NOT_FOUND,2579775.1,"Select 'Review ' || count(*) || ' Period ID(s) Missing From GP_CAL_PRD Record' AS KEY_DATA, 'PSFT Global Payroll - Invalid Fields In Array Record Definition (Doc ID 2576621.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
( 'Calendar ID = ' || A.CAL_ID ||'; Period ID = ' || A.CAL_PRD_ID ||'; Pay Group = ' || A.GP_PAYGROUP ) AS KEY_DATA
FROM SYSADM.PS_GP_CALENDAR A, SYSADM.PS_GP_RUN_TYPE B
WHERE A.RUN_TYPE=B.RUN_TYPE
AND B.CALC_TYPE='P'
AND NOT EXISTS (SELECT C.CAL_PRD_ID FROM SYSADM.PS_GP_CAL_PRD C WHERE A.CAL_PRD_ID=C.CAL_PRD_ID ))
having count(*) > 0","Symptoms:  Period IDs that are entered on the Calendar set up for the PayGroup, should exist in the GP_CAL_PRD record.

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To correct the Calendar ID setup, follow the below instructions:

Create the Period ID defined on the Calendar ID:
  1. Navigate to Global Payroll & Absence Mgmt > Absence and Payroll Processing > Define Calendars > Periods
  2. Add a New Value with the Period ID value that is missing
  3. Save the change

OR

Add an existing Period ID to the Calendar ID:
  1. Navigate to Global Payroll & Absence Mgmt > Absence and Payroll Processing > Define Calendars > Calendars
  2. In the Definition Tab, modify the value for the Period ID field
  3. Save the change

For more details, please refer to PSFT Global Payroll - Period ID defined on Calendar Setup is missing from GP_CAL_PRD record (Doc ID 2579775.1).",INSTALLED_PAY_GBL,Paygroup calendar not found,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies all Period ID entered as the T&L Calendar on the Calendar set up for the PayGroup that are not found in the GP CAL PRD table. These are important for any Payroll to run properly, will be more helpful to verify this setup during the first Payroll for any fiscal year.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_ELEMENT_NOT_ON_OTHER_ELEMENT_DEF,2576615.1,"Select 'Review ' || count(*) || ' Element(s) Not Referenced On Other Elements Definition' AS KEY_DATA, 'PSFT Global Payroll - Element Not Referenced On Other Element Definitions (Doc ID 2576615.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || A.COUNTRY ||
'; Element Type = ' || A.PIN_TYPE ||
'; PIN Number = ' || A.PIN_NUM ||
'; Element Name = ' || A.PIN_NM ||
'; PIN Code = ' || A.PIN_CODE) AS KEY_DATA
FROM SYSADM.PS_GP_PIN A left join SYSADM.PS_GP_PINMAP_EFFDT B
on B.PIN_MBR_NUM = A.PIN_NUM
WHERE B.PIN_MBR_NUM IS NULL
AND A.PIN_TYPE NOT IN ('AA', 'AC', 'EG', 'PR', 'SY')
AND A.PIN_NUM > 2000)
having count(*) > 0","Symptoms: The GPPDPRUN process (used for running both Payroll and Absences) will end in error and there will be miscalculations as well when there is an element that is not referenced on other elements definitions.

Cause: This can happen due to packaging error or invalid application of package, basically we can have this check done after taking up any PUM updates as this will cause erroneous data and inconsistent element details.

So having this corrected will make sure the element relationships are proper and accurate.
Also, it is a good reminder in case a new element is created and not used in another element's definitions (orphaned).

Solution:  In order to correct the elements that are not referenced on other elements' definitions, please raise a Service Request with the Global Payroll Core Support team.
Product: PeopleSoft Enterprise HCM Global Payroll Core 
Problem Type: Elements - Framework

For more details, please refer to PSFT Global Payroll - Element Not Referenced On Other Elements Definition (Doc ID 2576615.1).",INSTALLED_PAY_GBL,Elements unreferenced on other elements definitions,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,"This metric identifies Element that are not Reference on other element definitions. If these rows are not correctly promptly, they can cause erroneous data and inconsistent element details. So having this corrected will make sure the element details are proper and accurate.",,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_GP_ELEMENT_GROUPS_NOT_REFERENCED,2576659.1,"Select 'Review ' || count(*) || ' Element Group(s) Not Referenced By Eligibility Groups' AS KEY_DATA, 'PSFT Global Payroll - Element Groups Not Referenced by Eligibility Groups (Doc ID 2576659.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT
('Country = ' || A.COUNTRY || '; Element Type = ' || A.PIN_TYPE || '; PIN Number = ' || A.PIN_NUM || '; Element Name = ' || A.PIN_NM || '; PIN Code = ' || A.PIN_CODE || '; Element Group Use = ' || B.ELEM_GRP_USE_OPTN || '; Translate Long Name = ' || C.XLATLONGNAME) AS KEY_DATA,
'Proposed solution: PSFT Global Payroll - Element Groups Not Referenced by Eligibility Groups (Doc ID 2576659.1)' AS SOLUTION,
'Y' as EVENT_RAISED
FROM SYSADM.PS_GP_PIN A,
SYSADM.PS_GP_ELEM_GRP B,
SYSADM.PSXLATITEM C
WHERE A.PIN_TYPE = 'EG'
AND A.PIN_NUM = B.PIN_NUM
AND C.FIELDNAME = 'ELEM_GRP_USE_OPTN'
AND C.FIELDVALUE = B.ELEM_GRP_USE_OPTN
AND ((B.ELEM_GRP_USE_OPTN = 'ELG'
AND NOT EXISTS(SELECT 'X' FROM SYSADM.PS_GP_ELIG_GRP_MBR WHERE PS_GP_ELIG_GRP_MBR.PIN_ELEM_GRP_NUM = A.PIN_NUM))
OR (B.ELEM_GRP_USE_OPTN = 'ELN'
AND NOT EXISTS(SELECT 'X' FROM SYSADM.PS_GP_ELN_SET_LST WHERE PS_GP_ELN_SET_LST.PIN_ELEM_GRP_NUM = A.PIN_NUM))
OR (B.ELEM_GRP_USE_OPTN = 'ALL'
AND NOT EXISTS(SELECT 'X' FROM SYSADM.PS_GP_ELIG_GRP_MBR WHERE PS_GP_ELIG_GRP_MBR.PIN_ELEM_GRP_NUM = A.PIN_NUM)
AND NOT EXISTS(SELECT 'X' FROM SYSADM.PS_GP_ELN_SET_LST WHERE PS_GP_ELN_SET_LST.PIN_ELEM_GRP_NUM = A.PIN_NUM))))
having count(*) > 0","Symptoms: After running the process GPPDPRUN (used for both Absence and Payroll run) , the following messages can be displayed in Payee Messages page:

""Eligibility Group %1 could not be found.  Payment resolution is terminated. (17005,941)
Eligibility Group could not be found. Segment is set in error without being processing Eligibility Groups are setup at the Pay Group level.
Go to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Framework > Organizational > Eligibility Groups (check definition), and Pay Groups (for segments found in error).""

Or

""Eligibility Group %1 is not active as of %2.  Payment resolution is terminated. (17005,942)
Eligibility Group is not active within the time period of the segment. Segment is set in error without being processed Eligibility Groups are setup at the Pay Group level.
Go to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Framework > Organizational > Eligibility Groups (check definition), and Pay Groups (for segments found in error).""

Cause: This can occur due to packaging error, invalid application of package, or SQL updates directly in the table.

Solution:  To add the element group returned by the above script to an Eligibility Group, follow the below instructions:
1. Navigate to Set Up HCM > Product Related > Global Payroll & Absence Mgmt > Framework > Organizational > Eligibility Groups > Eligibility Groups
2. Add the element group returned, by the script , to the Eligibility Group it belongs
3. Next, after you have identified the Eligibility Group, go to Eligibility Group Members grid, click the ""+"" sign and add the element group
4. Save the change

For more details, please refer to PSFT Global Payroll - Element Groups Not Referenced by Eligibility Groups (Doc ID 2576659.1).",INSTALLED_PAY_GBL,Groups not referenced,,2,PeopleSoft Enterprise HCM Global Payroll Core,GENRAL,,WEEK,SUN,The process GPPDPRUN (used for both Absence and Payroll run) will cause erroneous data and inconsistent element details if element groups are not referenced by Eligibility groups.,,PeopleSoft Human Capital Management,PeopleSoft Global Payroll
PSFT_HR_DIRECT_REPORTS_TABLE_CHECK,2850734.1," SELECT ('Direct Rpts 2 = ' || HR_DR_READY_2 || ' Direct Rpts 2 Dttm = ' || HR_DR2BLD_DTTM || ' Direct Rpts 3 = ' || HR_DR_READY_3 || ' Direct Rpts 3 Dttm = ' || HR_DR3BLD_DTTM || ' Direct Rpts 4 = ' || HR_DR_READY_4 || '  Direct Rpts 4 Dttm = ' || HR_DR4BLD_DTTM || '  Direct Rpts 5 = ' || HR_DR_READY_5 || '  Direct Rpts 5 Dttm = ' || HR_DR5BLD_DTTM || '  Direct Rpts 6 = ' || HR_DR_READY_6 || '  Direct Rpts 6 Dttm = ' || HR_DR6BLD_DTTM)
KEY_DATA, 'Investigate possible staleness in PS_HR_DR_CONTROL table' ACTION, 'Y'
AS EVENT FROM SYSADM.PS_HR_DR_CONTROL WHERE
((HR_DR_READY_2 = 'N' and (exists (select 'X' from SYSADM.PS_SS_LINK_TBL where access_type = '2') or exists (select 'X' from SYSADM.ps_hr_dr_ui_cfg where access_type = '2')) ) or ( hr_dr2bld_dttm < sysdate - 2 and HR_DR_READY_2 = 'Y'))
or ((HR_DR_READY_3 = 'N' and (exists (select 'X' from SYSADM.PS_SS_LINK_TBL where access_type = '3') or exists (select 'X' from SYSADM.ps_hr_dr_ui_cfg where access_type = '3')) ) or ( hr_dr3bld_dttm < sysdate - 2 and HR_DR_READY_3 = 'Y'))
or ((HR_DR_READY_4 = 'N' and (exists (select 'X' from SYSADM.PS_SS_LINK_TBL where access_type = '4') or exists (select 'X' from SYSADM.ps_hr_dr_ui_cfg where access_type = '4')) ) or ( hr_dr4bld_dttm < sysdate - 2 and HR_DR_READY_4 = 'Y'))
or ((HR_DR_READY_5 = 'N' and (exists (select 'X' from SYSADM.PS_SS_LINK_TBL where access_type = '5') or exists (select 'X' from SYSADM.ps_hr_dr_ui_cfg where access_type = '5')) ) or ( hr_dr5bld_dttm < sysdate - 2 and HR_DR_READY_5 = 'Y'))
or ((HR_DR_READY_6 = 'N' and (exists (select 'X' from SYSADM.PS_SS_LINK_TBL where access_type = '6') or exists (select 'X' from SYSADM.ps_hr_dr_ui_cfg where access_type = '6')) ) or ( hr_dr6bld_dttm < sysdate - 2 and HR_DR_READY_6 = 'Y'))","Symptoms: Users are not able to access Company Directory / Org Chart viewer
 

Cause:  Setup of the Org Chart or Company Directory not done correctly. 


Solution:

In order to use the Org Chart Viewer functionality, you need to perform these tasks:

Step 1: Run the Direct Reports Table Build process using the Direct Reports Tables Build Page to update the direct reports for managers with current information.

Navigation:
Set Up HCM > Common Definitions > Direct Reports for Managers > Direct Reports Table Build > Direct Reports Tables Build

Step 2: Build a job tree. The system administrator will need to build trees, either manually or through the Job Build Tree Run Control page, using the proper tree structure. This will support the organizational charts that show the hierarchies of people according to their job information.

Navigation:
Set Up HCM > Common Definitions > Org Chart Viewer > Tree Builder Run Control
Set Up HCM > System Administration > Utilities > Job Tree Builder > Tree Builder Run Control

Step 3: Update the Company Directory (HC_COMPANY_DIRECTORY) folder definition to ensure the tree name is equal to the tree created in step 1. This information is used for the Org Chart Viewer, Company Directory folder.

Navigation: PeopleTools > Portal > Structure and Content
Note: This step needs to be performed any time the tree name is changed.

Step 4: Set up the Org Chart Viewer pages. The system administrator will need to set up the rules for the organizational chart and profiles, both of which are presented in all of the Org Chart Viewer pages.

a - Map fields for the org chart and profile pages

Navigation:
Set Up HCM > Common Definitions > Org Chart Viewer > Chart and Profile Field Map > Chart and Profile Field Map

b - Define additional contact types

Navigation:
Set Up HCM > Common Definitions > Org Chart Viewer > Additional Contact Types > Additional Contact Types

c - Set up the org chart and profile settings for each org view typeCompany Directory, Company Directory FluidDirect-Line Reports, and Matrix Reports

Navigation:
Set Up HCM > Common Definitions > Org Chart Viewer > Chart and Profile Settings > Chart and Profile Settings

Step 5: Establish the hierarchy for the Direct-Line Reports tab by configuring the Access Type value for the HRCD_CO_DIRECTORY component.

Navigation:
Set Up HCM > Common Definitions > Direct Reports for Managers > Direct Reports Interface

Step 6: Create matrix teams

Navigation:
Set Up HCM > Common Definitions > Org Chart Viewer > Setup Matrix Teams > Matrix Team

Step 7: Create dotted line reports.

Navigation:
a - HR Administration navigation collection : Select Workforce Administrator from the fluid banner, Then select the HR Administration tile. It will appear as one of the page tab options in the left panel.
b - Dotted Line tile. You will need to add the tile to a fluid home page to use this option.

The combined setup pages enable you to configure the hierarchies and information you want to display on each of the pages.

For more details, please refer to the PeopleSoft Online Help Section on Workforce Data Management > PeopleSoft Human Resources Administer Workforce > Understanding Org Chart Viewer and Company Directory Features and Functionality > Setting Up the Org Chart Viewer and Company Directory",HR,Direct reports table check,,2,PeopleSoft Enterprise HCM Human Resources,CompDir,,DAY,1,User cannot access the company directory.,Project to Profit,PeopleSoft Human Capital Management,PeopleSoft Human Resources
PSFT_HR_EMAIL_FORMAT_CHECK,1988094.1,"select 'Y' as EVENT,
count(*) || ' User ID emails are invalid or contain characters which are not permitted' as KEY_DATA,
'E-WF: How to Handle the Invalid Email Address Before/After Sending Email Out Using the Notification Template. (Doc ID 1988094.1)' as SOLUTION
from SYSADM.psoprdefn where emailid <> ' ' and (emailid NOT LIKE '%_@_%_.__%' OR
(emailid LIKE '%>%') OR
(emailid LIKE '%(%') OR
(emailid LIKE '%)%') OR
(emailid LIKE '%[%') OR
(emailid LIKE '%]%') OR
(emailid LIKE '%;%') OR
(emailid LIKE '%:%') OR
(emailid LIKE '%,%') OR
(emailid LIKE '%/%'))
having count(*) >= 1","Symptoms:

Whenever email addresses are invalid (they contain characters which are not permitted) Application Engine processes error out. 

Is there any delivered functionality to handle errors involving invalid email addresses in AE, so that the invalid email IDs can be captured and logged, and the AE can continue processing the rest of the email IDs?
 

Cause: 

The ValidateAddress method can be used to validate a comma or semicolon-separated list of email addresses which is described under mail classes. This method checks the syntax of the email address. It does not verify the domain name or the validity of the user name. 


Solution:

Using this method, the invalid email IDs can be captured and logged, and the AE can continue processing the rest of the email IDs. Following are the details on the syntax and the example usage of this method to validate an e-mail address.

**********************************
ValidateAddress Method

Syntax
ValidateAddress(addresslist)
In which addresslist is a list of email addresses in the form:
email_address1 [{,|;} email_address2] ...

Returns
A Boolean value: true if the specified email addresses are valid, false otherwise. 
When ValidateAddress returns false, the bad addresses property will contain an array of all invalid addresses.

Example
import PT_MCF_MAIL:*;
Local PT_MCF_MAIL:MCFMailUtil &emailutil = create PT_MCF_MAIL:MCFMailUtil();
Local boolean &result = &emailutil.ValidateAddress(&email.Recipients);
Local array of string &bAddresses = &emailutil.badaddresses;
If (&result = False)
  Then If (&bAddresses <> Null)
  Then &i = 0;
  While &bAddresses.Next(&i)
  Warning (""Bad email address in input = "" | &bAddresses [&i]);
  End-While;
  End-If;
End-If;

For more information please check PeopleBooks under PeopleSoft PeopleTools > PeopleCode API Reference > MCFMailUtil Class Methods",HR,Invalid email address,,2,PeopleSoft Enterprise HCM Human Resources,WORKFL,WRKFL,WEEK,MON,Looks for invalid emails in the system.,Project to Profit,PeopleSoft Human Capital Management,PeopleSoft Human Resources
PSFT_PNA_ZERO_NET_PAYCHECKS,2847677.1,"select 'Y' as EVENT
, 'Customer to review and see if check looks correct for zero gross' as SOLUTION
, count(*) || ' Zero gross checks may need to be reviewed for accuracy' as KEY_DATA
from (
select ('Company = ' || ppchk.company || '; Pay group = ' || ppchk.paygroup || '; Pay end date = ' || ppchk.pay_end_dt || '; Off cycle = ' || ppchk.off_cycle
|| '; Page number = ' || ppchk.page_num || '; Line number = ' || ppchk.line_num || '; Separate check = ' || ppchk.sepchk || '; Erncd = ' || petbl.erncd || '; Add gross = ' || petbl.add_gross ) KEY_DATA
from SYSADM.PS_PAY_CALENDAR ppcal
join SYSADM.PS_PAY_CHECK ppchk on ( ppcal.COMPANY = ppchk.COMPANY and ppcal.PAYGROUP = ppchk.PAYGROUP and ppcal.PAY_END_DT = ppchk.PAY_END_DT and ppcal.PAY_OFF_CYCLE_CAL = ppchk.OFF_CYCLE)
join SYSADM.PS_PAY_OTH_EARNS ppoerns on (ppchk.company = ppoerns.company and ppchk.paygroup = ppoerns.paygroup and ppchk.pay_end_dt = ppoerns.pay_end_dt and ppchk.off_cycle = ppoerns.off_cycle and ppchk.page_num = ppoerns.page_num and ppchk.line_num = ppoerns.line_num and ppchk.sepchk = ppoerns.sepchk )
join SYSADM.PS_EARNINGS_TBL petbl on ( ppoerns.erncd = petbl.erncd )
where ppcal.PAY_CALC_RUN='Y' and ppcal.PAY_CONFIRM_START='N' and ppchk.TOTAL_GROSS = 0 and ppchk.PAYCHECK_STATUS = 'C' and upper(petbl.add_gross)='Y'
) having count(*) >= 1","Paycheck with zero dollars could indicate to an issue with some employees not be paid correctly.  Review the employee's calculated paycheck and determine if this was the intended outcome.

EPY: Paycheck has Zero Dollar? (Doc ID 2847677.1)",INSTALLED_PAY_NA,Zero dollar paychecks,,2,PeopleSoft Enterprise HCM Payroll for North America,PYCHECKS,PYCHKS,WEEK,MON,Paycheck is zerodollars and could point to an issue with some employees not be paid correctly.  Intended to be validated.,,PeopleSoft Human Capital Management,PeopleSoft North American Payroll
PSFT_PNA_DUPLICATED_PAYCHECK_NUMBER,2847956.1,"select 'Y' as EVENT
, 'Verify if duplicate paychecks are an issue - refer to EPY: Paychecks Have Duplicate Paycheck Numbers For Same Form ID. (Doc ID 2847956.1)' as SOLUTION
, count(*) || ' potential duplicate data detected in paychecks.' as KEY_DATA
from (
select distinct
('Form ID = '||a.FORM_ID ||'; Company = ' || a.COMPANY || '; Pay group = ' || a.PAYGROUP || '; Duplicate of paycheck nbr = '|| PAYCHECK_NBR || '; Count of paycheck nbr = '|| COUNT(a.PAYCHECK_NBR) ) as KEY_DATA
from SYSADM.ps_pay_check a
join SYSADM.ps_pay_form_tbl b on (a.form_id=b.form_id)
where a.paycheck_status <> 'r'
group by a.form_id, a. company, a.paygroup, a.paycheck_nbr
having count(a.paycheck_nbr) > 1
) having count(*) >= 1",Review document EPY: Paychecks Have Duplicate Paycheck Numbers For Same Form ID. (Doc ID 2847956.1) to determine the paycheck's identified with duplicate check numbers.,INSTALLED_PAY_NA,Duplicate pay check number,Check if duplicate pay Check numbers exist.,2,PeopleSoft Enterprise HCM Payroll for North America,PYCHECKS,PYCHKS,DAY,1,Same check number has been issued more than once this could lead to reconciliation issues,,PeopleSoft Human Capital Management,PeopleSoft North American Payroll
PSFT_PNA_INCORRECT_TAX_DATA_SETUP,2847977.1,"select  'Y' as EVENT
, 'Proposed solution: Update Ps_Fed_Tax_Data and Ps_State_Tax_Dat tables with either Y or N values. Refer to EPY: Employee Tax Data Setup Incorrect (Doc ID 2847977.1)' as SOLUTION
, count(*) || ' employees with invalid tax setup detected' as KEY_DATA
from (
select
distinct ('Employee Id = '|| a.EMPLID ||'; Company = ' || a.COMPANY || '; Effective date = ' || a.EFFDT ) as KEY_DATA
From SYSADM.Ps_Fed_Tax_Data A
Join SYSADM.Ps_State_Tax_Data B On (A.Emplid=B.Emplid and A.Company=B.Company and A.Effdt=B.Effdt)
where a.EIC_STATUS not in('Y', 'N') and a.FUT_EXEMPT not in('Y', 'N') and a.MARRIED_FILE_SINGL not in('Y', 'N') and B.EIC_STATUS_ST not in('Y', 'N')
) having count(*) >= 1",Review document Kdoc EPY: Employee Tax Data Setup Incorrect (Doc ID 2847977.1) to resolve differences between Employee Tax Data and the Employee's payline.,INSTALLED_PAY_NA,Incorrect tax data setup,,2,PeopleSoft Enterprise HCM Payroll for North America,PYTAXES,OTHTAX,DAY,1,Could prevent the employee from being paid,,PeopleSoft Human Capital Management,PeopleSoft North American Payroll
PSFT_PNA_PSCPFDST_ARRAY,1579224.1,"select distinct 'Y' as EVENT
, 'Proposed solution: EPY: Commitment Accounting Actuals Distribution PSPPFUND Error Message ID 000513 -""""The maximum rows have been exceeded in the Funding Array"""" (Doc ID 1579224.1)' as SOLUTION
, Count(*) || ' instances where maximum delivered Funding Array Size exceeded' as KEY_DATA
from (
Select Distinct
('Company = ' || A.Company|| '; Pay group = ' || A.Paygroup || '; Pay end date = ' || A.Pay_End_Dt || '; Off cycle = ' || A.Off_Cycle || '; Page number = ' || A.Page_Num || '; Line number = ' || A.Line_Num|| '; Sepchk = ' || A.Sepchk ) KEY_DATA
From SYSADM.Ps_Pay_Earnings A
Join SYSADM.Ps_Pay_Oth_Earns B On ( A.Company = B.Company And A.Paygroup = B.Paygroup And A.Pay_End_Dt = B.Pay_End_Dt And A.Off_Cycle = B.Off_Cycle And A.Page_Num = B.Page_Num And A.Line_Num = B.Line_Num And A.Sepchk = B.Sepchk And A.Addl_Nbr = B.Addl_Nbr)
Join SYSADM.Ps_Pay_Calendar C On ( A.Company = C.Company And A.Paygroup = C.Paygroup And A.Pay_End_Dt = C.Pay_End_Dt)
Where A.Ok_To_Pay='Y' And C.Pay_Confirm_Run = 'Y' And C.Pay_Dist_Run = 'N' And
'Y'= Case
When 'Y'=(Select Gl From SYSADM.Ps_Installation Where Gl = 'Y') Then 'Y'
Else 'N' end
Group By A.Company, A.Paygroup, A.Pay_End_Dt,A.Off_Cycle, A.Page_Num, A.Line_Num, A.Sepchk
having Count(a.addl_nbr)>100 or count(b.ERNCD)>100
) having count(*) >= 1","Review Kdoc EPY: Commitment Accounting Actuals Distribution PSPPFUND Error Message ID 000513 -""The maximum rows have been exceeded in the Funding Array"" (Doc ID 1579224.1) and increase array size values accordingly.",INSTALLED_PAY_NA,Funding array exceeded ,,2,PeopleSoft Enterprise HCM Payroll for North America,OTHFUNC,OTHFNC,DAY,1,Funding array could be exceeded and the process runs to No Success,,PeopleSoft Human Capital Management,PeopleSoft North American Payroll
PSFT_PNA_MISSING_TAX_FORM_DEFINTION,658061.1,"select 'Y' as EVENT
,'Proposed solution: EPY: (YEMaster) Data Being Added Conflicts With Existing Data (18,2) (Doc ID 658061.1)' AS SOLUTION
,'Effective Date mismatch found on Year End Tax Form Box information' as KEY_DATA
from (
select distinct
('Tax form ID = ' || TAXFORM_ID || '; Effective date = ' || EFFDT || '; Box = ' || BOX || '; Description = ' || DESCR || '; Short description = ' || DESCRSHORT ) AS KEY_DATA
From SYSADM.Ps_Taxform_Box
Where Taxform_Id In ('W','A') And
Effdt = Case
When Trunc(Sysdate) Between To_Date('1/NOV/'||To_Char(Sysdate, 'YYYY'), 'DD/MM/YYYY') And To_Date('31/DEC/'||To_Char(Sysdate, 'YYYY'), 'DD/MM/YYYY') Then '1-JAN-'||To_Char(Sysdate, 'YYYY')
When Trunc(Sysdate) Between To_Date('1/JAN/'||To_Char(Sysdate, 'YYYY'), 'DD/MM/YYYY') And To_Date('31/JAN/'||To_Char(Sysdate, 'YYYY'), 'DD/MM/YYYY') Then '1-JAN-'||(To_Char(Sysdate, 'YYYY')-1)
End
)having count(*) >= 1","Review document Kdoc EPY: (YE Primary) Data Being Added Conflicts With Existing Data (18,2) (Doc ID 658061.1) to identify orphan rows to be SQL deleted.  Once data integrity restored, follow instructions provided in Year End Processing Guide to create effective dated row for tax reporting year.",INSTALLED_PAY_NA,Missing tax form definition,,2,PeopleSoft Enterprise HCM Payroll for North America,PYTAXES,OTHTAX,DAY,1,Year End processing will be stopped and W-2's cannot be created.,,PeopleSoft Human Capital Management,PeopleSoft North American Payroll
PSFT_PNA_EMPL_TAX_VS_PAYLINE,2847959.1,"select 'Y' as EVENT
, 'Investigate employee / add state to Tax Distribution Table' as SOLUTION
, count(*) || ' Checks found where employee may be missing some State Tax setup' as KEY_DATA
from (
select distinct
('Company = ' || ppcal.COMPANY || '; Pay group = ' || ppcal.PAYGROUP || '; Off cycle = ' || ppe.OFF_CYCLE
|| '; Page number = ' || ppe.PAGE_NUM || '; Line number = ' || ppe.LINE_NUM || '; Sepcheck = ' || ppe.SEPCHK ||
'; EMPLID = ' || pstaxd.EMPLID || '; State = ' || pstaxd.STATE || '; Locality = ' || pltaxdt.LOCALITY || '; pay end date = ' || ppe.PAY_END_DT ||
'; Effective date = ' || pstaxd.EFFDT) KEY_DATA
from SYSADM.PS_PAY_CALENDAR ppcal
join SYSADM.PS_PAY_EARNINGS ppe on ( ppcal.COMPANY = ppe.COMPANY and ppcal.PAYGROUP = ppe.PAYGROUP and ppcal.PAY_END_DT = ppe.PAY_END_DT )
join SYSADM.PS_PAY_CHECK ppc on ( ppe.COMPANY = ppc.COMPANY and ppe.PAYGROUP = ppc.PAYGROUP and ppe.PAY_END_DT = ppc.PAY_END_DT and ppe.OFF_CYCLE = ppc.OFF_CYCLE and ppe.PAGE_NUM = ppc.PAGE_NUM and
ppe.LINE_NUM = ppc.LINE_NUM and ppe.SEPCHK = ppc.SEPCHK and ppe.EmplID = ppc.EmplID and ppe.STATE = ppc.STATE)
join SYSADM.PS_STATE_TAX_DATA pstaxd on ( ppe.COMPANY = pstaxd.COMPANY and ppe.EMPLID = pstaxd.EMPLID and ppe.STATE = pstaxd.STATE and ppe.PAY_END_DT <= pstaxd.EFFDT )
join SYSADM.PS_LOCAL_TAX_DATA pltaxdt on ( ppe.COMPANY = pltaxdt.COMPANY and ppe.EMPLID = pltaxdt.EMPLID and ppe.STATE = pltaxdt.STATE and ppe.LOCALITY = pltaxdt.LOCALITY and ppe.PAY_END_DT <= pltaxdt.EFFDT )
where ppcal.PAY_CONFIRM_RUN <> 'Y'
) having count(*) >= 1",Review Kdoc EPY: Employee Tax Data conflicts with Employee's Payline During Payroll Processing. (Doc ID 2847959.1) to ensure paycheck is calculated correctly.,INSTALLED_PAY_NA,Tax data and payline do not reconcile,,2,PeopleSoft Enterprise HCM Payroll for North America,PYTAXES,OTHTAX,WEEK,MON,Any Calc or Confirm will generate an error for the employee and employee must be fixed,,PeopleSoft Human Capital Management,PeopleSoft North American Payroll
PSFT_TL_OLD_TIME_EXCEPTIONS,1319821.1,"SELECT 'Review ' || COUNT(*) || ' Old Time exception(s)' AS KEY_DATA,
'TL 8.x/9.x:Health Check Alert: Unresolved Exception: Instructions On Allowing, Resolving or Deleting. (Doc ID 1319821.1)' AS SOLUTION,
'Y' AS EVENT
FROM SYSADM.PS_TL_EXCEPTION A,SYSADM.PS_TL_EXCEPT_DEFN B WHERE EXCEPTION_STATUS='U' AND A.EXCEPTION_ID=B.EXCEPTION_ID AND B.SEVERITY='H' and DUR < CURRENT_DATE-30","Encountering performance issues in various processes across the application and processing errors during retroactive processing of time will occur if outstanding exceptions are not resolved in the PS_TL_EXCEPTION table. 

This has often led to Time Administration also generating offsetting payable time rows that were not expected and can later cause array overflow or possible over or underpayment errors if these offsets do get loaded to pay sheets.

The cause of this issue is when Time Administration runs, it looks for unresolved exceptions after it determines the list of employees to be processed. For any of these employees if there is an unresolved exception sitting in the past, the Period of Interest that Time Admin processes will be large enough to also include any unresolved exceptions.

To implement the solution, complete the following:  
Navigate to: Manager Self Service>Time Management>Approve Time and Exceptions>Exceptions.  Use your preferred selection criteria and filtering options if so desired.

I.  SQL query may also be used to view all of the exceptions in the exception table in order to identify which exceptions to allow or those that need to be acted upon by correcting the condition causing the errors and rerunning Time Administration for that period of time.

II.  Allowing an exception will enable the time to be processed and create payable time without having to resolve the issue that caused the exception.  Allowing the exception will set the status to 'A' for Allowed and will no longer be picked up by the Health Check, and will no longer appear on this page.

The time that has an exception with a Low or Medium severity level will still create payable time. The ECD would move forward and it won't process that period again. To keep things clean for low and medium go to the exception page, select all and save the page.  It should go away and it will keep on the table if they archive.  Low and medium exceptions are informational only.

Exceptions with a source of Time Administration can only be resolved by running the Time Administration process after correcting the error condition or marking them as allowed.

III.  Payable time will not be created for time with a High severity exception until it has been resolved..

Resolve outstanding exceptions and reset the Earliest Change Date (ECD). To avoid this problem from occurring in the future, the following procedure should be repeated on a monthly or quarterly basis, depending on the volume of transactions or performance degradation.

To view exceptions: Manager Self Service>Time Management>Approve Time and Exceptions>Exceptions page. If the priority is: High - correct the time and rerun the Time Administration process, Medium or Low - resolve the exceptions by either allowing them or correcting the error and reprocessing Time
Administration. 

IV.  If the exceptions are too old and the customer does not wish to retain the rows or finds a need to correct them, the customer can use SQL to delete these exceptions from the table, if that is an acceptable company policy.  If the exceptions are deleted in this manner you will also need to set the Earliest Change Date on the TL_TR_STATUS table for each employee to a date more current to avoid the exceptions from being processed over and over again with every run of Time Administration.

However, it should be noted that if the Earliest Change Date gets reset due to adjustments back to the period, the exceptions will end up being regenerated if the underlying error wasn't corrected.",TL,Old time exceptions,,3,PeopleSoft Enterprise HCM Time and Labor,TIMTION,,MONTH,1,Increased processing for Time Admin,,PeopleSoft Human Capital Management,PeopleSoft Time and Labor
PSFT_TL_NEW_YEAR_SETUP_TMZ_OFF,651982.1,"select TIMEZONE || ' timezone offsets are only built out to: ' || trunc(max(enddatetime)) as KEY_DATA ,
case
when trunc(max(enddatetime)) = TO_date('31-DEC-'||(extract(year from sysdate)),'DD-MON-YYYY')
then 'Warning: To ensure 12/31 is built out for entire day, please use 01/01/YYYY as the end date.'
else 'Query Offsets for one or more timezones has not been generated to cover the entire year. Navigate to PT>Utilities>International>Timezones. Please use End Date 01/01/YYYY.'
end as SOLUTION, 'Y' as EVENT
from SYSADM.PSTZOFFSET
group by TIMEZONE
having trunc(max( enddatetime)) <= TO_date('31-DEC-'||(extract(year from sysdate)),'DD-MON-YYYY')
order by timezone","When attempting to run Time Admin the process abends with the following error.

Error: 
Time Zone offsets have not been generated for the year 2020. (13507,46)

This is a configuration issue as a result of Time Zone offsets not being properly built out for accessing or processing.  

To implement the solution, please execute the following steps:  
Navigation: PeopleTools > Utilities > International > Define Timezones 
1. Click Generated Query Offset.  
2. Enter (ex: 01/01/2020 thru 01/01/2021).  It is suggested to generate the query offsets for several years into the future which will eliminate the problem with the current year-end.  
3. Then click OK and Save.",TL,New Year time zone offsets not generated,,2,PeopleSoft Enterprise HCM Time and Labor,TLINS,OTHTLST,MONTH,10,Calculated time could be incorrect due to the time changes not being adjusted for.,,PeopleSoft Human Capital Management,PeopleSoft Time and Labor
PSFT_TL_NEW_YEAR_SETUP_CAL,651982.1,"Select 'Review ' || count(*) || ' Period ID(s) In The Time Period Calendar; Ensure The Current Year Is Loaded' AS KEY_DATA, 'Year End Processing Considerations For Time And Labor (Doc ID 651982.1)' SOLUTION, 'Y' AS EVENT
From(
select 'Period: ' || PERIOD_ID || ' is not built out past ' || END_DT as KEY_DATA
from
(SELECT DISTINCT A.PERIOD_ID , max(PTC.END_DT) as END_DT
FROM SYSADM.PS_TL_TIME_PERIODS A
join SYSADM.PS_TL_CALENDAR PTC on (A.PERIOD_ID=PTC.PERIOD_ID)
WHERE A.PERIOD_ID NOT IN (SELECT DISTINCT B.PERIOD_ID
FROM SYSADM.PS_TL_CALENDAR B
WHERE (((TRUNC(SYSDATE , 'Year'))>B.START_DT AND (LAST_DAY(ADD_MONTHS(TRUNC(SYSDATE , 'Year'),11)) + INTERVAL '1' DAY - INTERVAL '1' SECOND)<B.END_DT) OR
((TRUNC(SYSDATE , 'Year'))<B.END_DT AND (LAST_DAY(ADD_MONTHS(TRUNC(SYSDATE , 'Year'),11)) + INTERVAL '1' DAY - INTERVAL '1' SECOND)>B.START_DT)))
group by A.PERIOD_ID))
having count(*) > 0","When attempting to run Time Admin or user tries to pull up Timesheet and receives the following message.

Message: 
Calendar with Period ID not built out to cover 2010-10-08 through 2018-08-30.

This is a configuration issue as a result of Time Period calendars not being properly built out for accessing or processing.  

To implement the solution, please execute the following steps:  

Navigation: Set Up HCM > Product Related > Time and Labor > Time Periods > Build Time Period Calendar > Build Time Period Calendar 

1. Determine all period ID's associated with the time reporters to process through the Time Administration process. Period ID's are associated with:
  Workgroups
  Rules

2. Determine the maximum and minimum dates among the following:
The Process Date on the Process Time Admin Page.
The DUR (date under report) in TL_RPTD_ELPTIME.
The PUNCH_DTTM in TL_RPTD_PCHTIME.

3. Determine where the minimum date found in step two intersects the time reporting period for the workgroup to process.

Build the calendar at least as far into the past as the start of this period. And if this minimum date intersects a rule period belonging to a rule in the workgroup's rule program, and the rule requires time data from before the workgroup period, build the calendar as far into the past as the final period of interest start date.

4. Determine where the maximum date found in step two intersects the time reporting period for the workgroup to process.

Build the calendar at least as far forward into the future as the end of this period. And if this maximum date intersects a rule period belonging to a rule in the workgroup's rule program, and the rule requires time data from days following the workgroup period, build the calendar as far into the future as the end of the rule period.

Additional information is documented in TL PeopleBooks under Building and Viewing Time Period Calendars.",TL,New Year Calendar not built,,2,PeopleSoft Enterprise HCM Time and Labor,TLINS,OTHTLST,MONTH,12,Missed periods will lead to failures in Time Admin.,,PeopleSoft Human Capital Management,PeopleSoft Time and Labor
PSFT_TL_NEW_YEAR_SETUP_LOAD_DT,651982.1,"select 'TL Dates table is not built out to cover the recommended range' as KEY_DATA, 'Year End Processing Considerations For Time And Labor (Doc ID 651982.1)' as SOLUTION, 'Y' as EVENT
from (
select distinct 'TL DATES table is only built out to ' || (extract (year from the_date)) As KEY_DATA,
'Year End Processing Considerations For Time And Labor (Doc ID 651982.1)' as SOLUTION, 'Y' as EVENT
from SYSADM.PS_TL_DATES_TBL
where not exists(
select 'X' from SYSADM.ps_tl_dates_tbl where calendar_year >= extract(year from sysdate)+2
) and calendar_year = (select max(calendar_year) from SYSADM.ps_tl_dates_tbl)
) having count(*) > 0","Load dates into your Time and Labor system when you implement the system and each time you approach the end of the loan period.

This will eliminate Time Admin processing delays when all dates are properly built out and in place for time entry and processing.  

To implement the solution, please execute the following steps:  
Navigation: Set Up HCM > Install > > Product Specific > Time and Labor Installation

1. Click on the Configurations tab then click the Load Dates link.  
2. Enter the number of years for the system to load into the database. The system will enter the dates for the number of years you entered, backward and forward. For example, if you entered 2, the system would load two years backward and two years forward. The maximum number of years to enter is 10.
3. Click to Load Dates.
4. Click to return to the Configurations page.

The information documented in TL PeopleBooks under Setting Up System Defaults and Loading Dates > Configurations Page > Load Dates",TL,New Year time periods not defined,,2,PeopleSoft Enterprise HCM Time and Labor,TLINS,,MONTH,12,Time periods not defined and Time Admin will not process the time,,PeopleSoft Human Capital Management,PeopleSoft Time and Labor
ARCHIVE_OLD_LOG_FILES,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,DAY,1,Predict whether old and/or large Log files exist and can be removed to reclaim space,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
QUEUED_PROCESS_PSPUBHND,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,15,Predict whether the message processing is within acceptable limits,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
QUEUED_PROCESS_PSSUBDSP,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,16,Predict whether the message processing is within acceptable limits,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
QUEUED_PROCESS_PSSUBHND,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,17,Predict whether the message processing is within acceptable limits,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
QUEUED_PROCESS_PSBRKDSP,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,13,Predict whether the message processing is within acceptable limits,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
RESPONSE,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,1,Predict whether the PS Application Server Domain is available for use,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
TOTAL_TUXEDO_CONNECTIONS,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,5,<Need to check with SME/Development team>,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
FAILED_PROCESSES,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,5,Early predictor for issues with App Server,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
HIGHLY_FREQUENT_GC_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,HOUR,1,Predict whether the system is experiencing a severe number of major garbage collections and may become unstable,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
IB_QUEUE_FLOWING,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,15,Predict whether the message processing is progressing in a timely manner,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
JSH_ABORTS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,5,<Need to check with SME/Development team>,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
JSH_LOAD,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,5,Determines whether the AppServer domain is undersized,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
WSH_ABORTS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,5,<Need to check with SME/Development team>,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
WSH_LOAD,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,5,Determines whether the AppServer domain is undersized,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
TUXEDO_SERVICE_ERROR_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,HOUR,1,Notification about the increase in Tuxedo Errors on the  System,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
RESPONSE_PROCESS_MONITOR,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,1,Determine status of Process Scheduler Monitor,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
STUCK_PS_PROCESS_METRICS_DATA,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,Display the processes that have been in processing  status for 30+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
UNALLOCATED_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,Determine the number processes that are not assigned to a Process scheduler server for 30+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
UNALLOCATED_METRICS_DATA,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,Determine the number processes that are not assigned to a Process scheduler server for 30+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
DATABASE_JOB_STATUS_FAILED_JOB_COUNT,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,5,Verifies whether jobs within the system were able to run successfully during the last run,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
DB_ALERT_LOG_ARCHIVER_HUNG_ALERT_LOG_ERROR,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,15,Predicts whether the archiver of the database being monitored has been temporarily suspended since the last sample time.,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
DB_ALERT_LOG_DATA_BLOCK_CORRUPTION_ALERT_LOG_ERR,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,15,Predicts whether  data block(s) within the monitored database have been corrupted,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
TABLESPACES_FULL_TABLESPACE_SPACE_USED,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,30,Early predictor to warn if a tablespace is running out of free space,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
RESPONSE_STATE,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,5,Predicts whether the Pluggable database is accessible,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
PSFT_IMPLEMENTATION_TEST_SQL,,"SELECT DISTINCT COUNT(*) AS COUNT
FROM SYSADM.PSOPRDEFN;",This SR was raised to test the MAU implementation setup and does not highlight any problem in the system. There is no further action that needs to be taken from either support or customer. This SR can be closed.,,Implementation Test,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,1,SQL Metric Extension for auto SR implementation testing,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
PS_PROCESS_SUCCESS_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,30,Determine the number of processes that were successfully run in last hour,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESSES_IN_INITIATED_STATUS_FOR_MORE_THAN_30,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,Display the processes that have been initiated but have not been executed for 30+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PSFT_PT_IB_STUCK_QUEUE,1350404.1,"Select 'Review ' || count(*) || ' IB Messaging Transaction(s) Stuck In Working Status' AS KEY_DATA, 'E-IB: Messaging Transactions Stuck In Working - How to Cancel? (Doc ID 1350404.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT DISTINCT 'TransactionID=' || A.IBTRANSACTIONID || ',Service Operation=' ||
A.IB_OPERATIONNAME || ',Queue=' || A.QUEUENAME || ',Status=' || A.STATUSSTRING
KEY_DATA
FROM SYSADM.PSAPMSGPUBHDR A
, SYSADM.PSQUEUEDEFN Q
WHERE A.PUBSTATUS IN (0,6)
AND Q.QUEUESTATUS=1
AND Q.THRUPUTTYPE IN (0,2)
AND Q.QUEUENAME=A.QUEUENAME
AND EXISTS (
SELECT 1
FROM SYSADM.PSAPMSGDOMSTAT
WHERE DOMAIN_STATUS='A' )
UNION ALL
SELECT DISTINCT 'TransactionID=' || A.IBTRANSACTIONID || ',Service Operation=' ||
A.IB_OPERATIONNAME || ',Queue=' || A.QUEUENAME || ',Status=' || A.STATUSSTRING
KEY_DATA
FROM SYSADM.PSAPMSGPUBCON A
, SYSADM.PSQUEUEDEFN Q
WHERE A.PUBCONSTATUS IN (0,6)
AND Q.QUEUESTATUS=1
AND Q.THRUPUTTYPE IN (0,2)
AND Q.QUEUENAME=A.QUEUENAME
AND EXISTS (
SELECT 1
FROM SYSADM.PSAPMSGDOMSTAT
WHERE DOMAIN_STATUS='A' )
UNION ALL
SELECT DISTINCT 'TransactionID=' || A.IBTRANSACTIONID || ',Service Operation=' ||
A.IB_OPERATIONNAME || ',Queue=' || A.QUEUENAME || ',Status=' || A.STATUSSTRING
KEY_DATA
FROM SYSADM.PSAPMSGSUBCON A
, SYSADM.PSQUEUEDEFN Q
WHERE A.SUBCONSTATUS IN (0,6)
AND Q.QUEUESTATUS=1
AND Q.THRUPUTTYPE IN (0,2)
AND Q.QUEUENAME=A.QUEUENAME
AND EXISTS (
SELECT 1
FROM SYSADM.PSAPMSGDOMSTAT
WHERE DOMAIN_STATUS='A')
)
having count(*) > 0","How to cancel an Integration Broker messaging transaction that got stuck in Working status?

SOLUTION:

The following steps will cancel a transaction in working status:

1. On the domain status page, set the domain to inactive (navigation is Peopletools > Integration broker > Service Operation Monitor > Administration > Domain Status

2. Then in the Service Operation Monitor (navigation is Peopletools > Integration broker > Service Operation Monitor > Monitoring) is the transaction in WORKING or NEW status at this time?

3. If the transaction is in NEW status do the following:

3.1 Select the transaction and click cancel.

3.2 Activate the Domain again.

4. If the transaction is still in WORKING Status, it needs to set to canceled from the back end. To do so, use the steps in 4.1 to first determine if the transaction is in working status in the operation instance, publication contract or subscription contract.

4.1 Execute the following SQL SELECT to determine which transaction needs to be changed to CANCEL:

 If Operation Instance:
SELECT IBTRANSACTIONID, PUBSTATUS, from PSAPMSGPUBHDR WHERE PUBSTATUS =3 and IBTRANSACTIONID ='<transaction id>' and STATUSSTRING ='WRKNG'

If Publication Contract:
SELECT IBTRANSACTIONID, PUBCONSTATUS from PSAPMSGPUBCON where PUBCONSTATUS =3 and IBTRANSACTIONID ='<transaction id>' and STATUSSTRING ='WRKNG'

If Subscription Contract:
SELECT IBTRANSACTIONID, SUBCONSTATUS from PSAPMSGSUBCON where SUBCONSTATUS =3 and IBTRANSACTIONID ='<transaction id>' and STATUSSTRING ='WRKNG'

4.2 To cancel, execute the following SQL UPDATE for the above SELECT statement that returned a row:

If Operation Instance:
Update PSAPMSGPUBHDR set PUBSTATUS =8, STATUSSTRING = 'CNCLD', RETRYCOUNT = 0 where WHERE PUBSTATUS =3 and IBTRANSACTIONID ='<transaction id>' and STATUSSTRING ='WRKNG'

If Publication Contract:
Update PSAPMSGPUBCON set PUBCONSTATUS =8, STATUSSTRING = 'CNCLD', RETRYCOUNT = 0 where WHERE PUBCONSTATUS =3 and IBTRANSACTIONID ='<transaction id>' and STATUSSTRING ='WRKNG'

If Subscription Contract:
Update PSAPMSGSUBCON set SUBCONSTATUS =8, STATUSSTRING = 'CNCLD', RETRYCOUNT = 0 where SUBCONSTATUS =3 and IBTRANSACTIONID ='<transaction id>' and STATUSSTRING ='WRKNG'

4.3. Issue a SQL COMMIT to commit the Update.

4.4. Verify that the change was made by executing the SQL SELECT below for the particular table updated in 4.2.

If Operation Instance:
SELECT IBTRANSACTIONID, PUBSTATUS, from PSAPMSGPUBHDR where IBTRANSACTIONID ='<transaction id>'

If Publication Contract:
SELECT IBTRANSACTIONID, PUBCONSTATUS from PSAPMSGPUBCON where IBTRANSACTIONID ='<transaction id>'

If Subscription Contract:
SELECT IBTRANSACTIONID, SUBCONSTATUS from PSAPMSGSUBCON where IBTRANSACTIONID ='<transaction id>'

4.5 Activate the domain.",PT,IB transactions stuck,,2,PeopleSoft Enterprise PT PeopleTools,INTER,,DAY,1,,,PeopleSoft Tools and Technology,PeopleSoft Integration Tools
PS_PROCESSES_IN_QUEUED_STATUS_FOR_MORE_THAN_30,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,30,Early predictor to check whether process requests are being scheduled within reasonable time,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PENDING_PROCESS_METRICS_DATA,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,Display the processes that have been queued and have not been executed for 30+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
POSTING_FOR_MORE_THAN_15_MINUTES_PROCESS_METRICS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,Display the processes that have been in posting status for 15+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
FAILED_PROCESSES_PRCS,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,5,Early predictor for issues with Process Scheduler,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESS_SCHEDULER_LOG_MONITOR,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,5,Predict whether the sub folders within the Process scheduler Log Location are within O/S limits,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESS_SCHEDULER_QUEUE_STATUS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,1,"Real-time display of the Process scheduler server, client and queue status",,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
QUEUED_PROCESS_PSDSTSRV,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,15,Determine whether the number of PSDSTSRV processes are adequate,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
QUEUED_PROCESS_PSPRCSRV,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,15,Determine whether the number of PSPRCSRV processes are adequate,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_FTP_LOG_MONITOR,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PIAY,,MIN,5,Predict whether the sub folders within the PIA FTP Location are within O/S limits,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
PS_REPORTS_MONITOR,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,REPN,,MIN,5,Predict whether the sub folders within the PIA Report repository Location are within O/S limits,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
RESPONSE_WEBSITE,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,PIAY,,MIN,1,Predict whether the PIA site is available for use,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
FAILED_PS_PROCESS_METRICS_DATA,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,1,Determine status of Process Scheduler Monitor,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
INITIATED_BUT_PENDING_PS_PROCESS_METRICS_DATA,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,1,Display the processes that have been initiated but have not been executed for 30+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
RESPONSE_PRCS,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,1,Predict whether the Process Scheduler is available for use,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
FATAL_ERROR_COUNT,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,PIAY,,HOUR,1,Predict whether the web server is experiencing any issues when running PIA servlets,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
HIGHLY_FREQUENT_GC_COUNT_PIA,,,,,,,4,PeopleSoft Enterprise PT PeopleTools,PIAY,,HOUR,1,Predict whether the system is experiencing a severe number of major garbage collections and may  become unstable,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
RESPONSE_PIA,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,PIAY,,MIN,1,Predict whether the Webserver is available for use,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
WAIT_STATE_SOCKET_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PIAY,,HOUR,1,Predict whether the Web Server sockets in WAIT are increasing thereby threatening system stability,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
PS_PROCESS_SCHEDULER_SERVER_STATUS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,1,"Real-time display of the Process scheduler server, client and queue status",,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
LOW_DISK_SPACE,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,DAY,1,Predict whether the App server machine is running out of disk space,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
MEMORY_USAGE,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,APRVER,,HOUR,1,Predict memory issues with the App Server domain,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
MEMORY_USAGE_GROWTH,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,15,Monitor the increase in memory footprint of the AppServer processes and act as an early predictor of memory issues with App Server,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
WEB_PROFILE_LOAD_ERROR_COUNT,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,PIAY,,HOUR,1,Predict whether there are web profile load errors causing degradation of online user experience,,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
APP_SERVER_QUEUES_WAIT_COUNT,,,test,,warning,warning,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,15,Determines whether the AppServer domain is undersized or if any other tuning effort is required,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
ARCHIVE_TRACESQL_FILES,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,DAY,1,Predict whether old and/or large TraceSql files exist and can be removed to reclaim space,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
PSFT_PT_PIA_HTML_CHECK,2803945.1,"select 'Y' EVENT,
'Web Profile(s) with incorrect Cache Generated HTML setting: ' || count(*) KEY_DATA,
'E-PIA: Set The Cache Generated HTML Check Box Correctly (Doc ID 2803945.1)' SOLUTION
from (
select distinct
'Web Profile: ' || nvp.webprofilename KEY_DATA
from SYSADM.PSWEBPROFNVP nvp
where NOT EXISTS (
select * from SYSADM.PSWEBPROFNVP nvp1
where nvp1.propertyname = 'ENABLEBROWSERCACHE'
and nvp1.webprofilename = nvp.webprofilename)
and nvp.webprofilename =
(select webprofilename from SYSADM.pswebprofhist where deliveredlast = (select max(deliveredlast) from SYSADM.pswebprofhist))
) having count(*) >= 1","To implement the solution
1. Make sure you know what webprofile (name) is used by your site - ref to E-PIA: How to check what webprofile is used by a particular PIA site? (Doc ID 1536113.1) 
2. Edit the webprofile used by the particular site and in the Caching tab/page uncheck the Cache Generated HTML checkbox than save
3. Bounce all PIA webservers tied to this site",PT,PIA Cache Generated HTML box checked,,2,PeopleSoft Enterprise PT PeopleTools,PIAY,,DAY,1,"By proactively alerting the DBAs/SysAdmins about a potential configuration issue, this metric avoids unexpected behavior within the PIA when using the PeopleSoft application.",,PeopleSoft Tools and Technology,PeopleSoft Application Development Tools
APP_SERVER_RESTART_ERROR_COUNT,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,15,<Need to check with SME/Development team>,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
LONG_RUNNING_SERVICE_REQUEST_COUNT,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,HOUR,1,Determine whether the page/objects on a page need tuning,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
NOT_POSTED_PS_PROCESS_METRICS_DATA,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,30,Determine the number processes that could not post reports to the report repository,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESS_FAIL_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,"Determine the number of processes that were unsuccessful with status ""Error""  or ""No success""Determine the number of processes that were unsuccessful with status ""Error""  or ""No success""",,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESS_RUN_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,30,Determine the number of processes currently in running status,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESS_SCHEDULER_SUSPENDED_STATUS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,5,Predict process scheduler servers that are not responding,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESS_STUCK_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,0,Display the processes that have been in processing  status for 30+ minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PS_PROCESSES_NOT_POSTED_COUNT,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,30,Determine the number processes that could not post reports to the report repository,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
PEOPLETOOLS_STATE_FILES_COUNT,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,HOUR,1,Notification about the crash of an  App Server process,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
QUEUED_PROCESS_PSAPPSRV,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,10,Monitor the queue for PSAPPSRV processes and determine whether the number of PSAPPSRV processes are adequate,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
QUEUED_PROCESS_PSBRKHND,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,14,Predict whether the message processing is within acceptable limits,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
QUEUED_PROCESS_PSPUBDSP,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,12,Predict whether the message processing is within acceptable limits,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
PSFT_PT_TEMP_TBL_CHECK,2803946.1,"Select 'Review ' || count(*) || ' Temp Tables Not Built On The Database' AS KEY_DATA, 'E-AUDIT: How to Check Temporary Tables Missing Defined within Application (Doc ID 2803946.1)' SOLUTION, 'Y' AS EVENT
From(
select distinct 'Missing Temporary Table : ' || temp.highest_instance AS KEY_DATA
from
(select a.recname, 'PS_' || a.recname || least((sum(b.temptblinstances) + (select temptblinstances from SYSADM.psoptions)), 99) as highest_instance
from SYSADM.psrecdefn a, SYSADM.psaeappldefn b, SYSADM.psaeappltemptbl c
where a.rectype = '7'
and b.ae_applid = c.ae_applid
and a.recname = c.recname
group by a.recname) temp left outer join all_objects db on db.object_name = temp.highest_instance and db.object_type = 'TABLE'
where db.object_name is null
AND rownum <=5
)
having count(*) > 0","Issue:
Temporary tables are missing that were defined within the application and have not been built on the database

Solution:
Please run the DDDAudit as specified in SRDC Collecting the Dddaudit Report (Doc ID 2004606.1) to identify the missing tables.

The report results are written to a file called DDDAUDIT.xxx in the \TEMP folder. The file extension might be .LIS, .SPF, .PDF, or .HTML.

To find more information about the results and how to resolve the incidents, please check the below document:
E-AUDIT: Discrepancies Were Found In The PeopleTools Metadata (Doc ID 2830022.1)

Ref: E-AUDIT: How to Check Missing Temporary Tables Defined within Application? (Doc ID 2803946.1)",PT,Missing temporary tables,,2,PeopleSoft Enterprise PT PeopleTools,AUDTREPT,,DAY,1,,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
PS_APPLICATION_SERVER_CLIENT_STATUS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,1,Real-time display of the client status,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
PS_APPLICATION_SERVER_QUEUE_STATUS,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,1,Real-time display of the queue status,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
PS_APPLICATION_SERVER_SERVER_STATUS,,,,,,,1,PeopleSoft Enterprise PT PeopleTools,APRVER,,MIN,1,Real-time display of the Application server status,,PeopleSoft Tools and Technology,PeopleSoft Server Tools
PSFT_MISSING_XDO_FONTS,,"#!/bin/bash
# Author: Gutulov Razvan Constantin
#
# Execution combination: 
# 
# name_of_the_script.sh 
# name_of_the_script.sh input_param_1 
# name_of_the_script.sh input_param_1 input_param_2 
# name_of_the_script.sh input_param_1 input_param_2 input_param_3
#
# Input parameters description
# input_param_1 = other PS_CFG_HOME Path then the one set
# input_param_2 = other PS_HOME Path then the one set
# input_param_3 = Domain name 

if [ -z ""$1"" ]; then

#file=$(find / -name ""psappsrv.cfg"" 2>&1 | grep -v ""Permission denied"")
file=$(find $(eval echo \$\{PS_CFG_HOME\}) -name ""psappsrv.cfg"" 2>&1 | grep -v ""Permission denied"")
file=$(echo $file | cut -d "" "" -f1)

else

if [ -z ""$3"" ]; then

file=$(find $1 -name ""psappsrv.cfg"" 2>&1 | grep -v ""Permission denied"")
file=$(echo $file | cut -d "" "" -f1)

else

file=$(find $1 -path ""*/""$3""/psappsrv.cfg"" 2>&1 | grep -v ""Permission denied"")
file=$(echo $file | cut -d "" "" -f1)

fi

fi

awk '/PSTOOLS/,/Integration Broker/'  $file  | while read -r lbl ; do

if grep -q ""xdo.cfg"" <<< $lbl; then
grep -i ""xdo.cfg"" <<< $lbl | while read -r line ; do

if [[ ${line:0:1} != "";"" ]]; then
rez0=$(grep -ioP '(?<=ConfigFile=).*?(?= -)' <<< $line)

if [ -z ""$2"" ]; then
if [[ $rez0 = *""%PS_HOME%""* ]]; then
rez1=$(eval echo \$\{PS_HOME\})""""$(grep -o 'PS_HOME%[^""]*' <<< $rez0 | cut -d ""%"" -f2)
else
rez1=$rez0
fi

else 

if [[ $rez0 = *""%PS_HOME%""* ]]; then
rez1=$2""""$(grep -o 'PS_HOME%[^""]*' <<< $rez0 | cut -d ""%"" -f2)
else
rez1=$rez0
fi
fi

rez1path=$(find / -path $rez1 2>&1 | grep -v ""Permission denied"")

grep -i ""truetype path="" $rez1path | while read -r line1 ; do

USE_COUNTER=0

if [[ ${line1:0:1} != "";"" ]]; then
xdo_work=$(grep -ioP '(?<=truetype path="").*?(?="" )' <<< $line1 )
echo $xdo_work | tr '\n' ' ' | tr ' ' '\n' | while read -r line1 ; do

if [ ! -f ""$line1"" ]; then
echo ""$(expr $USE_COUNTER + 1)  | MICR file: ' ${line1} ' not found in the directory that was defined;"" |  tr '\n' ' ' 
fi

done
fi

done

fi

done
fi

done",,,,,1,PeopleSoft Enterprise PT PeopleTools,BIPUB,,DAY,1,"By proactively alerting the DBAs/SysAdmins about a potential missing font file, this metric avoids unexpected abends of processes that depend on MICR fonts to run.",,PeopleSoft Tools and Technology,PeopleSoft Server Tools
PS_PROCESSES_POSTING_FOR_MORE_THAN_15_MINUTES,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,PROSCHED,,MIN,30,Determine the number processes that are stuck in the process of posting reports to the report repository for 15 minutes,,PeopleSoft Tools and Technology,PeopleSoft Reporting Tools
DB_ALERT_LOG_GENERIC_ALERT_LOG_ERROR,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,15,Predicts whether errors have been reported for the monitored database in the alert log,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
EFFICIENCY_CPU_USAGE_PER_SECOND,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,10,Predicts whether the CPU utilization of the database is within acceptabe limits,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
PSFT_PT_EOAW_CHECK,1611911.1,"Select 'Review ' || count(*) || ' Possible Out-Of-Sync Counter Value(s) In The PS_EOAW_IDS Table' AS KEY_DATA, 'E-AWE: What is the Best Way to Determine the Correct Values in the PS_EOAW_IDS Table? (Doc ID 1611911.1)' SOLUTION, 'Y' AS EVENT
From(
SELECT distinct 'Mismatch on EOAW counters found on STEPINST_ID' KEY_DATA
FROM SYSADM.PS_EOAW_IDS WHERE EOAWCOUNTERNAME='STEPINST_ID'
AND eoawcounter <= (SELECT MAX(EOAWSTEP_INSTANCE) FROM SYSADM.PS_EOAW_STEPINST)
UNION
SELECT distinct 'Mismatch on EOAW counters found on USERINST_ID' KEY_DATA
FROM SYSADM.PS_EOAW_IDS WHERE EOAWCOUNTERNAME='USERINST_ID'
AND eoawcounter <= (SELECT MAX(EOAWUSTEP_INST_ID) FROM SYSADM.PS_EOAW_USERINST)
UNION
SELECT distinct 'Mismatch on EOAW counters found on STAGE_ID' KEY_DATA
FROM SYSADM.PS_EOAW_IDS WHERE EOAWCOUNTERNAME='STAGE_ID'
AND eoawcounter <= (SELECT MAX(SEQ_NBR) FROM SYSADM.PS_EOAW_STAGE)
UNION
SELECT distinct 'Mismatch on EOAW counters found on ESCALATIONS' KEY_DATA
FROM SYSADM.PS_EOAW_IDS WHERE EOAWCOUNTERNAME='ESCALATIONS'
AND (eoawcounter <= (SELECT MAX(SEQ_NBR) FROM SYSADM.PS_EOAW_TIMEOUT)
OR eoawcounter <= (SELECT MAX(SEQ_NBR) FROM SYSADM.PS_EOAW_TIMEOUTDEF))
UNION
SELECT distinct 'Mismatch on EOAW counters found on NTF_PARENT' KEY_DATA
FROM SYSADM.PS_EOAW_IDS WHERE EOAWCOUNTERNAME='NTF_PARENT'
AND eoawcounter <= (SELECT MAX(SEQ_NBR) FROM SYSADM.PS_EOAW_NTF_PRNT)
UNION
SELECT distinct 'Mismatch on EOAW counters found on CRTA_ID' KEY_DATA
FROM SYSADM.PS_EOAW_IDS WHERE EOAWCOUNTERNAME='CRTA_ID'
AND eoawcounter <= (SELECT MAX(EOAWCRTA_ID) FROM SYSADM.PS_EOAW_AUTH_DTL)
)
having count(*) > 0;","SOLUTION:
The PS_EOAW_IDS table is used to generate new numbers that are used as key values in other tables when Approval Framework (AWE) is used for Transaction Approval.
When using the sample datamover scripts, to assist with AWE Process migration from one environment to another, please refer from this knowledge article;
- Doc ID 762829.1 - E-AWE: How to Migrate Approval Workflow Engine (AWE) Configuration Across Environments?
The SQL commands referred to below can assist in determining the correct EOAWCOUNTER values for each of the EOAWCOUNTERNAME Types in the PS_EOAW_IDS table in the target environment. These are followed by an example of an UPDATE to resync the counter value.
Run these MAX SQL to determine what the EOAWCOUNTER Type values should be for each EOAWCOUNTERNAME type, and follow with UPDATE to resolve where applicable:

1. The STEPINST_ID EOAWCOUNTER value is equal to the last EOAWSTEP_INSTANCE value INSERTed into the PS_EOAW_STEPINST table (STEPINST_ID= max EOAWSTEP_INSTANCE).
  SELECT * FROM PS_EOAW_IDS WHERE EOAWCOUNTERNAME='STEPINST_ID'
  SELECT MAX(EOAWSTEP_INSTANCE) FROM PS_EOAW_STEPINST

1.1 Sample of UPDATE for PS_EOAW_IDS.STEPINST_ID;
UPDATE PS_EOAW_IDS SET EOAWCOUNTER = (SELECT MAX(EOAWSTEP_INSTANCE) FROM PS_EOAW_STEPINST) WHERE EOAWCOUNTERNAME = 'STEPINST_ID';

2. The USERINST_ID EOAWCOUNTER value is equal to the last EOAWUSTEP_INST_ID value INSERTed into the PS_EOAW_USERINST table (USERINST_ID = max EOAWUSTEP_INST_ID).
  SELECT * FROM PS_EOAW_IDS WHERE EOAWCOUNTERNAME='USERINST_ID'
  SELECT MAX(EOAWUSTEP_INST_ID) FROM PS_EOAW_USERINST

2.1 Sample of UPDATE for PS_EOAW_IDS.USERINST_ID;
UPDATE PS_EOAW_IDS SET EOAWCOUNTER = (SELECT MAX(EOAWUSTEP_INST_ID)+1 FROM PS_EOAW_USERINST) WHERE EOAWCOUNTERNAME = 'USERINST_ID';

3. The STAGE_ID EOAWCOUNTER value is equal to the last SEQ_NBR value inserted into the PS_EOAW_STAGE table (STAGE_ID = max SEQ_NBR).
  SELECT * FROM PS_EOAW_IDS WHERE EOAWCOUNTERNAME='STAGE_ID'
  SELECT MAX(SEQ_NBR) FROM PS_EOAW_STAGE

3.1 Sample of UPDATE for PS_EOAW_IDS.STAGE_ID;
UPDATE PS_EOAW_IDS SET EOAWCOUNTER = (SELECT MAX(SEQ_NBR)FROM PS_EOAW_STAGE) WHERE EOAWCOUNTERNAME = 'STAGE_ID';

4. The Cross Reference EOAWCOUNTERNAME EOAWCOUNTER value is equal to the last EOAWTHREAD_ID value INSERTed into the Cross Reference table when transaction is submitted. (VCHR_AF_XREF = max EOAWTHREAD_ID) in this example.
  SELECT MAX(EOAWTHREAD_ID) FROM PS_VCHR_AF_XREF WHERE BUSINESS_UNIT = 'US003'
  SELECT * FROM PS_EOAW_IDS WHERE EOAWCOUNTERNAME='VCHR_AF_XREF'

4.1 Sample of UPDATE, which should be done for each AWE transaction used at site;
UPDATE PS_EOAW_IDS SET EOAWCOUNTER = (SELECT MAX(EOAWTHREAD_ID) FROM PS_VCHR_AF_XREF)WHERE EOAWCOUNTERNAME = 'VCHR_AF_XREF'

5. The ESCALATIONS EOAWCOUNTER value is equal to the last SEQ_NBR value inserted into either of the PS_EOAW_TIMEOUT and/or PS_EOAW_TIMEOUTDEF tables (ESCALATIONS = max SEQ_NBR).
  SELECT * FROM PS_EOAW_IDS WHERE EOAWCOUNTERNAME='ESCALATIONS'
  SELECT MAX(SEQ_NBR) FROM PS_EOAW_TIMEOUT
  SELECT MAX(SEQ_NBR) FROM PS_EOAW_TIMEOUTDEF

6. The NTF_PARENT EOAWCOUNTER value is equal to the last SEQ_NBR value inserted into the PS_EOAW_NTF_PRNT table (NTF_PARENT = max SEQ_NBR).  This value is only used with Offline Notifications.  If all notifications have been sent, this can value can be set back to 1.
  SELECT * FROM PS_EOAW_IDS WHERE EOAWCOUNTERNAME='NTF_PARENT'
  SELECT MAX(SEQ_NBR) FROM PS_EOAW_NTF_PRNT
 
7. The CRTA_ID EOAWCOUNTER value is equal to the last EOAWCRTA_ID value inserted into the PS_EOAW_AUTH_DTL table (CRTA_ID = max EOAWCRTA_ID)
  SELECT * FROM PS_EOAW_IDS WHERE EOAWCOUNTERNAME='CRTA_ID'
  SELECT MAX(EOAWCRTA_ID) FROM PS_EOAW_AUTH_DTL",PT,EOAW data discrepancy,,2,PeopleSoft Enterprise PT PeopleTools,WOROW,,WEEK,MON,"By proactively alerting the DBAs/SysAdmins about a potential data discrepancy in the PS_EOAW_IDS table, this metric avoids scenario which can cause business process failures within the application (e.g. FSCM, HCM)",,PeopleSoft Tools and Technology,PeopleSoft Integration Tools
EFFICIENCY_RESPONSE_TIME_PER_TRANSACTION,,,,,,,2,PeopleSoft Enterprise PT PeopleTools,ORALE,,MIN,10,Predicts whether the database's ability to process  workloads has changed because of either resource constraints or contention,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
INVALID_OBJECT_COUNT,,,,,,,3,PeopleSoft Enterprise PT PeopleTools,ORALE,,HOUR,24,Predicts whether invalid objects exist in the database,,PeopleSoft Tools and Technology,PeopleSoft Install and Upgrade Tools
PSFT_SCM_REQ_STUCK,1276857.1,"SELECT 'Y' as EVENT
, ('Total number of Requisitions stuck in process and need your attention: ' || COUNT(*)) as KEY_DATA
, 'Proposed solution: Troubleshooting Requisition Stuck In Sourcing Workbench with a Stage Status of Error, POCalc or PO Create and List of the Staging Tables (Doc ID 1276857.1)' as SOLUTION
FROM SYSADM.PS_PO_ITM_STG A
WHERE A.STAGE_STATUS in ('V','P')
AND ( (A.PROCESS_INSTANCE IN (SELECT B.PROCESS_INSTANCE FROM SYSADM.PS_PO_ITM_STG B, SYSADM.PSPRCSRQST C
WHERE B.PROCESS_INSTANCE = C.PRCSINSTANCE AND C.RUNSTATUS NOT IN (7)))
OR (A.PROCESS_INSTANCE NOT IN (SELECT D.PROCESS_INSTANCE FROM SYSADM.PS_PO_ITM_STG D, SYSADM.PSPRCSRQST E
WHERE D.PROCESS_INSTANCE = E.PRCSINSTANCE)))
having count(*) >= 1","Below is information on how to cleanup and reset your requisition when they are in a Stage Status (STAGE_STATUS) of ""POCALC"" (V) or ""PO Create"" (V) in the Sourcing Workbench.


For Stage_Status of ""V"" (POCALC)
Requisitions can be either reset or cleared out from the Sourcing Workbench (staging tables) so it can be available for resourcing.

1. Using the Process Instance (PROCESS_INSTANCE) for the failed process, update the records with this Process Instance value in the following tables. This will set the requisition in the staging table to an ""Error"" status.

UPDATE PS_PO_ITM_STG SET STAGE_STATUS = 'E'
UPDATE PS_PO_DISTRIB_STG SET STAGE_STATUS = 'E'

2. Display the requisition(s) from Step 2 in the Sourcing Workbench page by either Process Instance or Requisition ID. Change the Stage Status from ""Error"" to ""Reset and Purge"" and save the page. You will do this for every requisition line.

3. Make sure you do not have data sitting on the staging tables below for the requisition(s) you just reset/purged. If so, delete the rows using the failed Process Instance value to determine the correct set of row(s).

PO_ITM_STG_VND
PO_ITM_STG_DF
PO_ITM_STG_UD
PO_ITM_STG_TAX
PO_VAL_ADJ_STG

4. Now the requisition is back to the way it was before it was stuck. The requisition will be available to source again. When you run the AutoSelect Requisition, PO Calculation and Create Purchase Order processes create a new run control ID.

After the requisition is reset and purged through the Sourcing Workbench the requisition fields below should be set back to the following conditions:

REQ_HDR
IN_PROCESS_FLG = 'N'
REQ_STATUS = 'A'
HOLD_STATUS = 'N'

REQ_LINE
IN_PROCESS_FLG = 'N
SOURCE_STATUS = 'A'

REQ_LN_DISTRIB
QTY_OPEN > 0 or AMT_OPEN > 0 (depends on if the requisition is distributed by quantity or amount)

If you don't want to reset/keep the requisition data follow the steps below:
1. SQL Update the PO_ITM_STG and set the STAGE_STATUS = C (Completed). Again use the PROCESS_INSTANCE value that failed to help you identify the requisition(s).
2. Run the Purge Stage Tables (PO_POSTGPRG) process for ""Completed"" rows. This will remove the staged data from the tables.


Below is a list of additional temp and work records that you should check and make sure you don't have residual data from your requisition(s) and or PO(s). Use failed Process Instance value to determine records to delete.
 

Additional Temp & Work Records
PO_BU_OPT_TMP
PO_SRC_TMP_BU
PO_PRORATE_TMP
PO_REVISN_TMP
PO_HDR_STG_WRK
PO_BYRCNT_TMP
PO_CMROUND_TMP
PO_UOMRND_TMP
PO_CMROUND_WRK
PO_SRC_TMP_ITMT
PO_SRC_TMP_ITM
PO_SRC_TMP_CNTL
PO_SRC_TMP_VNDR
PO_SRC_TMP_IVBS
PO_SRC_TMP_IVND
PO_SRC_TMP_LINE
PO_PRICE_WRK1
PO_CNTRCT_TMP
PO_PRICE_WRK2
PO_PRC_ADJ_WRK
PO_PRC_CNTR_TMP
PO_CMFRTMSC_TMP
PO_VNDR_FRT_TMP
PO_FRT_RULE_TMP
PO_MAX_ADJ_TMP
PO_MISC_TMP
PO_VAT_ENT_TMP
PO_TXBL_ITM_TMP
PO_SUT_XCPN_TMP
PO_SUT_DFLT_TM2
PO_SUT_DFLT_TMP
PO_TAX_TEMP
PO_AE_ITM_WRK
PO_SRC_TMP_HDR
PO_ITM_STG_UDWK
PO_DF_SID_CNTR
PO_DF_SID_LOC
PO_DF_SID_MTCH
PO_DF_SID_TAX
PO_DF_JRNL_ENCM
PO_CNTRCT_LNT2
PO_CNTRCT_LNT1
OM_TRFT_TAO
OM_RULE_CD_TAO
OM_TRFT_RSL_TAO
PO_FRT_MISC_SUM
PO_VAT_CLC_IN
PO_VAT_CLC_OUT
OM_TRFT_SET_TAO


 

For Stage_Status of ""P"" (PO Create)
Requisitions that failed to build during the PO_POCREATE process are reset to a prior status, Stage Status of ""Ready,"" so that they can be reprocessed by the PO_POCREATE process.

1. Using the Process Instance value for the failed process, update the records for the Process Instance as shown below. This will set you Stage Status from ""P"" (PO Create) to ""B"" (Ready).

Update PS_PO_ITM_STG_UD set STAGE_STATUS = 'B' (Ready) and set PO_ID = 'UNASSIGNED'
Update PS_PO_ITM_STG set STAGE_STATUS = 'B'
Update PS_PO_DISTRIB_STG set STAGE_STATUS = 'B'

If you are using Manufacturing then:
Update PS_SF_OP_LIST set SUBPO_STATUS = '30' where SUBPO_STATUS = '40'

2. Delete data, u",PO,Stuck requisitions,,2,PeopleSoft Enterprise SCM Purchasing,REQUIS,,WEEK,MON,"Metric will : 
Proactively identify Requisition(s) stuck  in process and provide the list if Requisition and its related information 
Solution/ Action plan will be provided based on the Requisition(s) details fetched
This will reduce time spent on finding the reasons why Purchase Order(s) are not  created.
Purchase Orders can be dispatched and paid on time 
Reduced phone calls/inquiry from Requestor(s) regarding the requisition(s)",,PeopleSoft Supply Chain Management,PeopleSoft Procurement
PSFT_SCM_PO_STUCK,787538.1,"select 'Y' as EVENT 
, count(*) || ' Purchase Orders in process and need your attention' as KEY_DATA
, 'Proposed solution: Troubleshoot Error Message ""Purchase Order Being Processed by Batch Programs. Transferring to Inquiry Pages. (10200,32)"" Given when Opening a Purchase Order (Doc ID 787538.1)' as SOLUTION
FROM SYSADM.PS_PO_HDR A
WHERE A.IN_PROCESS_FLG ='Y'
AND ( (A.PROCESS_INSTANCE IN (SELECT B.PROCESS_INSTANCE FROM SYSADM.PS_PO_HDR B, SYSADM.PSPRCSRQST C
WHERE B.PROCESS_INSTANCE = C.PRCSINSTANCE AND C.RUNSTATUS NOT IN (7) AND C.PRCSNAME <> 'AP_MATCH' ))
OR (A.PROCESS_INSTANCE NOT IN (SELECT D.PROCESS_INSTANCE FROM SYSADM.PS_PO_HDR D, SYSADM.PSPRCSRQST E
WHERE D.PROCESS_INSTANCE = E.PRCSINSTANCE)))
 having count(*) >= 1","The message (Error Code 10200,32) is a common indicating there is a process that is currently running against the PO. As an example, the PO could be running through a process such as Change Order, PO Calculations, PO Reconciliation or other sourcing processes. If this is the case, wait for the process to complete then you can open the PO.
Review the processes that may be running in the Process Monitor. If it has been determined that there are no processes running against the PO, a SQL update is necessary to unlock the PO.
Follow these steps to unlock the PO.
1. Query PO_HDR.IN_PROCESS_FLG for the PO in question
2. Update the IN_PROCESS_FLG from Y to N
3. Test to see if the PO can now be displayed
This flag becomes stuck due to various reason (i.e batch process against this document) and the only recourse is to do the SQL update behind the scene. Make sure to thoroughly test your data changes prior to moving them in to a production environment.",PO,Stuck POs ,,2,PeopleSoft Enterprise SCM Purchasing,PURCHA,,WEEK,MON,"Metric will : 
Proactively identify Purchase Order(s) stuck  in process and provide the list if POs and its related information 
Solution/ Action plan will be provided based on the POs details fetched
This will reduce time spent on finding the reasons why Purchase Order(s) are not being processed further. For instance Matching process for Voucher(s)
Purchase Orders can be dispatched and paid on time 
Reduced phone calls/inquiry from Requestor(s) regarding the order status
Reduced phone calls/inquiry from Suppliers regarding ETA on Payments.",,PeopleSoft Supply Chain Management,PeopleSoft Procurement
